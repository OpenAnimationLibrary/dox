\hypertarget{class_iwa___glare_fx}{}\doxysection{Iwa\+\_\+\+Glare\+Fx Class Reference}
\label{class_iwa___glare_fx}\index{Iwa\_GlareFx@{Iwa\_GlareFx}}
Inheritance diagram for Iwa\+\_\+\+Glare\+Fx\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{class_iwa___glare_fx}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_iwa___glare_fx_aadea55cad2bd4ab40adbed80d95fb786}{do\+Compute}} (\mbox{\hyperlink{class_t_tile}{TTile}} \&tile, double frame, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&settings) override
\item 
bool \mbox{\hyperlink{class_iwa___glare_fx_ae890a10afd101e5ae5809d7cf41180a3}{do\+Get\+BBox}} (double frame, \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&b\+Box, const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info) override
\item 
bool \mbox{\hyperlink{class_iwa___glare_fx_a943785851d7f8b1768fcbde574be53ce}{can\+Handle}} (const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&info, double frame) override
\item 
void \mbox{\hyperlink{class_iwa___glare_fx_aa93e6a753b40f596949bdb5b899f8615}{get\+Param\+UIs}} (\mbox{\hyperlink{class_t_param_u_i_concept}{TParam\+UIConcept}} $\ast$\&concepts, int \&length) override
\end{DoxyCompactItemize}
\doxysubsection*{Protected Types}
\begin{DoxyCompactItemize}
\item 
enum \{ {\bfseries Rende\+Mode\+\_\+\+Filter\+Preview} = 0
, {\bfseries Rende\+Mode\+\_\+\+Render}
, {\bfseries Render\+Mode\+\_\+\+Iris}
 \}
\item 
enum \{ \newline
{\bfseries Iris\+\_\+\+Input\+Image} = 0
, {\bfseries Iris\+\_\+\+Square}
, {\bfseries Iris\+\_\+\+Hexagon}
, {\bfseries Iris\+\_\+\+Octagon}
, \newline
{\bfseries Iris\+\_\+\+Gear\+Shape}
 \}
\item 
enum \{ {\bfseries Appearance\+\_\+\+Thin\+Line}
, {\bfseries Appearance\+\_\+\+Medium\+Line}
, {\bfseries Appearance\+\_\+\+Thick\+Line}
, {\bfseries Appearance\+\_\+\+Fill}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{class_iwa___glare_fx_a178199a689ba1b39c456287b4f67e00f}{get\+Size\+Pixel\+Amount}} (const double val, const \mbox{\hyperlink{class_t_affine}{TAffine}} affine)
\item 
void \mbox{\hyperlink{class_iwa___glare_fx_a9f79b86c9d756436af510e4c35b446ae}{draw\+Preset\+Iris}} (\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} iris\+Ras, double iris\+Size, const double frame)
\item 
void \mbox{\hyperlink{class_iwa___glare_fx_a62e343895cc1491d6e512cb84bafa6ed}{convert\+Iris}} (kiss\+\_\+fft\+\_\+cpx $\ast$kissfft\+\_\+comp\+\_\+iris\+\_\+before, const int \&dim\+Iris, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&iris\+BBox, const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} iris\+Raster)
\item 
void \mbox{\hyperlink{class_iwa___glare_fx_aa802bf5581e655706a6620df752eaf6e}{power\+Spectrum2\+Glare\+Pattern}} (const double frame, const \mbox{\hyperlink{class_t_affine}{TAffine}} affine, kiss\+\_\+fft\+\_\+cpx $\ast$spectrum, \mbox{\hyperlink{structdouble3}{double3}} $\ast$glare, int dim\+Iris, double intensity, double iris\+Resize\+Factor)
\item 
void \mbox{\hyperlink{class_iwa___glare_fx_a57a110bb090f2988bdbf31f4bf117417}{distort\+Glare\+Pattern}} (const double frame, const \mbox{\hyperlink{class_t_affine}{TAffine}} affine, double $\ast$glare, const int dim\+Iris)
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ }\\void \mbox{\hyperlink{class_iwa___glare_fx_a2247e8a90f9124ce68930810f08d3d9f}{set\+Filter\+Preview\+To\+Result}} (const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} ras, \mbox{\hyperlink{structdouble3}{double3}} $\ast$glare, int dim\+Iris, \mbox{\hyperlink{structint2}{int2}} margin)
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ }\\void \mbox{\hyperlink{class_iwa___glare_fx_a9feca5ccc88311a05a2b3e1bb5716d35}{set\+Source\+Tile\+To\+Buffer}} (const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} ras, kiss\+\_\+fft\+\_\+cpx $\ast$buf)
\item 
void \mbox{\hyperlink{class_iwa___glare_fx_aec96073aee1f07a55b9f38a67f7c7895}{set\+Glare\+Pattern\+To\+Buffer}} (const \mbox{\hyperlink{structdouble3}{double3}} $\ast$glare, kiss\+\_\+fft\+\_\+cpx $\ast$buf, const int channel, const int dim\+Iris, const \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&dim\+Out)
\item 
void \mbox{\hyperlink{class_iwa___glare_fx_a19fb467be1a18eb89de613d8cec5a5bc}{multiply\+Filter}} (kiss\+\_\+fft\+\_\+cpx $\ast$glare, const kiss\+\_\+fft\+\_\+cpx $\ast$source, const int count)
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ }\\void \mbox{\hyperlink{class_iwa___glare_fx_ab2764aefcd92287bf1009e96f90a6a1f}{set\+Channel\+To\+Result}} (const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} ras, kiss\+\_\+fft\+\_\+cpx $\ast$buf, int channel, const \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&dim\+Out)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_iwa___glare_fx_ad9e29bfbeda2844860d61f634c13c7f3}{m\+\_\+source}}
\item 
\mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} \mbox{\hyperlink{class_iwa___glare_fx_a81444d806c9fb177400b664906a50c0e}{m\+\_\+iris}}
\item 
\mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} \mbox{\hyperlink{class_iwa___glare_fx_a2ca52aac2db43a17db75f58815607dea}{m\+\_\+render\+Mode}}
\item 
\mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} \mbox{\hyperlink{class_iwa___glare_fx_a9dee581661367bba41c1b531636f5cfe}{m\+\_\+iris\+Mode}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_aaca378e022accdc7cec6bb3c7326f9c0}{m\+\_\+iris\+Scale}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_a37ae7f414ee30af022542987438b6cc1}{m\+\_\+iris\+Gear\+Edge\+Count}}
\item 
TInt\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_a6719f78cfebeb85c235aa9f205218305}{m\+\_\+iris\+Random\+Seed}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_a18e10b8438e573649632dd11cfcd741d}{m\+\_\+iris\+Symmetry}}
\item 
\mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} \mbox{\hyperlink{class_iwa___glare_fx_a9924c508a9633a2f453f7992d31f64f1}{m\+\_\+iris\+Appearance}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_a889d0b67fbad6c6f7b7227735af8a2b4}{m\+\_\+intensity}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_a2b1fbf398b4cfbc19f1d0b7f57ea75cd}{m\+\_\+size}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_aeb446dc887e48e0745895ee90848e8e2}{m\+\_\+rotation}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_a5b564fc2e3047c75d9042ff638619075}{m\+\_\+aberration}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_a51d91ef1838cc8992788873676eeecf2}{m\+\_\+noise\+\_\+factor}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_aa7edcb0c0fe941c3685c6d6e35c3a9cc}{m\+\_\+noise\+\_\+size}}
\item 
\mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} \mbox{\hyperlink{class_iwa___glare_fx_ae1363cbb3d2a2f55cd95609373ee1d5d}{m\+\_\+noise\+\_\+octave}}
\item 
TDouble\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_ad4949ee4f6b93e5f0532c09095ff1113}{m\+\_\+noise\+\_\+evolution}}
\item 
TPoint\+ParamP \mbox{\hyperlink{class_iwa___glare_fx_aea62f361e88a35e083ccdf7fb3c42322}{m\+\_\+noise\+\_\+offset}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_iwa___glare_fx_a02e5a13e6a06200742863925524dc91a}\label{class_iwa___glare_fx_a02e5a13e6a06200742863925524dc91a}} 
\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily anonymous enum\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00060 \{ RendeMode\_FilterPreview = 0, RendeMode\_Render, RenderMode\_Iris \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_a58bfc6d74eb2acd8cced577f8cf7e55f}\label{class_iwa___glare_fx_a58bfc6d74eb2acd8cced577f8cf7e55f}} 
\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily anonymous enum\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00062        \{}
\DoxyCodeLine{00063     Iris\_InputImage = 0,}
\DoxyCodeLine{00064     Iris\_Square,}
\DoxyCodeLine{00065     Iris\_Hexagon,}
\DoxyCodeLine{00066     Iris\_Octagon,}
\DoxyCodeLine{00067     Iris\_GearShape}
\DoxyCodeLine{00068   \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_aade09b674a462a5be2ae405573dc3d46}\label{class_iwa___glare_fx_aade09b674a462a5be2ae405573dc3d46}} 
\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily anonymous enum\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00070        \{}
\DoxyCodeLine{00071     Appearance\_ThinLine,}
\DoxyCodeLine{00072     Appearance\_MediumLine,}
\DoxyCodeLine{00073     Appearance\_ThickLine,}
\DoxyCodeLine{00074     Appearance\_Fill,}
\DoxyCodeLine{00075   \};}

\end{DoxyCode}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_iwa___glare_fx_a7968debe762f38e72fe7351f6fa9bdc0}\label{class_iwa___glare_fx_a7968debe762f38e72fe7351f6fa9bdc0}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{Iwa\_GlareFx()}{Iwa\_GlareFx()}}
{\footnotesize\ttfamily Iwa\+\_\+\+Glare\+Fx\+::\+Iwa\+\_\+\+Glare\+Fx (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00044     : m\_renderMode(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(RendeMode\_FilterPreview, \textcolor{stringliteral}{"{}Filter Preview"{}}))}
\DoxyCodeLine{00045     , m\_irisMode(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(Iris\_InputImage, \textcolor{stringliteral}{"{}Input Image"{}}))}
\DoxyCodeLine{00046     , m\_irisScale(0.2)}
\DoxyCodeLine{00047     , m\_irisGearEdgeCount(10)}
\DoxyCodeLine{00048     , m\_irisRandomSeed(0)}
\DoxyCodeLine{00049     , m\_irisSymmetry(1.0)}
\DoxyCodeLine{00050     , m\_irisAppearance(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}())}
\DoxyCodeLine{00051     , m\_intensity(0.0)}
\DoxyCodeLine{00052     , m\_size(100.0)}
\DoxyCodeLine{00053     , m\_rotation(0.0)}
\DoxyCodeLine{00054     , m\_aberration(1.0)}
\DoxyCodeLine{00055     , m\_noise\_factor(0.0)}
\DoxyCodeLine{00056     , m\_noise\_size(0.5)}
\DoxyCodeLine{00057     , m\_noise\_octave(\textcolor{keyword}{new} \mbox{\hyperlink{class_t_enum_param}{TIntEnumParam}}(1, \textcolor{stringliteral}{"{}1"{}}))}
\DoxyCodeLine{00058     , m\_noise\_evolution(0.0)}
\DoxyCodeLine{00059     , m\_noise\_offset(\mbox{\hyperlink{class_t_point_t}{TPointD}}(0, 0)) \{}
\DoxyCodeLine{00060   \textcolor{comment}{// Version 1 : lights had been constantly summed in all wavelength}}
\DoxyCodeLine{00061   \textcolor{comment}{// Version 2 : intensities are weighted proportional to 1/(rambda\string^2)}}
\DoxyCodeLine{00062   setFxVersion(2);}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064   \textcolor{comment}{// Bind the common parameters}}
\DoxyCodeLine{00065   \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Source"{}}, m\_source);}
\DoxyCodeLine{00066   \mbox{\hyperlink{class_t_fx_af0ccf8d65934ed9f7a62d3b45ee5f2b6}{addInputPort}}(\textcolor{stringliteral}{"{}Iris"{}}, m\_iris);}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}renderMode"{}}, m\_renderMode);}
\DoxyCodeLine{00069   m\_renderMode-\/>addItem(RendeMode\_Render, \textcolor{stringliteral}{"{}Render"{}});}
\DoxyCodeLine{00070   m\_renderMode-\/>addItem(RenderMode\_Iris, \textcolor{stringliteral}{"{}Iris"{}});}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}irisMode"{}}, m\_irisMode);}
\DoxyCodeLine{00073   m\_irisMode-\/>addItem(Iris\_Square, \textcolor{stringliteral}{"{}4 Streaks"{}});}
\DoxyCodeLine{00074   m\_irisMode-\/>addItem(Iris\_Hexagon, \textcolor{stringliteral}{"{}6 Streaks"{}});}
\DoxyCodeLine{00075   m\_irisMode-\/>addItem(Iris\_Octagon, \textcolor{stringliteral}{"{}8 Streaks"{}});}
\DoxyCodeLine{00076   m\_irisMode-\/>addItem(Iris\_GearShape, \textcolor{stringliteral}{"{}Multiple Streaks"{}});}
\DoxyCodeLine{00077 }
\DoxyCodeLine{00078   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}irisScale"{}}, m\_irisScale);}
\DoxyCodeLine{00079   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}irisGearEdgeCount"{}}, m\_irisGearEdgeCount);}
\DoxyCodeLine{00080   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}irisRandomSeed"{}}, m\_irisRandomSeed);}
\DoxyCodeLine{00081   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}irisSymmetry"{}}, m\_irisSymmetry);}
\DoxyCodeLine{00082   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}irisAppearance"{}}, m\_irisAppearance);}
\DoxyCodeLine{00083   m\_irisAppearance-\/>addItem(Appearance\_ThinLine, \textcolor{stringliteral}{"{}Thin Line"{}});}
\DoxyCodeLine{00084   m\_irisAppearance-\/>addItem(Appearance\_MediumLine, \textcolor{stringliteral}{"{}Medium Line"{}});}
\DoxyCodeLine{00085   m\_irisAppearance-\/>addItem(Appearance\_ThickLine, \textcolor{stringliteral}{"{}Thick Line"{}});}
\DoxyCodeLine{00086   m\_irisAppearance-\/>addItem(Appearance\_Fill, \textcolor{stringliteral}{"{}Filled"{}});}
\DoxyCodeLine{00087   m\_irisAppearance-\/>setValue(Appearance\_MediumLine);}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}intensity"{}}, m\_intensity, \textcolor{keyword}{false});}
\DoxyCodeLine{00090   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}size"{}}, m\_size, \textcolor{keyword}{false});}
\DoxyCodeLine{00091   m\_size-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00092   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}rotation"{}}, m\_rotation, \textcolor{keyword}{false});}
\DoxyCodeLine{00093   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}aberration"{}}, m\_aberration, \textcolor{keyword}{false});}
\DoxyCodeLine{00094 }
\DoxyCodeLine{00095   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}noise\_factor"{}}, m\_noise\_factor, \textcolor{keyword}{false});}
\DoxyCodeLine{00096   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}noise\_size"{}}, m\_noise\_size, \textcolor{keyword}{false});}
\DoxyCodeLine{00097   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}noise\_octave"{}}, m\_noise\_octave, \textcolor{keyword}{false});}
\DoxyCodeLine{00098   m\_noise\_octave-\/>addItem(2, \textcolor{stringliteral}{"{}2"{}});}
\DoxyCodeLine{00099   m\_noise\_octave-\/>addItem(3, \textcolor{stringliteral}{"{}3"{}});}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}noise\_evolution"{}}, m\_noise\_evolution, \textcolor{keyword}{false});}
\DoxyCodeLine{00102   bindParam(\textcolor{keyword}{this}, \textcolor{stringliteral}{"{}noise\_offset"{}}, m\_noise\_offset, \textcolor{keyword}{false});}
\DoxyCodeLine{00103   m\_noise\_offset-\/>getX()-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00104   m\_noise\_offset-\/>getY()-\/>setMeasureName(\textcolor{stringliteral}{"{}fxLength"{}});}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106   m\_irisScale-\/>setValueRange(0.1, 0.8);}
\DoxyCodeLine{00107   m\_irisGearEdgeCount-\/>setValueRange(3, 50);}
\DoxyCodeLine{00108   m\_irisSymmetry-\/>setValueRange(0.1, 1.0);}
\DoxyCodeLine{00109   m\_irisRandomSeed-\/>setValueRange(0, (std::numeric\_limits<int>::max)());}
\DoxyCodeLine{00110 }
\DoxyCodeLine{00111   m\_intensity-\/>setValueRange(-\/5.0, 5.0);}
\DoxyCodeLine{00112   m\_size-\/>setValueRange(10.0, 1500.0);}
\DoxyCodeLine{00113   m\_rotation-\/>setValueRange(-\/1800, 1800);}
\DoxyCodeLine{00114   m\_aberration-\/>setValueRange(-\/2.0, 2.0);}
\DoxyCodeLine{00115   m\_noise\_factor-\/>setValueRange(0.0, 1.0);}
\DoxyCodeLine{00116   m\_noise\_size-\/>setValueRange(0.01, 3.0);}
\DoxyCodeLine{00117 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_iwa___glare_fx_a943785851d7f8b1768fcbde574be53ce}\label{class_iwa___glare_fx_a943785851d7f8b1768fcbde574be53ce}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!canHandle@{canHandle}}
\index{canHandle@{canHandle}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{canHandle()}{canHandle()}}
{\footnotesize\ttfamily bool Iwa\+\_\+\+Glare\+Fx\+::can\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info,  }\item[{double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00835                                                                      \{}
\DoxyCodeLine{00836   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00837 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_a62e343895cc1491d6e512cb84bafa6ed}\label{class_iwa___glare_fx_a62e343895cc1491d6e512cb84bafa6ed}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!convertIris@{convertIris}}
\index{convertIris@{convertIris}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{convertIris()}{convertIris()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Glare\+Fx\+::convert\+Iris (\begin{DoxyParamCaption}\item[{kiss\+\_\+fft\+\_\+cpx $\ast$}]{kissfft\+\_\+comp\+\_\+iris\+\_\+before,  }\item[{const int \&}]{dim\+Iris,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{iris\+BBox,  }\item[{const \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}}}]{iris\+Raster }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00845                                                          \{}
\DoxyCodeLine{00846   \textcolor{comment}{// the original size of iris image}}
\DoxyCodeLine{00847   \mbox{\hyperlink{structdouble2}{double2}} irisOrgSize = \{irisBBox.getLx(), irisBBox.getLy()\};}
\DoxyCodeLine{00848 }
\DoxyCodeLine{00849   \textcolor{comment}{// add 1 pixel margins to all sides}}
\DoxyCodeLine{00850   \mbox{\hyperlink{structint2}{int2}} filterSize = \{(int)std::ceil(irisOrgSize.x) + 2,}
\DoxyCodeLine{00851                      (int)std::ceil(irisOrgSize.y) + 2\};}
\DoxyCodeLine{00852   \mbox{\hyperlink{class_t_point_t}{TPointD}} resizeOffset((\textcolor{keywordtype}{double})filterSize.x -\/ irisOrgSize.x,}
\DoxyCodeLine{00853                        (\textcolor{keywordtype}{double})filterSize.y -\/ irisOrgSize.y);}
\DoxyCodeLine{00854 }
\DoxyCodeLine{00855   \textcolor{comment}{// Try to set the center of the iris to the center of the screen}}
\DoxyCodeLine{00856   \textcolor{keywordflow}{if} ((dimIris -\/ filterSize.x) \% 2 == 1) filterSize.x++;}
\DoxyCodeLine{00857   \textcolor{keywordflow}{if} ((dimIris -\/ filterSize.y) \% 2 == 1) filterSize.y++;}
\DoxyCodeLine{00858 }
\DoxyCodeLine{00859   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} resizedIris(\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(filterSize.x, filterSize.y));}
\DoxyCodeLine{00860 }
\DoxyCodeLine{00861   \mbox{\hyperlink{class_t_affine}{TAffine}} aff;}
\DoxyCodeLine{00862   \mbox{\hyperlink{class_t_point_t}{TPointD}} affOffset(0.5, 0.5);}
\DoxyCodeLine{00863   \textcolor{keywordflow}{if} (dimIris \% 2 == 1) affOffset += \mbox{\hyperlink{class_t_point_t}{TPointD}}(0.5, 0.5);}
\DoxyCodeLine{00864 }
\DoxyCodeLine{00865   aff = \mbox{\hyperlink{class_t_translation}{TTranslation}}(resizedIris-\/>getCenterD() + affOffset);}
\DoxyCodeLine{00866   aff *= \mbox{\hyperlink{class_t_translation}{TTranslation}}(-\/(irisRaster-\/>getCenterD() + affOffset));}
\DoxyCodeLine{00867 }
\DoxyCodeLine{00868   \textcolor{comment}{// resample the iris}}
\DoxyCodeLine{00869   \mbox{\hyperlink{namespace_t_rop_a5e39bc748039afe42001ba44f2d2a073}{TRop::resample}}(resizedIris, irisRaster, aff);}
\DoxyCodeLine{00870 }
\DoxyCodeLine{00871   \textcolor{comment}{// accumulated value}}
\DoxyCodeLine{00872   \textcolor{keywordtype}{float} irisValAmount = 0.0;}
\DoxyCodeLine{00873 }
\DoxyCodeLine{00874   \textcolor{keywordtype}{int} iris\_j = 0;}
\DoxyCodeLine{00875   \textcolor{comment}{// Initialize}}
\DoxyCodeLine{00876   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dimIris * dimIris; i++) \{}
\DoxyCodeLine{00877     kissfft\_comp\_iris\_before[i].r = 0.0;}
\DoxyCodeLine{00878     kissfft\_comp\_iris\_before[i].i = 0.0;}
\DoxyCodeLine{00879   \}}
\DoxyCodeLine{00880   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = (dimIris -\/ filterSize.y) / 2; iris\_j < filterSize.y;}
\DoxyCodeLine{00881        j++, iris\_j++) \{}
\DoxyCodeLine{00882     \textcolor{keywordflow}{if} (j < 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00883     \textcolor{keywordflow}{if} (j >= dimIris) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00884     TPixel64* pix = resizedIris-\/>pixels(iris\_j);}
\DoxyCodeLine{00885     \textcolor{keywordtype}{int} iris\_i    = 0;}
\DoxyCodeLine{00886     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = (dimIris -\/ filterSize.x) / 2; iris\_i < filterSize.x;}
\DoxyCodeLine{00887          i++, iris\_i++) \{}
\DoxyCodeLine{00888       \textcolor{keywordflow}{if} (i < 0) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00889       \textcolor{keywordflow}{if} (i >= dimIris) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00890       \textcolor{comment}{// Value = 0.3R 0.59G 0.11B}}
\DoxyCodeLine{00891       kissfft\_comp\_iris\_before[j * dimIris + i].r =}
\DoxyCodeLine{00892           ((float)pix-\/>r * 0.3f + (\textcolor{keywordtype}{float})pix-\/>g * 0.59f +}
\DoxyCodeLine{00893            (float)pix-\/>b * 0.11f) /}
\DoxyCodeLine{00894           (float)USHRT\_MAX;}
\DoxyCodeLine{00895       irisValAmount += kissfft\_comp\_iris\_before[j * dimIris + i].r;}
\DoxyCodeLine{00896       pix++;}
\DoxyCodeLine{00897     \}}
\DoxyCodeLine{00898   \}}
\DoxyCodeLine{00899 }
\DoxyCodeLine{00900   \textcolor{comment}{// Normalize value}}
\DoxyCodeLine{00901   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dimIris * dimIris; i++) \{}
\DoxyCodeLine{00902     kissfft\_comp\_iris\_before[i].r /= irisValAmount;}
\DoxyCodeLine{00903   \}}
\DoxyCodeLine{00904 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_a57a110bb090f2988bdbf31f4bf117417}\label{class_iwa___glare_fx_a57a110bb090f2988bdbf31f4bf117417}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!distortGlarePattern@{distortGlarePattern}}
\index{distortGlarePattern@{distortGlarePattern}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{distortGlarePattern()}{distortGlarePattern()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Glare\+Fx\+::distort\+Glare\+Pattern (\begin{DoxyParamCaption}\item[{const double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}}}]{affine,  }\item[{double $\ast$}]{glare,  }\item[{const int}]{dim\+Iris }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00607                                                                         \{}
\DoxyCodeLine{00608   \textcolor{keyword}{auto} \mbox{\hyperlink{namespacetcg_1_1numeric__ops_a67ec0c3653cded4a00218678558477f5}{lerp}} = [](\textcolor{keywordtype}{double} val1, \textcolor{keywordtype}{double} val2, \textcolor{keywordtype}{double} ratio) \{}
\DoxyCodeLine{00609     \textcolor{keywordflow}{return} val1 * (1.0 -\/ ratio) + val2 * ratio;}
\DoxyCodeLine{00610   \};}
\DoxyCodeLine{00611 }
\DoxyCodeLine{00612   \textcolor{keyword}{auto} lerpGlarePtn = [\&](\textcolor{keywordtype}{double} i, \textcolor{keywordtype}{double} j, \textcolor{keywordtype}{double}* gp) \{}
\DoxyCodeLine{00613     \textcolor{keywordtype}{int} iId[2], jId[2];}
\DoxyCodeLine{00614     \textcolor{keywordtype}{double} iRatio, jRatio;}
\DoxyCodeLine{00615     iId[0] = int(i);}
\DoxyCodeLine{00616     iId[1] = (iId[0] < dimIris -\/ 1) ? iId[0] + 1 : iId[0];}
\DoxyCodeLine{00617     iRatio = i -\/ double(iId[0]);}
\DoxyCodeLine{00618     jId[0] = int(j);}
\DoxyCodeLine{00619     jId[1] = (jId[0] < dimIris -\/ 1) ? jId[0] + 1 : jId[0];}
\DoxyCodeLine{00620     jRatio = j -\/ double(jId[0]);}
\DoxyCodeLine{00621     \textcolor{keywordflow}{if} (iRatio == 0.0 \&\& jRatio == 0.0) \textcolor{keywordflow}{return} gp[jId[0] * dimIris + iId[0]];}
\DoxyCodeLine{00622 }
\DoxyCodeLine{00623     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetcg_1_1numeric__ops_a67ec0c3653cded4a00218678558477f5}{lerp}}(\mbox{\hyperlink{namespacetcg_1_1numeric__ops_a67ec0c3653cded4a00218678558477f5}{lerp}}(gp[jId[0] * dimIris + iId[0]],}
\DoxyCodeLine{00624                      gp[jId[0] * dimIris + iId[1]], iRatio),}
\DoxyCodeLine{00625                 \mbox{\hyperlink{namespacetcg_1_1numeric__ops_a67ec0c3653cded4a00218678558477f5}{lerp}}(gp[jId[1] * dimIris + iId[0]],}
\DoxyCodeLine{00626                      gp[jId[1] * dimIris + iId[1]], iRatio),}
\DoxyCodeLine{00627                 jRatio);}
\DoxyCodeLine{00628   \};}
\DoxyCodeLine{00629 }
\DoxyCodeLine{00630   \textcolor{keywordtype}{double} size         = m\_noise\_size-\/>getValue(frame);}
\DoxyCodeLine{00631   \textcolor{keywordtype}{double} evolution    = m\_noise\_evolution-\/>getValue(frame);}
\DoxyCodeLine{00632   \textcolor{keywordtype}{int} octave          = m\_noise\_octave-\/>getValue();}
\DoxyCodeLine{00633   \textcolor{keywordtype}{double} noiseFactor  = m\_noise\_factor-\/>getValue(frame);}
\DoxyCodeLine{00634   \textcolor{keywordtype}{double} offsetFactor = 0.005;}
\DoxyCodeLine{00635   \mbox{\hyperlink{class_t_point_t}{TPointD}} offset =}
\DoxyCodeLine{00636       \mbox{\hyperlink{class_t_scale}{TScale}}(offsetFactor) * affine * m\_noise\_offset-\/>getValue(frame);}
\DoxyCodeLine{00637   \textcolor{keywordtype}{double} theta = m\_rotation-\/>getValue(frame) * M\_PI\_180;}
\DoxyCodeLine{00638   \textcolor{keywordtype}{double} cos\_t = std::cos(theta);}
\DoxyCodeLine{00639   \textcolor{keywordtype}{double} sin\_t = std::sin(theta);}
\DoxyCodeLine{00640 }
\DoxyCodeLine{00641   QList<double> noise\_intensity;}
\DoxyCodeLine{00642   \textcolor{keywordtype}{double} intensity\_sum = 0.0;}
\DoxyCodeLine{00643   \textcolor{keywordtype}{double} tmp\_intensity = 1.0;}
\DoxyCodeLine{00644   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < octave; i++) \{}
\DoxyCodeLine{00645     noise\_intensity.append(tmp\_intensity);}
\DoxyCodeLine{00646     intensity\_sum += tmp\_intensity;}
\DoxyCodeLine{00647     tmp\_intensity *= 0.5;}
\DoxyCodeLine{00648   \}}
\DoxyCodeLine{00649   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{double}\& n\_i : noise\_intensity) n\_i /= intensity\_sum;}
\DoxyCodeLine{00650 }
\DoxyCodeLine{00651   \textcolor{comment}{// raster for storing the result}}
\DoxyCodeLine{00652   \textcolor{keywordtype}{double}* distortedPtn\_p;}
\DoxyCodeLine{00653   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} distortedPtn\_ras(dimIris * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}), dimIris);}
\DoxyCodeLine{00654   distortedPtn\_p = (\textcolor{keywordtype}{double}*)distortedPtn\_ras-\/>getRawData();}
\DoxyCodeLine{00655   distortedPtn\_ras-\/>lock();}
\DoxyCodeLine{00656 }
\DoxyCodeLine{00657   \textcolor{keywordtype}{double}* dist\_p = distortedPtn\_p;}
\DoxyCodeLine{00658   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < dimIris; j++) \{}
\DoxyCodeLine{00659     \textcolor{keywordtype}{double} v = double(j) -\/ double(dimIris) / 2.0;}
\DoxyCodeLine{00660     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dimIris; i++, dist\_p++) \{}
\DoxyCodeLine{00661       \textcolor{keywordtype}{double} u = double(i) -\/ double(dimIris) / 2.0;}
\DoxyCodeLine{00662 }
\DoxyCodeLine{00663       \textcolor{comment}{// obtain the noise coordinate}}
\DoxyCodeLine{00664       \mbox{\hyperlink{structdouble2}{double2}} noiseUV;}
\DoxyCodeLine{00665       \textcolor{keywordtype}{double} len             = std::sqrt(u * u + v * v) * size;}
\DoxyCodeLine{00666       noiseUV.x              = (len == 0.0) ? 0.0 : u / len;}
\DoxyCodeLine{00667       noiseUV.y              = (len == 0.0) ? 0.0 : v / len;}
\DoxyCodeLine{00668       \textcolor{keywordtype}{double} currentSize     = 1.0;}
\DoxyCodeLine{00669       \textcolor{keywordtype}{double} currentEvoScale = 1.0;}
\DoxyCodeLine{00670       \textcolor{keywordtype}{double} noiseVal        = 0.5;}
\DoxyCodeLine{00671       noiseUV.x += offset.x;}
\DoxyCodeLine{00672       noiseUV.y += offset.y;}
\DoxyCodeLine{00673       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} oct = 0; oct < octave; oct++) \{}
\DoxyCodeLine{00674         \mbox{\hyperlink{structdouble2}{double2}} currentNoiseUV = \{noiseUV.x / currentSize,}
\DoxyCodeLine{00675                                   noiseUV.y / currentSize\};}
\DoxyCodeLine{00676         noiseVal += noise\_intensity[oct] *}
\DoxyCodeLine{00677                     SimplexNoise::noise(currentNoiseUV.x, currentNoiseUV.y,}
\DoxyCodeLine{00678                                         evolution * currentEvoScale);}
\DoxyCodeLine{00679         currentSize *= 0.5;}
\DoxyCodeLine{00680         currentEvoScale *= 2.0;}
\DoxyCodeLine{00681       \}}
\DoxyCodeLine{00682 }
\DoxyCodeLine{00683       \textcolor{keywordtype}{double} scale = 1.0 / (1.0 + (noiseVal -\/ 1) * noiseFactor);}
\DoxyCodeLine{00684       \textcolor{keywordtype}{double} rot\_u = u * cos\_t -\/ v * sin\_t;}
\DoxyCodeLine{00685       \textcolor{keywordtype}{double} rot\_v = u * sin\_t + v * cos\_t;}
\DoxyCodeLine{00686 }
\DoxyCodeLine{00687       \textcolor{keywordtype}{double} distorted\_i = rot\_u * scale + double(dimIris) / 2.0;}
\DoxyCodeLine{00688       \textcolor{keywordtype}{double} distorted\_j = rot\_v * scale + double(dimIris) / 2.0;}
\DoxyCodeLine{00689 }
\DoxyCodeLine{00690       \textcolor{keywordflow}{if} (distorted\_i < 0.0 || distorted\_i >= \textcolor{keywordtype}{double}(dimIris -\/ 1) ||}
\DoxyCodeLine{00691           distorted\_j < 0.0 || distorted\_j >= \textcolor{keywordtype}{double}(dimIris -\/ 1))}
\DoxyCodeLine{00692         (*dist\_p) = 0.0;}
\DoxyCodeLine{00693       \textcolor{keywordflow}{else}}
\DoxyCodeLine{00694         (*dist\_p) = lerpGlarePtn(distorted\_i, distorted\_j, glare);}
\DoxyCodeLine{00695     \}}
\DoxyCodeLine{00696   \}}
\DoxyCodeLine{00697 }
\DoxyCodeLine{00698   dist\_p       = distortedPtn\_p;}
\DoxyCodeLine{00699   \textcolor{keywordtype}{double}* gl\_p = glare;}
\DoxyCodeLine{00700   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dimIris * dimIris; i++, dist\_p++, gl\_p++)}
\DoxyCodeLine{00701     (*gl\_p) = (*dist\_p);}
\DoxyCodeLine{00702 }
\DoxyCodeLine{00703   distortedPtn\_ras-\/>unlock();}
\DoxyCodeLine{00704 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_aadea55cad2bd4ab40adbed80d95fb786}\label{class_iwa___glare_fx_aadea55cad2bd4ab40adbed80d95fb786}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!doCompute@{doCompute}}
\index{doCompute@{doCompute}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{doCompute()}{doCompute()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Glare\+Fx\+::do\+Compute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_tile}{TTile}} \&}]{tile,  }\item[{double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{settings }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00273                                                              \{}
\DoxyCodeLine{00274   \textcolor{keywordtype}{int} irisMode = m\_irisMode-\/>getValue();}
\DoxyCodeLine{00275   \textcolor{comment}{// If the iris is not connected, then do nothing}}
\DoxyCodeLine{00276   \textcolor{keywordflow}{if} (irisMode == Iris\_InputImage \&\& !m\_iris.isConnected()) \{}
\DoxyCodeLine{00277     tile.getRaster()-\/>clear();}
\DoxyCodeLine{00278     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00279   \}}
\DoxyCodeLine{00280 }
\DoxyCodeLine{00281   \textcolor{keywordtype}{int} renderMode = m\_renderMode-\/>getValue();}
\DoxyCodeLine{00282   \textcolor{comment}{// If the source is not connected \& it is render mode, then do nothing.}}
\DoxyCodeLine{00283   \textcolor{keywordflow}{if} (!m\_source.isConnected() \&\& renderMode == RendeMode\_Render) \{}
\DoxyCodeLine{00284     tile.getRaster()-\/>clear();}
\DoxyCodeLine{00285     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00286   \}}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288   \textcolor{comment}{// Get the original size of Iris image}}
\DoxyCodeLine{00289   \mbox{\hyperlink{class_t_rect_t}{TRectD}} irisBBox;}
\DoxyCodeLine{00290   \mbox{\hyperlink{class_t_tile}{TTile}} irisTile;}
\DoxyCodeLine{00291   \mbox{\hyperlink{class_t_smart_pointer_t}{TRasterP}} irisRas;}
\DoxyCodeLine{00292   \textcolor{keywordtype}{double} size = getSizePixelAmount(m\_size-\/>getValue(frame), settings.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}});}
\DoxyCodeLine{00293   \textcolor{keywordflow}{if} (irisMode == Iris\_InputImage) \{}
\DoxyCodeLine{00294     m\_iris-\/>getBBox(frame, irisBBox, settings);}
\DoxyCodeLine{00295     \textcolor{comment}{// Compute the iris tile.}}
\DoxyCodeLine{00296     m\_iris-\/>allocateAndCompute(}
\DoxyCodeLine{00297         irisTile, irisBBox.getP00(),}
\DoxyCodeLine{00298         \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(irisBBox.getLx() + 0.5),}
\DoxyCodeLine{00299                    \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(irisBBox.getLy() + 0.5)),}
\DoxyCodeLine{00300         tile.getRaster(), frame, settings);}
\DoxyCodeLine{00301     irisRas = irisTile.getRaster();}
\DoxyCodeLine{00302   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00303     \textcolor{comment}{// obtain iris bbox based on the glare pattern size}}
\DoxyCodeLine{00304     \textcolor{keywordtype}{double} irisSize = size * m\_irisScale-\/>getValue(frame);}
\DoxyCodeLine{00305     irisBBox        = \mbox{\hyperlink{class_t_rect_t}{TRectD}}(-\/irisSize, -\/irisSize, irisSize, irisSize);}
\DoxyCodeLine{00306     \textcolor{keywordtype}{int} dimIrisRas  = int(std::ceil(irisSize) * 2.0);}
\DoxyCodeLine{00307     irisRas         = \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}(dimIrisRas, dimIrisRas);}
\DoxyCodeLine{00308     drawPresetIris(irisRas, irisSize, frame);}
\DoxyCodeLine{00309   \}}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311   \textcolor{keywordflow}{if} (renderMode == RenderMode\_Iris) \{}
\DoxyCodeLine{00312     \mbox{\hyperlink{class_t_translation}{TTranslation}} aff(}
\DoxyCodeLine{00313         (\textcolor{keywordtype}{double})(tile.getRaster()-\/>getLx() -\/ irisRas-\/>getLx()) * 0.5,}
\DoxyCodeLine{00314         (\textcolor{keywordtype}{double})(tile.getRaster()-\/>getLy() -\/ irisRas-\/>getLy()) * 0.5);}
\DoxyCodeLine{00315     \mbox{\hyperlink{namespace_t_rop_a1f6b04b4725e957a0d554e198e26a117}{TRop::quickPut}}(tile.getRaster(), irisRas, aff);}
\DoxyCodeLine{00316     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00317   \}}
\DoxyCodeLine{00318 }
\DoxyCodeLine{00319   \textcolor{keywordtype}{int} dimIris = int(std::ceil(size) * 2.0);}
\DoxyCodeLine{00320   dimIris     = kiss\_fft\_next\_fast\_size(dimIris);}
\DoxyCodeLine{00321   \textcolor{keywordflow}{while} ((tile.getRaster()-\/>getSize().lx -\/ dimIris) \% 2 != 0)}
\DoxyCodeLine{00322     dimIris = kiss\_fft\_next\_fast\_size(dimIris + 1);}
\DoxyCodeLine{00323   \textcolor{keywordtype}{double} irisResizeFactor = double(dimIris) * 0.5 / size;}
\DoxyCodeLine{00324 }
\DoxyCodeLine{00325   kiss\_fft\_cpx* kissfft\_comp\_iris;}
\DoxyCodeLine{00326   \textcolor{comment}{// create the iris data for FFT (in the same size as the source tile)}}
\DoxyCodeLine{00327   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} kissfft\_comp\_iris\_ras(dimIris * \textcolor{keyword}{sizeof}(kiss\_fft\_cpx), dimIris);}
\DoxyCodeLine{00328   kissfft\_comp\_iris\_ras-\/>lock();}
\DoxyCodeLine{00329   kissfft\_comp\_iris = (kiss\_fft\_cpx*)kissfft\_comp\_iris\_ras-\/>getRawData();}
\DoxyCodeLine{00330 }
\DoxyCodeLine{00331   \{}
\DoxyCodeLine{00332     \textcolor{comment}{// Create the Iris image for FFT}}
\DoxyCodeLine{00333     kiss\_fft\_cpx* kissfft\_comp\_iris\_before;}
\DoxyCodeLine{00334     \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} kissfft\_comp\_iris\_before\_ras(dimIris * \textcolor{keyword}{sizeof}(kiss\_fft\_cpx),}
\DoxyCodeLine{00335                                              dimIris);}
\DoxyCodeLine{00336     kissfft\_comp\_iris\_before\_ras-\/>lock();}
\DoxyCodeLine{00337     kissfft\_comp\_iris\_before =}
\DoxyCodeLine{00338         (kiss\_fft\_cpx*)kissfft\_comp\_iris\_before\_ras-\/>getRawData();}
\DoxyCodeLine{00339 }
\DoxyCodeLine{00340     convertIris(kissfft\_comp\_iris\_before, dimIris, irisBBox, irisRas);}
\DoxyCodeLine{00341 }
\DoxyCodeLine{00342     \textcolor{comment}{// Create the FFT plan for the iris image.}}
\DoxyCodeLine{00343     kiss\_fftnd\_cfg iris\_kissfft\_plan;}
\DoxyCodeLine{00344     \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{00345       \textcolor{keywordtype}{int} dims[2]       = \{dimIris, dimIris\};}
\DoxyCodeLine{00346       \textcolor{keywordtype}{int} ndims         = 2;}
\DoxyCodeLine{00347       iris\_kissfft\_plan = kiss\_fftnd\_alloc(dims, ndims, \textcolor{keyword}{false}, 0, 0);}
\DoxyCodeLine{00348       \textcolor{keywordflow}{if} (iris\_kissfft\_plan != NULL) \textcolor{keywordflow}{break};}
\DoxyCodeLine{00349     \}}
\DoxyCodeLine{00350     \textcolor{comment}{// Do FFT the iris image.}}
\DoxyCodeLine{00351     kiss\_fftnd(iris\_kissfft\_plan, kissfft\_comp\_iris\_before, kissfft\_comp\_iris);}
\DoxyCodeLine{00352     kiss\_fft\_free(iris\_kissfft\_plan);}
\DoxyCodeLine{00353     kissfft\_comp\_iris\_before\_ras-\/>unlock();}
\DoxyCodeLine{00354   \}}
\DoxyCodeLine{00355 }
\DoxyCodeLine{00356   \mbox{\hyperlink{structdouble3}{double3}}* glare\_pattern;}
\DoxyCodeLine{00357   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} glare\_pattern\_ras(dimIris * \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdouble3}{double3}}), dimIris);}
\DoxyCodeLine{00358   glare\_pattern = (\mbox{\hyperlink{structdouble3}{double3}}*)glare\_pattern\_ras-\/>getRawData();}
\DoxyCodeLine{00359   glare\_pattern\_ras-\/>lock();}
\DoxyCodeLine{00360   \textcolor{comment}{// Resize the power spectrum according to each wavelength and combine into the}}
\DoxyCodeLine{00361   \textcolor{comment}{// glare pattern}}
\DoxyCodeLine{00362   \textcolor{keywordtype}{double} intensity = m\_intensity-\/>getValue(frame);}
\DoxyCodeLine{00363   powerSpectrum2GlarePattern(frame, settings.\mbox{\hyperlink{class_t_render_settings_a1250181bf3fe8e05db005d5faa76b3ea}{m\_affine}}, kissfft\_comp\_iris,}
\DoxyCodeLine{00364                              glare\_pattern, dimIris, intensity,}
\DoxyCodeLine{00365                              irisResizeFactor);}
\DoxyCodeLine{00366 }
\DoxyCodeLine{00367   kissfft\_comp\_iris\_ras-\/>unlock();}
\DoxyCodeLine{00368 }
\DoxyCodeLine{00369   \textcolor{comment}{// clear the raster memory}}
\DoxyCodeLine{00370   tile.getRaster()-\/>clear();}
\DoxyCodeLine{00371   \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} ras32 = tile.getRaster();}
\DoxyCodeLine{00372   \mbox{\hyperlink{class_t_raster_p_t}{TRaster64P}} ras64 = tile.getRaster();}
\DoxyCodeLine{00373   \textcolor{keywordflow}{if} (ras32)}
\DoxyCodeLine{00374     ras32-\/>fill(TPixel32::Transparent);}
\DoxyCodeLine{00375   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ras64)}
\DoxyCodeLine{00376     ras64-\/>fill(TPixel64::Transparent);}
\DoxyCodeLine{00377 }
\DoxyCodeLine{00378   \textcolor{comment}{// filter preview mode}}
\DoxyCodeLine{00379   \textcolor{keywordflow}{if} (renderMode == RendeMode\_FilterPreview) \{}
\DoxyCodeLine{00380     \mbox{\hyperlink{structint2}{int2}} margin = \{(dimIris -\/ tile.getRaster()-\/>getSize().lx) / 2,}
\DoxyCodeLine{00381                    (dimIris -\/ tile.getRaster()-\/>getSize().ly) / 2\};}
\DoxyCodeLine{00382 }
\DoxyCodeLine{00383     \textcolor{keywordflow}{if} (ras32)}
\DoxyCodeLine{00384       setFilterPreviewToResult<TRaster32P, TPixel32>(ras32, glare\_pattern,}
\DoxyCodeLine{00385                                                      dimIris, margin);}
\DoxyCodeLine{00386     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ras64)}
\DoxyCodeLine{00387       setFilterPreviewToResult<TRaster64P, TPixel64>(ras64, glare\_pattern,}
\DoxyCodeLine{00388                                                      dimIris, margin);}
\DoxyCodeLine{00389 }
\DoxyCodeLine{00390     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00391   \}}
\DoxyCodeLine{00392 }
\DoxyCodeLine{00393   \textcolor{comment}{// render mode}}
\DoxyCodeLine{00394 }
\DoxyCodeLine{00395   \textcolor{comment}{// Range of computation}}
\DoxyCodeLine{00396   \mbox{\hyperlink{class_t_rect_t}{TRectD}} \_rectOut(tile.m\_pos, \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}}(tile.getRaster()-\/>getLx(),}
\DoxyCodeLine{00397                                           tile.getRaster()-\/>getLy()));}
\DoxyCodeLine{00398   \_rectOut = \_rectOut.enlarge(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(dimIris / 2));}
\DoxyCodeLine{00399 }
\DoxyCodeLine{00400   \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} dimOut(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_rectOut.getLx() + 0.5),}
\DoxyCodeLine{00401                      \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\_rectOut.getLy() + 0.5));}
\DoxyCodeLine{00402 }
\DoxyCodeLine{00403   \textcolor{comment}{// Enlarge the size to the "{}fast size"{} for kissfft which has no factors other}}
\DoxyCodeLine{00404   \textcolor{comment}{// than 2,3, or 5.}}
\DoxyCodeLine{00405   \textcolor{keywordflow}{if} (dimOut.lx < 10000 \&\& dimOut.ly < 10000) \{}
\DoxyCodeLine{00406     \textcolor{keywordtype}{int} new\_x = kiss\_fft\_next\_fast\_size(dimOut.lx);}
\DoxyCodeLine{00407     \textcolor{keywordtype}{int} new\_y = kiss\_fft\_next\_fast\_size(dimOut.ly);}
\DoxyCodeLine{00408     \textcolor{comment}{// margin should be integer}}
\DoxyCodeLine{00409     \textcolor{keywordflow}{while} ((new\_x -\/ dimOut.lx) \% 2 != 0)}
\DoxyCodeLine{00410       new\_x = kiss\_fft\_next\_fast\_size(new\_x + 1);}
\DoxyCodeLine{00411     \textcolor{keywordflow}{while} ((new\_y -\/ dimOut.ly) \% 2 != 0)}
\DoxyCodeLine{00412       new\_y = kiss\_fft\_next\_fast\_size(new\_y + 1);}
\DoxyCodeLine{00413 }
\DoxyCodeLine{00414     \_rectOut = \_rectOut.enlarge(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(new\_x -\/ dimOut.lx) / 2.0,}
\DoxyCodeLine{00415                                 \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(new\_y -\/ dimOut.ly) / 2.0);}
\DoxyCodeLine{00416 }
\DoxyCodeLine{00417     dimOut.lx = new\_x;}
\DoxyCodeLine{00418     dimOut.ly = new\_y;}
\DoxyCodeLine{00419   \}}
\DoxyCodeLine{00420 }
\DoxyCodeLine{00421   kiss\_fft\_cpx* kissfft\_comp\_tmp;}
\DoxyCodeLine{00422   kiss\_fft\_cpx* kissfft\_comp\_glare;}
\DoxyCodeLine{00423   kiss\_fft\_cpx* kissfft\_comp\_source;}
\DoxyCodeLine{00424   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} kissfft\_comp\_tmp\_ras(dimOut.lx * \textcolor{keyword}{sizeof}(kiss\_fft\_cpx), dimOut.ly);}
\DoxyCodeLine{00425   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} kissfft\_comp\_glare\_ras(dimOut.lx * \textcolor{keyword}{sizeof}(kiss\_fft\_cpx),}
\DoxyCodeLine{00426                                      dimOut.ly);}
\DoxyCodeLine{00427   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} kissfft\_comp\_source\_ras(dimOut.lx * \textcolor{keyword}{sizeof}(kiss\_fft\_cpx),}
\DoxyCodeLine{00428                                       dimOut.ly);}
\DoxyCodeLine{00429   kissfft\_comp\_tmp    = (kiss\_fft\_cpx*)kissfft\_comp\_tmp\_ras-\/>getRawData();}
\DoxyCodeLine{00430   kissfft\_comp\_glare  = (kiss\_fft\_cpx*)kissfft\_comp\_glare\_ras-\/>getRawData();}
\DoxyCodeLine{00431   kissfft\_comp\_source = (kiss\_fft\_cpx*)kissfft\_comp\_source\_ras-\/>getRawData();}
\DoxyCodeLine{00432   kissfft\_comp\_tmp\_ras-\/>lock();}
\DoxyCodeLine{00433   kissfft\_comp\_glare\_ras-\/>lock();}
\DoxyCodeLine{00434   kissfft\_comp\_source\_ras-\/>lock();}
\DoxyCodeLine{00435 }
\DoxyCodeLine{00436   \textcolor{keywordtype}{int} dims[2]              = \{dimOut.ly, dimOut.lx\};}
\DoxyCodeLine{00437   \textcolor{keywordtype}{int} ndims                = 2;}
\DoxyCodeLine{00438   kiss\_fftnd\_cfg plan\_fwd  = kiss\_fftnd\_alloc(dims, ndims, \textcolor{keyword}{false}, 0, 0);}
\DoxyCodeLine{00439   kiss\_fftnd\_cfg plan\_bkwd = kiss\_fftnd\_alloc(dims, ndims, \textcolor{keyword}{true}, 0, 0);}
\DoxyCodeLine{00440 }
\DoxyCodeLine{00441   \textcolor{comment}{// store the source image to tmp}}
\DoxyCodeLine{00442   \{}
\DoxyCodeLine{00443     \textcolor{comment}{// obtain the source tile}}
\DoxyCodeLine{00444     \mbox{\hyperlink{class_t_tile}{TTile}} sourceTile;}
\DoxyCodeLine{00445     m\_source-\/>allocateAndCompute(sourceTile, \_rectOut.getP00(), dimOut,}
\DoxyCodeLine{00446                                  tile.getRaster(), frame, settings);}
\DoxyCodeLine{00447 }
\DoxyCodeLine{00448     \textcolor{keywordflow}{if} (ras32)}
\DoxyCodeLine{00449       setSourceTileToBuffer<TRaster32P, TPixel32>(sourceTile.getRaster(),}
\DoxyCodeLine{00450                                                   kissfft\_comp\_tmp);}
\DoxyCodeLine{00451     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ras64)}
\DoxyCodeLine{00452       setSourceTileToBuffer<TRaster64P, TPixel64>(sourceTile.getRaster(),}
\DoxyCodeLine{00453                                                   kissfft\_comp\_tmp);}
\DoxyCodeLine{00454   \}}
\DoxyCodeLine{00455   \textcolor{comment}{// FFT the source}}
\DoxyCodeLine{00456   kiss\_fftnd(plan\_fwd, kissfft\_comp\_tmp, kissfft\_comp\_source);}
\DoxyCodeLine{00457 }
\DoxyCodeLine{00458   \textcolor{comment}{// compute for each rgb channels}}
\DoxyCodeLine{00459   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} ch = 0; ch < 3; ch++) \{}
\DoxyCodeLine{00460     kissfft\_comp\_tmp\_ras-\/>clear();}
\DoxyCodeLine{00461     \textcolor{comment}{// store the glare pattern to tmp}}
\DoxyCodeLine{00462     setGlarePatternToBuffer(glare\_pattern, kissfft\_comp\_tmp, ch, dimIris,}
\DoxyCodeLine{00463                             dimOut);}
\DoxyCodeLine{00464 }
\DoxyCodeLine{00465     \textcolor{comment}{// FFT the glare pattern}}
\DoxyCodeLine{00466     kiss\_fftnd(plan\_fwd, kissfft\_comp\_tmp, kissfft\_comp\_glare);}
\DoxyCodeLine{00467 }
\DoxyCodeLine{00468     \textcolor{comment}{// multiply the glare and the source}}
\DoxyCodeLine{00469     multiplyFilter(kissfft\_comp\_glare, kissfft\_comp\_source,}
\DoxyCodeLine{00470                    dimOut.lx * dimOut.ly);}
\DoxyCodeLine{00471 }
\DoxyCodeLine{00472     \textcolor{comment}{// Backward-\/FFT the glare pattern to tmp}}
\DoxyCodeLine{00473     kiss\_fftnd(plan\_bkwd, kissfft\_comp\_glare,}
\DoxyCodeLine{00474                kissfft\_comp\_tmp);  \textcolor{comment}{// Backward FFT}}
\DoxyCodeLine{00475 }
\DoxyCodeLine{00476     \textcolor{comment}{// convert tmp to channel values, store it into the tile}}
\DoxyCodeLine{00477     \textcolor{keywordflow}{if} (ras32)}
\DoxyCodeLine{00478       setChannelToResult<TRaster32P, TPixel32>(ras32, kissfft\_comp\_tmp, ch,}
\DoxyCodeLine{00479                                                dimOut);}
\DoxyCodeLine{00480     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ras64)}
\DoxyCodeLine{00481       setChannelToResult<TRaster64P, TPixel64>(ras64, kissfft\_comp\_tmp, ch,}
\DoxyCodeLine{00482                                                dimOut);}
\DoxyCodeLine{00483   \}}
\DoxyCodeLine{00484 }
\DoxyCodeLine{00485   kiss\_fft\_free(plan\_fwd);}
\DoxyCodeLine{00486   kiss\_fft\_free(plan\_bkwd);}
\DoxyCodeLine{00487 }
\DoxyCodeLine{00488   kissfft\_comp\_source\_ras-\/>unlock();}
\DoxyCodeLine{00489   kissfft\_comp\_glare\_ras-\/>unlock();}
\DoxyCodeLine{00490 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_ae890a10afd101e5ae5809d7cf41180a3}\label{class_iwa___glare_fx_ae890a10afd101e5ae5809d7cf41180a3}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!doGetBBox@{doGetBBox}}
\index{doGetBBox@{doGetBBox}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{doGetBBox()}{doGetBBox()}}
{\footnotesize\ttfamily bool Iwa\+\_\+\+Glare\+Fx\+::do\+Get\+BBox (\begin{DoxyParamCaption}\item[{double}]{frame,  }\item[{\mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{b\+Box,  }\item[{const \mbox{\hyperlink{class_t_render_settings}{TRender\+Settings}} \&}]{info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_raster_fx}{TRaster\+Fx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00828                                                          \{}
\DoxyCodeLine{00829   bBox = TConsts::infiniteRectD;}
\DoxyCodeLine{00830   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00831 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_a9f79b86c9d756436af510e4c35b446ae}\label{class_iwa___glare_fx_a9f79b86c9d756436af510e4c35b446ae}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!drawPresetIris@{drawPresetIris}}
\index{drawPresetIris@{drawPresetIris}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{drawPresetIris()}{drawPresetIris()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Glare\+Fx\+::draw\+Preset\+Iris (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}}}]{iris\+Ras,  }\item[{double}]{iris\+Size,  }\item[{const double}]{frame }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00138                                                      \{}
\DoxyCodeLine{00139   QImage img(irisRas-\/>getLx(), irisRas-\/>getLy(),}
\DoxyCodeLine{00140              QImage::Format\_ARGB32\_Premultiplied);}
\DoxyCodeLine{00141   img.fill(Qt::black);}
\DoxyCodeLine{00142   QPainter painter(\&img);}
\DoxyCodeLine{00143   painter.setRenderHint(QPainter::Antialiasing, \textcolor{keyword}{true});}
\DoxyCodeLine{00144   painter.translate(}
\DoxyCodeLine{00145       QPointF((\textcolor{keywordtype}{float})irisRas-\/>getLx() / 2.0, (\textcolor{keywordtype}{float})irisRas-\/>getLy() / 2.0));}
\DoxyCodeLine{00146   painter.scale(irisSize, irisSize);}
\DoxyCodeLine{00147   \textcolor{comment}{// shrink a bit}}
\DoxyCodeLine{00148   painter.scale(0.9, 0.9);}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150   QPen pen(Qt::white);}
\DoxyCodeLine{00151   \textcolor{keywordtype}{double} lineWidthRatio;}
\DoxyCodeLine{00152   \textcolor{keywordtype}{int} appearance = m\_irisAppearance-\/>getValue();}
\DoxyCodeLine{00153   \textcolor{keywordflow}{if} (appearance == Appearance\_Fill) \{}
\DoxyCodeLine{00154     painter.setPen(Qt::NoPen);}
\DoxyCodeLine{00155     painter.setBrush(Qt::white);}
\DoxyCodeLine{00156   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00157     assert(appearance >= 0 \&\& appearance <= 2);}
\DoxyCodeLine{00158     pen.setCapStyle(Qt::RoundCap);}
\DoxyCodeLine{00159     pen.setJoinStyle(Qt::MiterJoin);}
\DoxyCodeLine{00160     \textcolor{keywordtype}{double} ratio[3] = \{0.05, 0.1, 0.2\};}
\DoxyCodeLine{00161     lineWidthRatio  = ratio[appearance];}
\DoxyCodeLine{00162     pen.setWidthF(lineWidthRatio);}
\DoxyCodeLine{00163     painter.setPen(pen);}
\DoxyCodeLine{00164     painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00165   \}}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167   \textcolor{keywordtype}{double} symmetry = m\_irisSymmetry-\/>getValue(frame);}
\DoxyCodeLine{00168 }
\DoxyCodeLine{00169   \textcolor{keywordflow}{switch} (m\_irisMode-\/>getValue()) \{}
\DoxyCodeLine{00170   \textcolor{keywordflow}{case} Iris\_Square:}
\DoxyCodeLine{00171     painter.scale(1.0, symmetry);}
\DoxyCodeLine{00172     painter.drawRect(QRectF(-\/1.0, -\/1.0, 2.0, 2.0));}
\DoxyCodeLine{00173     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00174   \textcolor{keywordflow}{case} Iris\_Hexagon: \{}
\DoxyCodeLine{00175     QPointF p(1.0 -\/ 0.5 * symmetry, symmetry * std::sqrt(3) * 0.5);}
\DoxyCodeLine{00176     \textcolor{keyword}{const} QPointF points[6] = \{-\/p, QPointF(-\/1.0, 0.0), QPointF(-\/p.x(), p.y()),}
\DoxyCodeLine{00177                                p,  QPointF(1.0, 0.0),  QPointF(p.x(), -\/p.y())\};}
\DoxyCodeLine{00178     \textcolor{keywordflow}{if} (appearance != Appearance\_Fill) \{}
\DoxyCodeLine{00179       \textcolor{keywordflow}{if} (symmetry < 1.0) \{}
\DoxyCodeLine{00180         painter.drawPolyline(points, 3);}
\DoxyCodeLine{00181         painter.drawPolyline(\&points[3], 3);}
\DoxyCodeLine{00182       \}}
\DoxyCodeLine{00183       pen.setWidthF(lineWidthRatio * symmetry);}
\DoxyCodeLine{00184       painter.setPen(pen);}
\DoxyCodeLine{00185     \}}
\DoxyCodeLine{00186     painter.drawPolygon(points, 6);}
\DoxyCodeLine{00187     \textcolor{keywordflow}{if} (appearance != Appearance\_Fill \&\& symmetry < 1.0) \{}
\DoxyCodeLine{00188       pen.setColor(Qt::black);}
\DoxyCodeLine{00189       painter.setPen(pen);}
\DoxyCodeLine{00190       painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00191       painter.drawRect(}
\DoxyCodeLine{00192           QRectF(-\/1.2, -\/p.y() -\/ symmetry, 2.4, (p.y() + symmetry) * 2.0));}
\DoxyCodeLine{00193     \}}
\DoxyCodeLine{00194   \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{00195   \textcolor{keywordflow}{case} Iris\_Octagon: \{}
\DoxyCodeLine{00196     \textcolor{keywordtype}{double} u = (2 + std::sqrt(2) * (1 -\/ symmetry)) / (2 * std::sqrt(2) + 2);}
\DoxyCodeLine{00197     \textcolor{keywordtype}{double} v = (2 + std::sqrt(2) * (1 + symmetry)) / (2 * std::sqrt(2) + 2);}
\DoxyCodeLine{00198     \textcolor{keyword}{const} QPointF points[8] = \{QPointF(u, v),  QPointF(v, u),   QPointF(v, -\/u),}
\DoxyCodeLine{00199                                QPointF(u, -\/v), QPointF(-\/u, -\/v), QPointF(-\/v, -\/u),}
\DoxyCodeLine{00200                                QPointF(-\/v, u), QPointF(-\/u, v)\};}
\DoxyCodeLine{00201     \textcolor{keywordflow}{if} (appearance != Appearance\_Fill) \{}
\DoxyCodeLine{00202       \textcolor{keywordflow}{if} (symmetry < 1.0) \{}
\DoxyCodeLine{00203         painter.drawLine(points[0], points[1]);}
\DoxyCodeLine{00204         painter.drawLine(points[2], points[3]);}
\DoxyCodeLine{00205         painter.drawLine(points[4], points[5]);}
\DoxyCodeLine{00206         painter.drawLine(points[6], points[7]);}
\DoxyCodeLine{00207       \}}
\DoxyCodeLine{00208       pen.setWidthF(lineWidthRatio * symmetry);}
\DoxyCodeLine{00209       painter.setPen(pen);}
\DoxyCodeLine{00210     \}}
\DoxyCodeLine{00211     painter.drawPolygon(points, 8);}
\DoxyCodeLine{00212     \textcolor{keywordflow}{if} (appearance != Appearance\_Fill \&\& symmetry < 1.0) \{}
\DoxyCodeLine{00213       pen.setColor(Qt::black);}
\DoxyCodeLine{00214       painter.setPen(pen);}
\DoxyCodeLine{00215       painter.setBrush(Qt::NoBrush);}
\DoxyCodeLine{00216       painter.drawRect(QRectF(-\/v -\/ symmetry, -\/v -\/ symmetry,}
\DoxyCodeLine{00217                               (v + symmetry) * 2.0, (v + symmetry) * 2.0));}
\DoxyCodeLine{00218     \}}
\DoxyCodeLine{00219   \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{00220   \textcolor{keywordflow}{case} Iris\_GearShape: \{}
\DoxyCodeLine{00221     \textcolor{keywordtype}{int} edgeCount   = (int)std::round(m\_irisGearEdgeCount-\/>getValue(frame));}
\DoxyCodeLine{00222     QPointF* points = \textcolor{keyword}{new} QPointF[edgeCount * 2];}
\DoxyCodeLine{00223     QList<double> thickness;}
\DoxyCodeLine{00224     \textcolor{keywordtype}{double} angleUnit = M\_PI / (double)edgeCount;}
\DoxyCodeLine{00225     std::mt19937\_64 mt;}
\DoxyCodeLine{00226     mt.seed(m\_irisRandomSeed-\/>getValue());}
\DoxyCodeLine{00227     std::uniform\_real\_distribution<> random\_plusminus1(-\/1.0, 1.0);}
\DoxyCodeLine{00228     std::uniform\_real\_distribution<> random\_thickness(symmetry * lineWidthRatio,}
\DoxyCodeLine{00229                                                       lineWidthRatio);}
\DoxyCodeLine{00230     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} e = 0; e < edgeCount; e++) \{}
\DoxyCodeLine{00231       \textcolor{keywordtype}{double} baseAngle = angleUnit * e * 2.0;}
\DoxyCodeLine{00232       \textcolor{keywordtype}{double} theta =}
\DoxyCodeLine{00233           baseAngle + random\_plusminus1(mt) * angleUnit * (1.0 -\/ symmetry);}
\DoxyCodeLine{00234       points[e * 2] = QPointF(std::cos(theta), std::sin(theta));}
\DoxyCodeLine{00235       thickness.append(random\_thickness(mt));}
\DoxyCodeLine{00236       baseAngle += angleUnit;}
\DoxyCodeLine{00237       theta = baseAngle + random\_plusminus1(mt) * angleUnit * (1.0 -\/ symmetry);}
\DoxyCodeLine{00238       points[e * 2 + 1] = QPointF(0.5 * std::cos(theta), 0.5 * std::sin(theta));}
\DoxyCodeLine{00239       thickness.append(random\_thickness(mt));}
\DoxyCodeLine{00240     \}}
\DoxyCodeLine{00241 }
\DoxyCodeLine{00242     \textcolor{keywordflow}{if} (appearance != Appearance\_Fill) \{}
\DoxyCodeLine{00243       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} v = 0; v < edgeCount * 2; v++) \{}
\DoxyCodeLine{00244         \textcolor{keywordtype}{int} next\_v = (v == edgeCount * 2 -\/ 1) ? 0 : v + 1;}
\DoxyCodeLine{00245         pen.setWidthF(thickness.at(v));}
\DoxyCodeLine{00246         painter.setPen(pen);}
\DoxyCodeLine{00247         painter.drawLine(points[v], points[next\_v]);}
\DoxyCodeLine{00248       \}}
\DoxyCodeLine{00249     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00250       painter.drawPolygon(points, edgeCount * 2);}
\DoxyCodeLine{00251     \}}
\DoxyCodeLine{00252     \textcolor{keyword}{delete}[] points;}
\DoxyCodeLine{00253   \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{00254   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00255     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00256   \}}
\DoxyCodeLine{00257 }
\DoxyCodeLine{00258   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < img.height(); j++) \{}
\DoxyCodeLine{00259     TPixel32* pix = irisRas-\/>pixels(j);}
\DoxyCodeLine{00260     QRgb* img\_p   = (QRgb*)img.scanLine(img.height() -\/ j -\/ 1);}
\DoxyCodeLine{00261     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < img.width(); i++, img\_p++, pix++) \{}
\DoxyCodeLine{00262       pix-\/>r = (\textcolor{keywordtype}{unsigned} char)(qRed(*img\_p));}
\DoxyCodeLine{00263       pix-\/>g = (\textcolor{keywordtype}{unsigned} char)(qGreen(*img\_p));}
\DoxyCodeLine{00264       pix-\/>b = (\textcolor{keywordtype}{unsigned} char)(qBlue(*img\_p));}
\DoxyCodeLine{00265       pix-\/>m = (\textcolor{keywordtype}{unsigned} char)(qAlpha(*img\_p));}
\DoxyCodeLine{00266     \}}
\DoxyCodeLine{00267   \}}
\DoxyCodeLine{00268 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_aa93e6a753b40f596949bdb5b899f8615}\label{class_iwa___glare_fx_aa93e6a753b40f596949bdb5b899f8615}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!getParamUIs@{getParamUIs}}
\index{getParamUIs@{getParamUIs}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{getParamUIs()}{getParamUIs()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Glare\+Fx\+::get\+Param\+UIs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_param_u_i_concept}{TParam\+UIConcept}} $\ast$\&}]{params,  }\item[{int \&}]{length }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Returns a list of User Interface Concepts to be displayed when editing the fx parameters. \begin{DoxyNote}{Note}
Ownership of the returned array allocated with new\mbox{[}\mbox{]} is passed to callers. 
\end{DoxyNote}


Reimplemented from \mbox{\hyperlink{class_t_fx_a18766b107b77772d67c5678e7d832b18}{TFx}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00906                                                                      \{}
\DoxyCodeLine{00907   concepts = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_param_u_i_concept}{TParamUIConcept}}[length = 2];}
\DoxyCodeLine{00908 }
\DoxyCodeLine{00909   concepts[0].\mbox{\hyperlink{class_t_param_u_i_concept_a2dbb7c954ca5f2441a6931945cf004a5}{m\_type}}  = TParamUIConcept::RADIUS;}
\DoxyCodeLine{00910   concepts[0].m\_label = \textcolor{stringliteral}{"{}Size"{}};}
\DoxyCodeLine{00911   concepts[0].m\_params.push\_back(m\_size);}
\DoxyCodeLine{00912 }
\DoxyCodeLine{00913   concepts[1].m\_type  = TParamUIConcept::POINT;}
\DoxyCodeLine{00914   concepts[1].m\_label = \textcolor{stringliteral}{"{}Noise Offset"{}};}
\DoxyCodeLine{00915   concepts[1].m\_params.push\_back(m\_noise\_offset);}
\DoxyCodeLine{00916 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00078}{TParam\+UIConcept\+::m\+\_\+label}}, \mbox{\hyperlink{l00079}{TParam\+UIConcept\+::m\+\_\+params}}, and \mbox{\hyperlink{l00077}{TParam\+UIConcept\+::m\+\_\+type}}.

\mbox{\Hypertarget{class_iwa___glare_fx_a178199a689ba1b39c456287b4f67e00f}\label{class_iwa___glare_fx_a178199a689ba1b39c456287b4f67e00f}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!getSizePixelAmount@{getSizePixelAmount}}
\index{getSizePixelAmount@{getSizePixelAmount}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{getSizePixelAmount()}{getSizePixelAmount()}}
{\footnotesize\ttfamily double Iwa\+\_\+\+Glare\+Fx\+::get\+Size\+Pixel\+Amount (\begin{DoxyParamCaption}\item[{const double}]{val,  }\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}}}]{affine }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00120                                                                              \{}
\DoxyCodeLine{00121   \textcolor{comment}{/*-\/-\/-\/ Convert to vector -\/-\/-\/ */}}
\DoxyCodeLine{00122   \mbox{\hyperlink{class_t_point_t}{TPointD}} vect;}
\DoxyCodeLine{00123   vect.x = val;}
\DoxyCodeLine{00124   vect.y = 0.0;}
\DoxyCodeLine{00125   \textcolor{comment}{/*-\/-\/-\/ Apply geometrical transformation -\/-\/-\/*/}}
\DoxyCodeLine{00126   \textcolor{comment}{// For the following lines I referred to lines 586-\/592 of}}
\DoxyCodeLine{00127   \textcolor{comment}{// sources/stdfx/motionblurfx.cpp}}
\DoxyCodeLine{00128   \mbox{\hyperlink{class_t_affine}{TAffine}} aff(affine);}
\DoxyCodeLine{00129   aff.a13 = aff.a23 = 0; \textcolor{comment}{/* ignore translation */}}
\DoxyCodeLine{00130   vect              = aff * vect;}
\DoxyCodeLine{00131   \textcolor{comment}{/*-\/-\/-\/ return the length of the vector -\/-\/-\/*/}}
\DoxyCodeLine{00132   \textcolor{keywordflow}{return} sqrt(vect.x * vect.x + vect.y * vect.y);}
\DoxyCodeLine{00133 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_a19fb467be1a18eb89de613d8cec5a5bc}\label{class_iwa___glare_fx_a19fb467be1a18eb89de613d8cec5a5bc}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!multiplyFilter@{multiplyFilter}}
\index{multiplyFilter@{multiplyFilter}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{multiplyFilter()}{multiplyFilter()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Glare\+Fx\+::multiply\+Filter (\begin{DoxyParamCaption}\item[{kiss\+\_\+fft\+\_\+cpx $\ast$}]{glare,  }\item[{const kiss\+\_\+fft\+\_\+cpx $\ast$}]{source,  }\item[{const int}]{count }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00780                                                                               \{}
\DoxyCodeLine{00781   kiss\_fft\_cpx* g\_p       = glare;}
\DoxyCodeLine{00782   \textcolor{keyword}{const} kiss\_fft\_cpx* s\_p = source;}
\DoxyCodeLine{00783   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < count; i++, g\_p++, s\_p++) \{}
\DoxyCodeLine{00784     \textcolor{keywordtype}{double} re = (*g\_p).r * (*s\_p).r -\/ (*g\_p).i * (*s\_p).i;}
\DoxyCodeLine{00785     \textcolor{keywordtype}{double} im = (*g\_p).r * (*s\_p).i + (*s\_p).r * (*g\_p).i;}
\DoxyCodeLine{00786     (*g\_p).r  = re;}
\DoxyCodeLine{00787     (*g\_p).i  = im;}
\DoxyCodeLine{00788   \}}
\DoxyCodeLine{00789 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_aa802bf5581e655706a6620df752eaf6e}\label{class_iwa___glare_fx_aa802bf5581e655706a6620df752eaf6e}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!powerSpectrum2GlarePattern@{powerSpectrum2GlarePattern}}
\index{powerSpectrum2GlarePattern@{powerSpectrum2GlarePattern}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{powerSpectrum2GlarePattern()}{powerSpectrum2GlarePattern()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Glare\+Fx\+::power\+Spectrum2\+Glare\+Pattern (\begin{DoxyParamCaption}\item[{const double}]{frame,  }\item[{const \mbox{\hyperlink{class_t_affine}{TAffine}}}]{affine,  }\item[{kiss\+\_\+fft\+\_\+cpx $\ast$}]{spectrum,  }\item[{\mbox{\hyperlink{structdouble3}{double3}} $\ast$}]{glare,  }\item[{int}]{dim\+Iris,  }\item[{double}]{intensity,  }\item[{double}]{iris\+Resize\+Factor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00496                                                                             \{}
\DoxyCodeLine{00497   \textcolor{keyword}{auto} \mbox{\hyperlink{namespacetcg_1_1numeric__ops_a67ec0c3653cded4a00218678558477f5}{lerp}} = [](\textcolor{keywordtype}{double} val1, \textcolor{keywordtype}{double} val2, \textcolor{keywordtype}{double} ratio) \{}
\DoxyCodeLine{00498     \textcolor{keywordflow}{return} val1 * (1.0 -\/ ratio) + val2 * ratio;}
\DoxyCodeLine{00499   \};}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501   \textcolor{keyword}{auto} lerpGlarePtn = [\&](\textcolor{keywordtype}{double} i, \textcolor{keywordtype}{double} j, \textcolor{keywordtype}{double}* gp) \{}
\DoxyCodeLine{00502     \textcolor{keywordtype}{int} iId[2], jId[2];}
\DoxyCodeLine{00503     \textcolor{keywordtype}{double} iRatio, jRatio;}
\DoxyCodeLine{00504     iId[0] = int(i);}
\DoxyCodeLine{00505     iId[1] = (iId[0] < dimIris -\/ 1) ? iId[0] + 1 : iId[0];}
\DoxyCodeLine{00506     iRatio = i -\/ double(iId[0]);}
\DoxyCodeLine{00507     jId[0] = int(j);}
\DoxyCodeLine{00508     jId[1] = (jId[0] < dimIris -\/ 1) ? jId[0] + 1 : jId[0];}
\DoxyCodeLine{00509     jRatio = j -\/ double(jId[0]);}
\DoxyCodeLine{00510     \textcolor{keywordflow}{if} (iRatio == 0.0 \&\& jRatio == 0.0) \textcolor{keywordflow}{return} gp[jId[0] * dimIris + iId[0]];}
\DoxyCodeLine{00511 }
\DoxyCodeLine{00512     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacetcg_1_1numeric__ops_a67ec0c3653cded4a00218678558477f5}{lerp}}(\mbox{\hyperlink{namespacetcg_1_1numeric__ops_a67ec0c3653cded4a00218678558477f5}{lerp}}(gp[jId[0] * dimIris + iId[0]],}
\DoxyCodeLine{00513                      gp[jId[0] * dimIris + iId[1]], iRatio),}
\DoxyCodeLine{00514                 \mbox{\hyperlink{namespacetcg_1_1numeric__ops_a67ec0c3653cded4a00218678558477f5}{lerp}}(gp[jId[1] * dimIris + iId[0]],}
\DoxyCodeLine{00515                      gp[jId[1] * dimIris + iId[1]], iRatio),}
\DoxyCodeLine{00516                 jRatio);}
\DoxyCodeLine{00517   \};}
\DoxyCodeLine{00518 }
\DoxyCodeLine{00519   \textcolor{keywordtype}{double} factor =}
\DoxyCodeLine{00520       (m\_renderMode-\/>getValue() == RendeMode\_FilterPreview) ? -\/5 : -\/11;}
\DoxyCodeLine{00521 }
\DoxyCodeLine{00522   \textcolor{keywordtype}{double}* glarePattern\_p;}
\DoxyCodeLine{00523   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} glarePattern\_ras(dimIris * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{double}), dimIris);}
\DoxyCodeLine{00524   glarePattern\_p = (\textcolor{keywordtype}{double}*)glarePattern\_ras-\/>getRawData();}
\DoxyCodeLine{00525   glarePattern\_ras-\/>lock();}
\DoxyCodeLine{00526   \textcolor{keywordtype}{double}* g\_p = glarePattern\_p;}
\DoxyCodeLine{00527   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < dimIris; j++) \{}
\DoxyCodeLine{00528     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dimIris; i++, g\_p++) \{}
\DoxyCodeLine{00529       kiss\_fft\_cpx sp\_p = spectrum[getCoord(i, j, dimIris, dimIris)];}
\DoxyCodeLine{00530       (*g\_p)            = sqrt(sp\_p.r * sp\_p.r + sp\_p.i * sp\_p.i) *}
\DoxyCodeLine{00531                std::exp(intensity + factor);}
\DoxyCodeLine{00532     \}}
\DoxyCodeLine{00533   \}}
\DoxyCodeLine{00534 }
\DoxyCodeLine{00535   \textcolor{comment}{// distort the pattern with noise here}}
\DoxyCodeLine{00536   \textcolor{keywordtype}{double} noise\_factor = m\_noise\_factor-\/>getValue(frame);}
\DoxyCodeLine{00537   \textcolor{keywordtype}{double} rotation     = m\_rotation-\/>getValue(frame);}
\DoxyCodeLine{00538   \textcolor{keywordflow}{if} (noise\_factor > 0.0 || m\_rotation != 0.0) \{}
\DoxyCodeLine{00539     distortGlarePattern(frame, affine, glarePattern\_p, dimIris);}
\DoxyCodeLine{00540   \}}
\DoxyCodeLine{00541 }
\DoxyCodeLine{00542   \mbox{\hyperlink{structdouble3}{double3}}* glare\_xyz;}
\DoxyCodeLine{00543   \mbox{\hyperlink{class_t_raster_p_t}{TRasterGR8P}} glare\_xyz\_ras(dimIris * \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdouble3}{double3}}), dimIris);}
\DoxyCodeLine{00544   glare\_xyz\_ras-\/>lock();}
\DoxyCodeLine{00545   glare\_xyz = (\mbox{\hyperlink{structdouble3}{double3}}*)glare\_xyz\_ras-\/>getRawData();}
\DoxyCodeLine{00546   glare\_xyz\_ras-\/>clear();}
\DoxyCodeLine{00547 }
\DoxyCodeLine{00548   \textcolor{keywordtype}{double} irisRadius = double(dimIris / 2);}
\DoxyCodeLine{00549   \textcolor{keywordtype}{double} aberration = m\_aberration-\/>getValue(frame);}
\DoxyCodeLine{00550 }
\DoxyCodeLine{00551   \textcolor{comment}{// old version had summed each wavelength constantly.}}
\DoxyCodeLine{00552   \textcolor{comment}{// it was not physically-\/collect but keep it in order to maintain backward}}
\DoxyCodeLine{00553   \textcolor{comment}{// compatibility.}}
\DoxyCodeLine{00554   \textcolor{keywordtype}{bool} isOldVersion = getFxVersion() < 2;}
\DoxyCodeLine{00555 }
\DoxyCodeLine{00556   \textcolor{comment}{// accumurate xyz values for each optical wavelength}}
\DoxyCodeLine{00557   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} ram = 0; ram < 34; ram++) \{}
\DoxyCodeLine{00558     \textcolor{keywordtype}{double} rambda = 0.38 + 0.01 * (double)ram;}
\DoxyCodeLine{00559     \textcolor{comment}{// double scale = 0.55 / rambda;}}
\DoxyCodeLine{00560     \textcolor{keywordtype}{double} scale = std::pow(0.55 / rambda, aberration);}
\DoxyCodeLine{00561     \textcolor{keywordtype}{double} intensity\_scale =}
\DoxyCodeLine{00562         (isOldVersion) ? 1.0 : std::pow(0.55 / rambda, 2.0 * aberration);}
\DoxyCodeLine{00563     scale *= irisResizeFactor;}
\DoxyCodeLine{00564     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < dimIris; j++) \{}
\DoxyCodeLine{00565       \textcolor{keywordtype}{double} j\_scaled = (double(j) -\/ irisRadius) * scale + irisRadius;}
\DoxyCodeLine{00566       \textcolor{keywordflow}{if} (j\_scaled < 0)}
\DoxyCodeLine{00567         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00568       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j\_scaled > \textcolor{keywordtype}{double}(dimIris -\/ 1))}
\DoxyCodeLine{00569         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00570 }
\DoxyCodeLine{00571       \mbox{\hyperlink{structdouble3}{double3}}* g\_xyz\_p = \&glare\_xyz[j * dimIris];}
\DoxyCodeLine{00572       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dimIris; i++, g\_xyz\_p++) \{}
\DoxyCodeLine{00573         \textcolor{keywordtype}{double} i\_scaled = (double(i) -\/ irisRadius) * scale + irisRadius;}
\DoxyCodeLine{00574         \textcolor{keywordflow}{if} (i\_scaled < 0)}
\DoxyCodeLine{00575           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00576         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (i\_scaled > \textcolor{keywordtype}{double}(dimIris -\/ 1))}
\DoxyCodeLine{00577           \textcolor{keywordflow}{break};}
\DoxyCodeLine{00578 }
\DoxyCodeLine{00579         \textcolor{keywordtype}{double} gl =}
\DoxyCodeLine{00580             lerpGlarePtn(i\_scaled, j\_scaled, glarePattern\_p) * intensity\_scale;}
\DoxyCodeLine{00581         g\_xyz\_p-\/>x += gl * cie\_d65[ram] * xyz[ram * 3 + 0];}
\DoxyCodeLine{00582         g\_xyz\_p-\/>y += gl * cie\_d65[ram] * xyz[ram * 3 + 1];}
\DoxyCodeLine{00583         g\_xyz\_p-\/>z += gl * cie\_d65[ram] * xyz[ram * 3 + 2];}
\DoxyCodeLine{00584       \}}
\DoxyCodeLine{00585     \}}
\DoxyCodeLine{00586   \}}
\DoxyCodeLine{00587   glarePattern\_ras-\/>unlock();}
\DoxyCodeLine{00588 }
\DoxyCodeLine{00589   \textcolor{comment}{// convert to rgb}}
\DoxyCodeLine{00590   \mbox{\hyperlink{structdouble3}{double3}}* g\_xyz\_p = glare\_xyz;}
\DoxyCodeLine{00591   \mbox{\hyperlink{structdouble3}{double3}}* g\_out\_p = glare;}
\DoxyCodeLine{00592   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < dimIris * dimIris; i++, g\_xyz\_p++, g\_out\_p++) \{}
\DoxyCodeLine{00593     (*g\_out\_p).x = 3.240479f * (*g\_xyz\_p).x -\/ 1.537150f * (*g\_xyz\_p).y -\/}
\DoxyCodeLine{00594                    0.498535f * (*g\_xyz\_p).z;}
\DoxyCodeLine{00595     (*g\_out\_p).y = -\/0.969256f * (*g\_xyz\_p).x + 1.875992f * (*g\_xyz\_p).y +}
\DoxyCodeLine{00596                    0.041556f * (*g\_xyz\_p).z;}
\DoxyCodeLine{00597     (*g\_out\_p).z = 0.055648f * (*g\_xyz\_p).x -\/ 0.204043f * (*g\_xyz\_p).y +}
\DoxyCodeLine{00598                    1.057311f * (*g\_xyz\_p).z;}
\DoxyCodeLine{00599   \}}
\DoxyCodeLine{00600 }
\DoxyCodeLine{00601   glare\_xyz\_ras-\/>unlock();}
\DoxyCodeLine{00602 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_ab2764aefcd92287bf1009e96f90a6a1f}\label{class_iwa___glare_fx_ab2764aefcd92287bf1009e96f90a6a1f}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!setChannelToResult@{setChannelToResult}}
\index{setChannelToResult@{setChannelToResult}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{setChannelToResult()}{setChannelToResult()}}
{\footnotesize\ttfamily template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ \\
void Iwa\+\_\+\+Glare\+Fx\+::set\+Channel\+To\+Result (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}}}]{ras,  }\item[{kiss\+\_\+fft\+\_\+cpx $\ast$}]{buf,  }\item[{int}]{channel,  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{dim\+Out }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00794                                                                              \{}
\DoxyCodeLine{00795   \textcolor{keyword}{auto} clamp01 = [](\textcolor{keywordtype}{double} chan) \{}
\DoxyCodeLine{00796     \textcolor{keywordflow}{if} (chan < 0.0) \textcolor{keywordflow}{return} 0.0;}
\DoxyCodeLine{00797     \textcolor{keywordflow}{if} (chan > 1.0) \textcolor{keywordflow}{return} 1.0;}
\DoxyCodeLine{00798     \textcolor{keywordflow}{return} chan;}
\DoxyCodeLine{00799   \};}
\DoxyCodeLine{00800 }
\DoxyCodeLine{00801   \textcolor{keywordtype}{int} margin\_x = (dimOut.lx -\/ ras-\/>getSize().lx) / 2;}
\DoxyCodeLine{00802   \textcolor{keywordtype}{int} margin\_y = (dimOut.ly -\/ ras-\/>getSize().ly) / 2;}
\DoxyCodeLine{00803 }
\DoxyCodeLine{00804   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < ras-\/>getLy(); j++) \{}
\DoxyCodeLine{00805     \textcolor{comment}{// kiss\_fft\_cpx* buf\_p = \&buf[(j + margin\_y)*dimOut.lx + margin\_x];}}
\DoxyCodeLine{00806     PIXEL* pix = ras-\/>pixels(j);}
\DoxyCodeLine{00807     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < ras-\/>getLx(); i++, pix++) \{}
\DoxyCodeLine{00808       kiss\_fft\_cpx fft\_val =}
\DoxyCodeLine{00809           buf[getCoord(i + margin\_x, j + margin\_y, dimOut.lx, dimOut.ly)];}
\DoxyCodeLine{00810       \textcolor{keywordtype}{double} val = fft\_val.r / (dimOut.lx * dimOut.ly);}
\DoxyCodeLine{00811       \textcolor{keywordflow}{if} (channel == 0)}
\DoxyCodeLine{00812         pix-\/>r = (\textcolor{keyword}{typename} PIXEL::Channel)(clamp01(val) *}
\DoxyCodeLine{00813                                            double(PIXEL::maxChannelValue));}
\DoxyCodeLine{00814       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (channel == 1)}
\DoxyCodeLine{00815         pix-\/>g = (\textcolor{keyword}{typename} PIXEL::Channel)(clamp01(val) *}
\DoxyCodeLine{00816                                            double(PIXEL::maxChannelValue));}
\DoxyCodeLine{00817       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (channel == 2) \{}
\DoxyCodeLine{00818         pix-\/>b = (\textcolor{keyword}{typename} PIXEL::Channel)(clamp01(val) *}
\DoxyCodeLine{00819                                            double(PIXEL::maxChannelValue));}
\DoxyCodeLine{00820         pix-\/>m = PIXEL::maxChannelValue;}
\DoxyCodeLine{00821       \}}
\DoxyCodeLine{00822     \}}
\DoxyCodeLine{00823   \}}
\DoxyCodeLine{00824 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_a2247e8a90f9124ce68930810f08d3d9f}\label{class_iwa___glare_fx_a2247e8a90f9124ce68930810f08d3d9f}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!setFilterPreviewToResult@{setFilterPreviewToResult}}
\index{setFilterPreviewToResult@{setFilterPreviewToResult}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{setFilterPreviewToResult()}{setFilterPreviewToResult()}}
{\footnotesize\ttfamily template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ \\
void Iwa\+\_\+\+Glare\+Fx\+::set\+Filter\+Preview\+To\+Result (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}}}]{ras,  }\item[{\mbox{\hyperlink{structdouble3}{double3}} $\ast$}]{glare,  }\item[{int}]{dim\+Iris,  }\item[{\mbox{\hyperlink{structint2}{int2}}}]{margin }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00710                                                                      \{}
\DoxyCodeLine{00711   \textcolor{keyword}{auto} clamp01 = [](\textcolor{keywordtype}{double} chan) \{}
\DoxyCodeLine{00712     \textcolor{keywordflow}{if} (chan < 0.0) \textcolor{keywordflow}{return} 0.0;}
\DoxyCodeLine{00713     \textcolor{keywordflow}{if} (chan > 1.0) \textcolor{keywordflow}{return} 1.0;}
\DoxyCodeLine{00714     \textcolor{keywordflow}{return} chan;}
\DoxyCodeLine{00715   \};}
\DoxyCodeLine{00716   \textcolor{keywordtype}{int} j = margin.y;}
\DoxyCodeLine{00717   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} out\_j = 0; out\_j < ras-\/>getLy(); j++, out\_j++) \{}
\DoxyCodeLine{00718     \textcolor{keywordflow}{if} (j < 0)}
\DoxyCodeLine{00719       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00720     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j >= dimIris)}
\DoxyCodeLine{00721       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00722     PIXEL* pix = ras-\/>pixels(out\_j);}
\DoxyCodeLine{00723     \textcolor{keywordtype}{int} i      = margin.x;}
\DoxyCodeLine{00724     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} out\_i = 0; out\_i < ras-\/>getLx(); i++, out\_i++, pix++) \{}
\DoxyCodeLine{00725       \textcolor{keywordflow}{if} (i < 0)}
\DoxyCodeLine{00726         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00727       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (i >= dimIris)}
\DoxyCodeLine{00728         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00729       \mbox{\hyperlink{structdouble3}{double3}} gl\_p = glare[j * dimIris + i];}
\DoxyCodeLine{00730       pix-\/>r       = (\textcolor{keyword}{typename} PIXEL::Channel)(clamp01(gl\_p.x) *}
\DoxyCodeLine{00731                                          double(PIXEL::maxChannelValue));}
\DoxyCodeLine{00732       pix-\/>g       = (\textcolor{keyword}{typename} PIXEL::Channel)(clamp01(gl\_p.y) *}
\DoxyCodeLine{00733                                          double(PIXEL::maxChannelValue));}
\DoxyCodeLine{00734       pix-\/>b       = (\textcolor{keyword}{typename} PIXEL::Channel)(clamp01(gl\_p.z) *}
\DoxyCodeLine{00735                                          double(PIXEL::maxChannelValue));}
\DoxyCodeLine{00736       pix-\/>m       = PIXEL::maxChannelValue;}
\DoxyCodeLine{00737     \}}
\DoxyCodeLine{00738   \}}
\DoxyCodeLine{00739 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_aec96073aee1f07a55b9f38a67f7c7895}\label{class_iwa___glare_fx_aec96073aee1f07a55b9f38a67f7c7895}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!setGlarePatternToBuffer@{setGlarePatternToBuffer}}
\index{setGlarePatternToBuffer@{setGlarePatternToBuffer}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{setGlarePatternToBuffer()}{setGlarePatternToBuffer()}}
{\footnotesize\ttfamily void Iwa\+\_\+\+Glare\+Fx\+::set\+Glare\+Pattern\+To\+Buffer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structdouble3}{double3}} $\ast$}]{glare,  }\item[{kiss\+\_\+fft\+\_\+cpx $\ast$}]{buf,  }\item[{const int}]{channel,  }\item[{const int}]{dim\+Iris,  }\item[{const \mbox{\hyperlink{class_t_dimension_t}{TDimensionI}} \&}]{dim\+Out }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00763                                                                      \{}
\DoxyCodeLine{00764   \textcolor{keywordtype}{int} margin\_x = (dimOut.lx -\/ dimIris) / 2;}
\DoxyCodeLine{00765   \textcolor{keywordtype}{int} margin\_y = (dimOut.ly -\/ dimIris) / 2;}
\DoxyCodeLine{00766   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = margin\_y; j < margin\_y + dimIris; j++) \{}
\DoxyCodeLine{00767     \textcolor{keyword}{const} \mbox{\hyperlink{structdouble3}{double3}}* glare\_p = \&glare[(j -\/ margin\_y) * dimIris];}
\DoxyCodeLine{00768     kiss\_fft\_cpx* buf\_p    = \&buf[j * dimOut.lx + margin\_x];}
\DoxyCodeLine{00769     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = margin\_x; i < margin\_x + dimIris; i++, buf\_p++, glare\_p++) \{}
\DoxyCodeLine{00770       (*buf\_p).r = (channel == 0)}
\DoxyCodeLine{00771                        ? (*glare\_p).x}
\DoxyCodeLine{00772                        : (channel == 1) ? (*glare\_p).y : (*glare\_p).z;}
\DoxyCodeLine{00773     \}}
\DoxyCodeLine{00774   \}}
\DoxyCodeLine{00775 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_iwa___glare_fx_a9feca5ccc88311a05a2b3e1bb5716d35}\label{class_iwa___glare_fx_a9feca5ccc88311a05a2b3e1bb5716d35}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!setSourceTileToBuffer@{setSourceTileToBuffer}}
\index{setSourceTileToBuffer@{setSourceTileToBuffer}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{setSourceTileToBuffer()}{setSourceTileToBuffer()}}
{\footnotesize\ttfamily template$<$typename \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}} , typename PIXEL $>$ \\
void Iwa\+\_\+\+Glare\+Fx\+::set\+Source\+Tile\+To\+Buffer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct___r_a_s_t_e_r}{RASTER}}}]{ras,  }\item[{kiss\+\_\+fft\+\_\+cpx $\ast$}]{buf }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00745                                                                            \{}
\DoxyCodeLine{00746   kiss\_fft\_cpx* buf\_p = buf;}
\DoxyCodeLine{00747   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < ras-\/>getLy(); j++) \{}
\DoxyCodeLine{00748     PIXEL* pix = ras-\/>pixels(j);}
\DoxyCodeLine{00749     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < ras-\/>getLx(); i++, pix++, buf\_p++) \{}
\DoxyCodeLine{00750       \textcolor{comment}{// Value = 0.3R 0.59G 0.11B}}
\DoxyCodeLine{00751       (*buf\_p).r = (double(pix-\/>r) * 0.3 + double(pix-\/>g) * 0.59 +}
\DoxyCodeLine{00752                     double(pix-\/>b) * 0.11) /}
\DoxyCodeLine{00753                    \textcolor{keywordtype}{double}(PIXEL::maxChannelValue);}
\DoxyCodeLine{00754     \}}
\DoxyCodeLine{00755   \}}
\DoxyCodeLine{00756 \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_iwa___glare_fx_a5b564fc2e3047c75d9042ff638619075}\label{class_iwa___glare_fx_a5b564fc2e3047c75d9042ff638619075}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_aberration@{m\_aberration}}
\index{m\_aberration@{m\_aberration}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_aberration}{m\_aberration}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+aberration\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a889d0b67fbad6c6f7b7227735af8a2b4}\label{class_iwa___glare_fx_a889d0b67fbad6c6f7b7227735af8a2b4}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_intensity@{m\_intensity}}
\index{m\_intensity@{m\_intensity}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_intensity}{m\_intensity}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+intensity\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a81444d806c9fb177400b664906a50c0e}\label{class_iwa___glare_fx_a81444d806c9fb177400b664906a50c0e}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_iris@{m\_iris}}
\index{m\_iris@{m\_iris}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_iris}{m\_iris}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+iris\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a9924c508a9633a2f453f7992d31f64f1}\label{class_iwa___glare_fx_a9924c508a9633a2f453f7992d31f64f1}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_irisAppearance@{m\_irisAppearance}}
\index{m\_irisAppearance@{m\_irisAppearance}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_irisAppearance}{m\_irisAppearance}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+iris\+Appearance\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a37ae7f414ee30af022542987438b6cc1}\label{class_iwa___glare_fx_a37ae7f414ee30af022542987438b6cc1}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_irisGearEdgeCount@{m\_irisGearEdgeCount}}
\index{m\_irisGearEdgeCount@{m\_irisGearEdgeCount}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_irisGearEdgeCount}{m\_irisGearEdgeCount}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+iris\+Gear\+Edge\+Count\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a9dee581661367bba41c1b531636f5cfe}\label{class_iwa___glare_fx_a9dee581661367bba41c1b531636f5cfe}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_irisMode@{m\_irisMode}}
\index{m\_irisMode@{m\_irisMode}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_irisMode}{m\_irisMode}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+iris\+Mode\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a6719f78cfebeb85c235aa9f205218305}\label{class_iwa___glare_fx_a6719f78cfebeb85c235aa9f205218305}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_irisRandomSeed@{m\_irisRandomSeed}}
\index{m\_irisRandomSeed@{m\_irisRandomSeed}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_irisRandomSeed}{m\_irisRandomSeed}}
{\footnotesize\ttfamily TInt\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+iris\+Random\+Seed\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_aaca378e022accdc7cec6bb3c7326f9c0}\label{class_iwa___glare_fx_aaca378e022accdc7cec6bb3c7326f9c0}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_irisScale@{m\_irisScale}}
\index{m\_irisScale@{m\_irisScale}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_irisScale}{m\_irisScale}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+iris\+Scale\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a18e10b8438e573649632dd11cfcd741d}\label{class_iwa___glare_fx_a18e10b8438e573649632dd11cfcd741d}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_irisSymmetry@{m\_irisSymmetry}}
\index{m\_irisSymmetry@{m\_irisSymmetry}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_irisSymmetry}{m\_irisSymmetry}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+iris\+Symmetry\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_ad4949ee4f6b93e5f0532c09095ff1113}\label{class_iwa___glare_fx_ad4949ee4f6b93e5f0532c09095ff1113}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_noise\_evolution@{m\_noise\_evolution}}
\index{m\_noise\_evolution@{m\_noise\_evolution}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_noise\_evolution}{m\_noise\_evolution}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+noise\+\_\+evolution\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a51d91ef1838cc8992788873676eeecf2}\label{class_iwa___glare_fx_a51d91ef1838cc8992788873676eeecf2}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_noise\_factor@{m\_noise\_factor}}
\index{m\_noise\_factor@{m\_noise\_factor}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_noise\_factor}{m\_noise\_factor}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+noise\+\_\+factor\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_ae1363cbb3d2a2f55cd95609373ee1d5d}\label{class_iwa___glare_fx_ae1363cbb3d2a2f55cd95609373ee1d5d}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_noise\_octave@{m\_noise\_octave}}
\index{m\_noise\_octave@{m\_noise\_octave}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_noise\_octave}{m\_noise\_octave}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+noise\+\_\+octave\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_aea62f361e88a35e083ccdf7fb3c42322}\label{class_iwa___glare_fx_aea62f361e88a35e083ccdf7fb3c42322}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_noise\_offset@{m\_noise\_offset}}
\index{m\_noise\_offset@{m\_noise\_offset}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_noise\_offset}{m\_noise\_offset}}
{\footnotesize\ttfamily TPoint\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+noise\+\_\+offset\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_aa7edcb0c0fe941c3685c6d6e35c3a9cc}\label{class_iwa___glare_fx_aa7edcb0c0fe941c3685c6d6e35c3a9cc}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_noise\_size@{m\_noise\_size}}
\index{m\_noise\_size@{m\_noise\_size}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_noise\_size}{m\_noise\_size}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+noise\+\_\+size\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a2ca52aac2db43a17db75f58815607dea}\label{class_iwa___glare_fx_a2ca52aac2db43a17db75f58815607dea}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_renderMode@{m\_renderMode}}
\index{m\_renderMode@{m\_renderMode}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_renderMode}{m\_renderMode}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_int_enum_param_p}{TInt\+Enum\+ParamP}} Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+render\+Mode\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_aeb446dc887e48e0745895ee90848e8e2}\label{class_iwa___glare_fx_aeb446dc887e48e0745895ee90848e8e2}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_rotation@{m\_rotation}}
\index{m\_rotation@{m\_rotation}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_rotation}{m\_rotation}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+rotation\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_a2b1fbf398b4cfbc19f1d0b7f57ea75cd}\label{class_iwa___glare_fx_a2b1fbf398b4cfbc19f1d0b7f57ea75cd}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_size@{m\_size}}
\index{m\_size@{m\_size}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_size}{m\_size}}
{\footnotesize\ttfamily TDouble\+ParamP Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+size\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_iwa___glare_fx_ad9e29bfbeda2844860d61f634c13c7f3}\label{class_iwa___glare_fx_ad9e29bfbeda2844860d61f634c13c7f3}} 
\index{Iwa\_GlareFx@{Iwa\_GlareFx}!m\_source@{m\_source}}
\index{m\_source@{m\_source}!Iwa\_GlareFx@{Iwa\_GlareFx}}
\doxysubsubsection{\texorpdfstring{m\_source}{m\_source}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_raster_fx_port}{TRaster\+Fx\+Port}} Iwa\+\_\+\+Glare\+Fx\+::m\+\_\+source\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/stdfx/iwa\+\_\+glarefx.\+h\item 
E\+:/opentoonz/toonz/sources/stdfx/iwa\+\_\+glarefx.\+cpp\end{DoxyCompactItemize}
