\hypertarget{class_t_level_writer}{}\doxysection{TLevel\+Writer Class Reference}
\label{class_t_level_writer}\index{TLevelWriter@{TLevelWriter}}
Inheritance diagram for TLevel\+Writer\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=12.000000cm]{class_t_level_writer}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_level_writer_a72e02a2dcef7343d13df225e28719ab9}{TLevel\+Writer}} (const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&path, \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$winfo=0)
\item 
void \mbox{\hyperlink{class_t_level_writer_a8798dad86101c3acdd60d0ed4edfdde2}{set\+Creator}} (const QString \&creator)
\item 
virtual void \mbox{\hyperlink{class_t_level_writer_a7a0693afefd5d89138a35fa29d4b9859}{set\+Palette}} (\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$)
\item 
virtual void \mbox{\hyperlink{class_t_level_writer_a9601072045f5255ec54be59b74ee0c69}{set\+Overwrite\+Palette\+Flag}} (bool overwrite)
\item 
virtual void \mbox{\hyperlink{class_t_level_writer_aa060a07f822355ccb029882f437407b9}{renumber\+Fids}} (const std\+::map$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}, \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&table)
\begin{DoxyCompactList}\small\item\em Maps a list of existing level frames to a new list of frames. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_t_level_writer_a9630158c2c53a60eeda102f28a4aae5c}{set\+Icon\+Size}} (\mbox{\hyperlink{class_t_dimension_t}{TDimension}})
\item 
virtual \mbox{\hyperlink{class_t_dimension_t}{TDimension}} \mbox{\hyperlink{class_t_level_writer_ae59dd2773a9e5320b0e71d6dfc524ea3}{get\+Icon\+Size}} () const
\item 
virtual \mbox{\hyperlink{class_t_image_writer_p}{TImage\+WriterP}} \mbox{\hyperlink{class_t_level_writer_a63e3cf77eab8eeb149fdd61c2c22098a}{get\+Frame\+Writer}} (\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}})
\item 
\mbox{\hyperlink{class_t_image_writer_p}{TImage\+WriterP}} \mbox{\hyperlink{class_t_level_writer_a4df06bd26b5a1845af406cdd2466c10e}{get\+Frame\+Writer}} (int f)
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_t_level_writer_a7c450ab74f58f08c3b72880ccbfd1fef}{get\+Properties}} ()
\item 
void \mbox{\hyperlink{class_t_level_writer_a78e2583ab05d360752c764cb5df6cc45}{save}} (const \mbox{\hyperlink{class_t_level_p}{TLevelP}} \&level)
\item 
virtual void \mbox{\hyperlink{class_t_level_writer_a950ef5bb3fbba920489e2c93ab3d66dc}{save\+Sound\+Track}} (\mbox{\hyperlink{class_t_sound_track}{TSound\+Track}} $\ast$st)
\item 
virtual void \mbox{\hyperlink{class_t_level_writer_a8e8e682d4fd9da62ffe0743a70914b6c}{set\+Frame\+Rate}} (double fps)
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_t_level_writer_a6d17e8a52fa677deb0b89fe52cc486a0}{get\+File\+Path}} () const
\item 
const \mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ \mbox{\hyperlink{class_t_level_writer_a311f6645704af4f0379fca5586aad3a5}{get\+Content\+History}} () const
\item 
\mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ \mbox{\hyperlink{class_t_level_writer_aa8e702e8382e7aa79351ddbb7f8d243e}{get\+Content\+History}} ()
\item 
void \mbox{\hyperlink{class_t_level_writer_a00f3e90adfcf8cf52681717907774ba2}{set\+Content\+History}} (\mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$content\+History)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{class_t_level_writer_aa1266647ee0e12127ecfb3eccd24a0c7}{get\+Supported\+Formats}} (QString\+List \&names, bool only\+Render\+Formats)
\item 
static void \mbox{\hyperlink{class_t_level_writer_aa2b71be887d542ba608ec23bfc58317a}{define}} (QString extension, TLevel\+Writer\+Create\+Proc $\ast$proc, bool is\+Render\+Format)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \mbox{\hyperlink{class_t_level_writer_ab305b98bccff4876fbe8482278248383}{m\+\_\+path}}
\item 
double \mbox{\hyperlink{class_t_level_writer_a0401656ef9f16668b97bccc8b125abe4}{m\+\_\+frame\+Rate}}
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_t_level_writer_a2cbebca27e1e22dcb23e11fec273818c}{m\+\_\+properties}}
\item 
\mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ \mbox{\hyperlink{class_t_level_writer_a404e0563ec9fb641079247a720860797}{m\+\_\+content\+History}}
\item 
QString \mbox{\hyperlink{class_t_level_writer_ae3ab74b5105fc1dafc1b72106f8a8609}{m\+\_\+creator}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_t_level_writer_a72e02a2dcef7343d13df225e28719ab9}\label{class_t_level_writer_a72e02a2dcef7343d13df225e28719ab9}} 
\index{TLevelWriter@{TLevelWriter}!TLevelWriter@{TLevelWriter}}
\index{TLevelWriter@{TLevelWriter}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{TLevelWriter()}{TLevelWriter()}}
{\footnotesize\ttfamily TLevel\+Writer\+::\+TLevel\+Writer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} \&}]{path,  }\item[{\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$}]{winfo = {\ttfamily 0} }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00186     : \mbox{\hyperlink{class_t_smart_object}{TSmartObject}}(m\_classCode)}
\DoxyCodeLine{00187     , m\_path(path)}
\DoxyCodeLine{00188     , m\_properties(prop)}
\DoxyCodeLine{00189     , m\_contentHistory(0) \{}
\DoxyCodeLine{00190   \textcolor{keywordtype}{string} ext = path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}();}
\DoxyCodeLine{00191   \textcolor{keywordflow}{if} (!prop) m\_properties = Tiio::makeWriterProperties(ext);}
\DoxyCodeLine{00192 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_acbe47fc86e7684131648df9f4a3d744b}\label{class_t_level_writer_acbe47fc86e7684131648df9f4a3d744b}} 
\index{TLevelWriter@{TLevelWriter}!````~TLevelWriter@{$\sim$TLevelWriter}}
\index{````~TLevelWriter@{$\sim$TLevelWriter}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{$\sim$TLevelWriter()}{~TLevelWriter()}}
{\footnotesize\ttfamily TLevel\+Writer\+::$\sim$\+TLevel\+Writer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00196                             \{}
\DoxyCodeLine{00197   \textcolor{keyword}{delete} m\_properties;}
\DoxyCodeLine{00198   \textcolor{keyword}{delete} m\_contentHistory;}
\DoxyCodeLine{00199 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_t_level_writer_aa2b71be887d542ba608ec23bfc58317a}\label{class_t_level_writer_aa2b71be887d542ba608ec23bfc58317a}} 
\index{TLevelWriter@{TLevelWriter}!define@{define}}
\index{define@{define}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{define()}{define()}}
{\footnotesize\ttfamily void TLevel\+Writer\+::define (\begin{DoxyParamCaption}\item[{QString}]{extension,  }\item[{TLevel\+Writer\+Create\+Proc $\ast$}]{proc,  }\item[{bool}]{is\+Render\+Format }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00360                                                \{}
\DoxyCodeLine{00361   LevelWriterTable[extension] =}
\DoxyCodeLine{00362       std::pair<TLevelWriterCreateProc *, bool>(proc, isRenderFormat);}
\DoxyCodeLine{00363   \textcolor{comment}{// cout << "{}LevelWriter "{} << extension << "{} registered"{} << endl;}}
\DoxyCodeLine{00364 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_aa8e702e8382e7aa79351ddbb7f8d243e}\label{class_t_level_writer_aa8e702e8382e7aa79351ddbb7f8d243e}} 
\index{TLevelWriter@{TLevelWriter}!getContentHistory@{getContentHistory}}
\index{getContentHistory@{getContentHistory}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{getContentHistory()}{getContentHistory()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ TLevel\+Writer\+::get\+Content\+History (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00197 \{ \textcolor{keywordflow}{return} m\_contentHistory; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a311f6645704af4f0379fca5586aad3a5}\label{class_t_level_writer_a311f6645704af4f0379fca5586aad3a5}} 
\index{TLevelWriter@{TLevelWriter}!getContentHistory@{getContentHistory}}
\index{getContentHistory@{getContentHistory}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{getContentHistory()}{getContentHistory()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily const \mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$ TLevel\+Writer\+::get\+Content\+History (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00196 \{ \textcolor{keywordflow}{return} m\_contentHistory; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a6d17e8a52fa677deb0b89fe52cc486a0}\label{class_t_level_writer_a6d17e8a52fa677deb0b89fe52cc486a0}} 
\index{TLevelWriter@{TLevelWriter}!getFilePath@{getFilePath}}
\index{getFilePath@{getFilePath}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{getFilePath()}{getFilePath()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} TLevel\+Writer\+::get\+File\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00191 \{ \textcolor{keywordflow}{return} m\_path; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a4df06bd26b5a1845af406cdd2466c10e}\label{class_t_level_writer_a4df06bd26b5a1845af406cdd2466c10e}} 
\index{TLevelWriter@{TLevelWriter}!getFrameWriter@{getFrameWriter}}
\index{getFrameWriter@{getFrameWriter}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{getFrameWriter()}{getFrameWriter()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_image_writer_p}{TImage\+WriterP}} TLevel\+Writer\+::get\+Frame\+Writer (\begin{DoxyParamCaption}\item[{int}]{f }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00182 \{ \textcolor{keywordflow}{return} getFrameWriter(\mbox{\hyperlink{class_t_frame_id}{TFrameId}}(f)); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a63e3cf77eab8eeb149fdd61c2c22098a}\label{class_t_level_writer_a63e3cf77eab8eeb149fdd61c2c22098a}} 
\index{TLevelWriter@{TLevelWriter}!getFrameWriter@{getFrameWriter}}
\index{getFrameWriter@{getFrameWriter}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{getFrameWriter()}{getFrameWriter()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_image_writer_p}{TImage\+WriterP}} TLevel\+Writer\+::get\+Frame\+Writer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}}]{fid }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00252                                                        \{}
\DoxyCodeLine{00253   \mbox{\hyperlink{class_t_image_writer_p}{TImageWriterP}} iw(m\_path.\mbox{\hyperlink{class_t_file_path_a12f35b225e1882372ad7e02ad7fce543}{withFrame}}(fid));}
\DoxyCodeLine{00254   iw-\/>setProperties(m\_properties);}
\DoxyCodeLine{00255   \textcolor{keywordflow}{return} iw;}
\DoxyCodeLine{00256 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_ae59dd2773a9e5320b0e71d6dfc524ea3}\label{class_t_level_writer_ae59dd2773a9e5320b0e71d6dfc524ea3}} 
\index{TLevelWriter@{TLevelWriter}!getIconSize@{getIconSize}}
\index{getIconSize@{getIconSize}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{getIconSize()}{getIconSize()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{class_t_dimension_t}{TDimension}} TLevel\+Writer\+::get\+Icon\+Size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00172 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(); \};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a7c450ab74f58f08c3b72880ccbfd1fef}\label{class_t_level_writer_a7c450ab74f58f08c3b72880ccbfd1fef}} 
\index{TLevelWriter@{TLevelWriter}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ TLevel\+Writer\+::get\+Properties (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00184 \{ \textcolor{keywordflow}{return} m\_properties; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_aa1266647ee0e12127ecfb3eccd24a0c7}\label{class_t_level_writer_aa1266647ee0e12127ecfb3eccd24a0c7}} 
\index{TLevelWriter@{TLevelWriter}!getSupportedFormats@{getSupportedFormats}}
\index{getSupportedFormats@{getSupportedFormats}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{getSupportedFormats()}{getSupportedFormats()}}
{\footnotesize\ttfamily void TLevel\+Writer\+::get\+Supported\+Formats (\begin{DoxyParamCaption}\item[{QString\+List \&}]{names,  }\item[{bool}]{only\+Render\+Formats }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00242                                                                \{}
\DoxyCodeLine{00243   \textcolor{keywordflow}{for} (std::map<QString, std::pair<TLevelWriterCreateProc *, bool>>::iterator}
\DoxyCodeLine{00244            it = LevelWriterTable.begin();}
\DoxyCodeLine{00245        it != LevelWriterTable.end(); ++it) \{}
\DoxyCodeLine{00246     \textcolor{keywordflow}{if} (!onlyRenderFormats || it-\/>second.second) names.push\_back(it-\/>first);}
\DoxyCodeLine{00247   \}}
\DoxyCodeLine{00248 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_aa060a07f822355ccb029882f437407b9}\label{class_t_level_writer_aa060a07f822355ccb029882f437407b9}} 
\index{TLevelWriter@{TLevelWriter}!renumberFids@{renumberFids}}
\index{renumberFids@{renumberFids}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{renumberFids()}{renumberFids()}}
{\footnotesize\ttfamily void TLevel\+Writer\+::renumber\+Fids (\begin{DoxyParamCaption}\item[{const std\+::map$<$ \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}}, \mbox{\hyperlink{class_t_frame_id}{TFrame\+Id}} $>$ \&}]{table }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Maps a list of existing level frames to a new list of frames. 

This function allows an existing level to reorganize (or discard) its {\itshape disk} content. It is typically implemented by TLevel\+Writers that support {\itshape  random access writing \texorpdfstring{$<$}{<}\textbackslash{}I\texorpdfstring{$>$}{>}, which can therefore write new frames on top of an existing level. ~\newline
~\newline
This function requires that frames present on disk {\itshape and} in the table be remapped, while frames on disk {\itshape not} in the table be {\bfseries{deleted}}. Eventual frames present in the table but not on disk are ignored. ~\newline
~\newline
The default implementation provides renumbering for standard Toonz multi-\/file level types (level\+Name.\#\#\#\#c.\+ext), and does nothing if the specified path is not compatible with the multi-\/file format. }

Reimplemented in \mbox{\hyperlink{class_t_level_writer_tzl_a52b3d608e4f3efea6185df0da82288b3}{TLevel\+Writer\+Tzl}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00269                                                                        \{}
\DoxyCodeLine{00270   \textcolor{keyword}{typedef} std::map<TFrameId, TFrameId> \mbox{\hyperlink{class_table}{Table}};}
\DoxyCodeLine{00271 }
\DoxyCodeLine{00272   \textcolor{keyword}{struct }locals \{}
\DoxyCodeLine{00273     \textcolor{keyword}{static} \textcolor{keyword}{inline} QString qstring(\textcolor{keyword}{const} \mbox{\hyperlink{class_t_file_path}{TFilePath}} \&fp) \{}
\DoxyCodeLine{00274       \textcolor{keywordflow}{return} QString::fromStdWString(fp.getWideString());}
\DoxyCodeLine{00275     \}}
\DoxyCodeLine{00276     \textcolor{keyword}{static} \textcolor{keyword}{inline} QString temp(\textcolor{keyword}{const} QString \&str) \{}
\DoxyCodeLine{00277       \textcolor{keywordflow}{return} str + QString(\textcolor{stringliteral}{"{}\_"{}});}
\DoxyCodeLine{00278     \}}
\DoxyCodeLine{00279   \};}
\DoxyCodeLine{00280 }
\DoxyCodeLine{00281   \textcolor{keywordflow}{if} (m\_path.\mbox{\hyperlink{class_t_file_path_a698bbf714436eb6923359044900cde2b}{getDots}}() == \textcolor{stringliteral}{"{}.."{}}) \{}
\DoxyCodeLine{00282     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00283       \textcolor{comment}{// Extract all image file paths of the level}}
\DoxyCodeLine{00284       QDir parentDir(}
\DoxyCodeLine{00285           QString::fromStdWString(m\_path.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}().getWideString()));}
\DoxyCodeLine{00286       parentDir.setFilter(QDir::Files);}
\DoxyCodeLine{00287 }
\DoxyCodeLine{00288       QStringList nameFilters;}
\DoxyCodeLine{00289       \textcolor{comment}{// check for both period and underscore}}
\DoxyCodeLine{00290       nameFilters << QString::fromStdWString(m\_path.getWideName()) + \textcolor{stringliteral}{"{}.*."{}} +}
\DoxyCodeLine{00291                          QString::fromStdString(m\_path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}())}
\DoxyCodeLine{00292                   << QString::fromStdWString(m\_path.getWideName()) + \textcolor{stringliteral}{"{}\_*."{}} +}
\DoxyCodeLine{00293                          QString::fromStdString(m\_path.\mbox{\hyperlink{class_t_file_path_aefca624df1a5468a4c78ec6d5dbfae26}{getType}}());}
\DoxyCodeLine{00294       parentDir.setNameFilters(nameFilters);}
\DoxyCodeLine{00295 }
\DoxyCodeLine{00296       TFilePathSet fpset;}
\DoxyCodeLine{00297       TSystem::readDirectory(fpset, parentDir, \textcolor{keyword}{false});  \textcolor{comment}{// Could throw}}
\DoxyCodeLine{00298 }
\DoxyCodeLine{00299       \textcolor{comment}{// Traverse each file, trying to match it with a table entry}}
\DoxyCodeLine{00300       std::vector<QString> storedDstPaths;}
\DoxyCodeLine{00301 }
\DoxyCodeLine{00302       TFilePathSet::iterator st, sEnd(fpset.end());}
\DoxyCodeLine{00303       \textcolor{keywordflow}{for} (st = fpset.begin(); st != sEnd; ++st) \{}
\DoxyCodeLine{00304         \textcolor{keyword}{const} QString \&src  = locals::qstring(*st);}
\DoxyCodeLine{00305         \textcolor{keyword}{const} \mbox{\hyperlink{class_t_frame_id}{TFrameId}} \&fid = st-\/>getFrame();  \textcolor{comment}{// Could throw ! (and I'm quite}}
\DoxyCodeLine{00306                                                \textcolor{comment}{// appalled of that  o.o')}}
\DoxyCodeLine{00307 }
\DoxyCodeLine{00308         Table::const\_iterator dt(table.find(fid));}
\DoxyCodeLine{00309         \textcolor{keywordflow}{if} (dt == table.end()) \{}
\DoxyCodeLine{00310           \textcolor{comment}{// The frame must be removed}}
\DoxyCodeLine{00311           QFile::remove(src);}
\DoxyCodeLine{00312         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00313           \textcolor{keywordflow}{if} (fid == dt-\/>second) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00314 }
\DoxyCodeLine{00315           \textcolor{comment}{// The frame must be renumbered}}
\DoxyCodeLine{00316           \textcolor{keyword}{const} QString \&dst = locals::qstring(st-\/>withFrame(dt-\/>second));}
\DoxyCodeLine{00317 }
\DoxyCodeLine{00318           \textcolor{keywordflow}{if} (!QFile::rename(src, dst)) \{}
\DoxyCodeLine{00319             \textcolor{comment}{// Use a temporary file rename to ensure that other frames to be}}
\DoxyCodeLine{00320             \textcolor{comment}{// renumbered}}
\DoxyCodeLine{00321             \textcolor{comment}{// are not overwritten.}}
\DoxyCodeLine{00322             \textcolor{keywordflow}{if} (QFile::rename(locals::qstring(*st), locals::temp(dst)))}
\DoxyCodeLine{00323               storedDstPaths.push\_back(dst);}
\DoxyCodeLine{00324 }
\DoxyCodeLine{00325             \textcolor{comment}{// If the second rename did not happen, the problem was not on dst,}}
\DoxyCodeLine{00326             \textcolor{comment}{// but on src.}}
\DoxyCodeLine{00327             \textcolor{comment}{// Alas, it means that rename on source is not possible -\/ skip.}}
\DoxyCodeLine{00328           \}}
\DoxyCodeLine{00329         \}}
\DoxyCodeLine{00330       \}}
\DoxyCodeLine{00331 }
\DoxyCodeLine{00332       \textcolor{comment}{// At this point, temporaries should be restored to originals. In case the}}
\DoxyCodeLine{00333       \textcolor{comment}{// rename of one of those files cannot be finalized, leave the temporary -\/}}
\DoxyCodeLine{00334       \textcolor{comment}{// as}}
\DoxyCodeLine{00335       \textcolor{comment}{// it may be impossible to roll back (another frame could have been}}
\DoxyCodeLine{00336       \textcolor{comment}{// renumbered}}
\DoxyCodeLine{00337       \textcolor{comment}{// to the would-\/roll-\/back frame) !}}
\DoxyCodeLine{00338 }
\DoxyCodeLine{00339       std::vector<QString>::iterator dt, dEnd(storedDstPaths.end());}
\DoxyCodeLine{00340       \textcolor{keywordflow}{for} (dt = storedDstPaths.begin(); dt != dEnd; ++dt)}
\DoxyCodeLine{00341         QFile::rename(locals::temp(*dt), *dt);}
\DoxyCodeLine{00342     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00343       \textcolor{comment}{// Could not read the directory -\/ skip silently}}
\DoxyCodeLine{00344     \}}
\DoxyCodeLine{00345   \}}
\DoxyCodeLine{00346 \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00539}{TFile\+Path\+::get\+Dots()}}, \mbox{\hyperlink{l00683}{TFile\+Path\+::get\+Parent\+Dir()}}, and \mbox{\hyperlink{l00225}{TFile\+Path\+::get\+Type()}}.

\mbox{\Hypertarget{class_t_level_writer_a78e2583ab05d360752c764cb5df6cc45}\label{class_t_level_writer_a78e2583ab05d360752c764cb5df6cc45}} 
\index{TLevelWriter@{TLevelWriter}!save@{save}}
\index{save@{save}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily void TLevel\+Writer\+::save (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_level_p}{TLevelP}} \&}]{level }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00222                                             \{}
\DoxyCodeLine{00223   \textcolor{keywordflow}{for} (TLevel::Iterator it = level-\/>begin(); it != level-\/>end(); it++) \{}
\DoxyCodeLine{00224     \textcolor{keywordflow}{if} (it-\/>second) getFrameWriter(it-\/>first)-\/>save(it-\/>second);}
\DoxyCodeLine{00225   \}}
\DoxyCodeLine{00226 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a950ef5bb3fbba920489e2c93ab3d66dc}\label{class_t_level_writer_a950ef5bb3fbba920489e2c93ab3d66dc}} 
\index{TLevelWriter@{TLevelWriter}!saveSoundTrack@{saveSoundTrack}}
\index{saveSoundTrack@{saveSoundTrack}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{saveSoundTrack()}{saveSoundTrack()}}
{\footnotesize\ttfamily void TLevel\+Writer\+::save\+Sound\+Track (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_sound_track}{TSound\+Track}} $\ast$}]{st }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00230                                                \{}
\DoxyCodeLine{00231   \textcolor{keywordflow}{return};}
\DoxyCodeLine{00232   \textcolor{keywordflow}{throw} \mbox{\hyperlink{class_t_exception}{TException}}(\textcolor{stringliteral}{"{}The level format doesn't support soundtracks"{}});}
\DoxyCodeLine{00233 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a00f3e90adfcf8cf52681717907774ba2}\label{class_t_level_writer_a00f3e90adfcf8cf52681717907774ba2}} 
\index{TLevelWriter@{TLevelWriter}!setContentHistory@{setContentHistory}}
\index{setContentHistory@{setContentHistory}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{setContentHistory()}{setContentHistory()}}
{\footnotesize\ttfamily void TLevel\+Writer\+::set\+Content\+History (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_content_history}{TContent\+History}} $\ast$}]{content\+History }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00260                                                                     \{}
\DoxyCodeLine{00261   \textcolor{keywordflow}{if} (contentHistory != m\_contentHistory) \{}
\DoxyCodeLine{00262     \textcolor{keyword}{delete} m\_contentHistory;}
\DoxyCodeLine{00263     m\_contentHistory = contentHistory;}
\DoxyCodeLine{00264   \}}
\DoxyCodeLine{00265 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a8798dad86101c3acdd60d0ed4edfdde2}\label{class_t_level_writer_a8798dad86101c3acdd60d0ed4edfdde2}} 
\index{TLevelWriter@{TLevelWriter}!setCreator@{setCreator}}
\index{setCreator@{setCreator}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{setCreator()}{setCreator()}}
{\footnotesize\ttfamily void TLevel\+Writer\+::set\+Creator (\begin{DoxyParamCaption}\item[{const QString \&}]{creator }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00144 \{ m\_creator = creator; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a8e8e682d4fd9da62ffe0743a70914b6c}\label{class_t_level_writer_a8e8e682d4fd9da62ffe0743a70914b6c}} 
\index{TLevelWriter@{TLevelWriter}!setFrameRate@{setFrameRate}}
\index{setFrameRate@{setFrameRate}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{setFrameRate()}{setFrameRate()}}
{\footnotesize\ttfamily void TLevel\+Writer\+::set\+Frame\+Rate (\begin{DoxyParamCaption}\item[{double}]{fps }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00237 \{ m\_frameRate = fps; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a9630158c2c53a60eeda102f28a4aae5c}\label{class_t_level_writer_a9630158c2c53a60eeda102f28a4aae5c}} 
\index{TLevelWriter@{TLevelWriter}!setIconSize@{setIconSize}}
\index{setIconSize@{setIconSize}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{setIconSize()}{setIconSize()}}
{\footnotesize\ttfamily virtual void TLevel\+Writer\+::set\+Icon\+Size (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_dimension_t}{TDimension}}}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Reimplemented in \mbox{\hyperlink{class_t_level_writer_tzl_aae9d3879deb37fcc5b6cd8ded0089b4b}{TLevel\+Writer\+Tzl}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00171 \{\};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a9601072045f5255ec54be59b74ee0c69}\label{class_t_level_writer_a9601072045f5255ec54be59b74ee0c69}} 
\index{TLevelWriter@{TLevelWriter}!setOverwritePaletteFlag@{setOverwritePaletteFlag}}
\index{setOverwritePaletteFlag@{setOverwritePaletteFlag}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{setOverwritePaletteFlag()}{setOverwritePaletteFlag()}}
{\footnotesize\ttfamily virtual void TLevel\+Writer\+::set\+Overwrite\+Palette\+Flag (\begin{DoxyParamCaption}\item[{bool}]{overwrite }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00148 \{\};}

\end{DoxyCode}
\mbox{\Hypertarget{class_t_level_writer_a7a0693afefd5d89138a35fa29d4b9859}\label{class_t_level_writer_a7a0693afefd5d89138a35fa29d4b9859}} 
\index{TLevelWriter@{TLevelWriter}!setPalette@{setPalette}}
\index{setPalette@{setPalette}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{setPalette()}{setPalette()}}
{\footnotesize\ttfamily virtual void TLevel\+Writer\+::set\+Palette (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_t_palette}{TPalette}} $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00146 \{\};}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_t_level_writer_a404e0563ec9fb641079247a720860797}\label{class_t_level_writer_a404e0563ec9fb641079247a720860797}} 
\index{TLevelWriter@{TLevelWriter}!m\_contentHistory@{m\_contentHistory}}
\index{m\_contentHistory@{m\_contentHistory}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{m\_contentHistory}{m\_contentHistory}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_content_history}{TContent\+History}}$\ast$ TLevel\+Writer\+::m\+\_\+content\+History\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_level_writer_ae3ab74b5105fc1dafc1b72106f8a8609}\label{class_t_level_writer_ae3ab74b5105fc1dafc1b72106f8a8609}} 
\index{TLevelWriter@{TLevelWriter}!m\_creator@{m\_creator}}
\index{m\_creator@{m\_creator}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{m\_creator}{m\_creator}}
{\footnotesize\ttfamily QString TLevel\+Writer\+::m\+\_\+creator\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_level_writer_a0401656ef9f16668b97bccc8b125abe4}\label{class_t_level_writer_a0401656ef9f16668b97bccc8b125abe4}} 
\index{TLevelWriter@{TLevelWriter}!m\_frameRate@{m\_frameRate}}
\index{m\_frameRate@{m\_frameRate}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{m\_frameRate}{m\_frameRate}}
{\footnotesize\ttfamily double TLevel\+Writer\+::m\+\_\+frame\+Rate\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_level_writer_ab305b98bccff4876fbe8482278248383}\label{class_t_level_writer_ab305b98bccff4876fbe8482278248383}} 
\index{TLevelWriter@{TLevelWriter}!m\_path@{m\_path}}
\index{m\_path@{m\_path}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{m\_path}{m\_path}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_file_path}{TFile\+Path}} TLevel\+Writer\+::m\+\_\+path\hspace{0.3cm}{\ttfamily [protected]}}

\mbox{\Hypertarget{class_t_level_writer_a2cbebca27e1e22dcb23e11fec273818c}\label{class_t_level_writer_a2cbebca27e1e22dcb23e11fec273818c}} 
\index{TLevelWriter@{TLevelWriter}!m\_properties@{m\_properties}}
\index{m\_properties@{m\_properties}!TLevelWriter@{TLevelWriter}}
\doxysubsubsection{\texorpdfstring{m\_properties}{m\_properties}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}}$\ast$ TLevel\+Writer\+::m\+\_\+properties\hspace{0.3cm}{\ttfamily [protected]}}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/include/tlevel\+\_\+io.\+h\item 
E\+:/opentoonz/toonz/sources/common/timage\+\_\+io/tlevel\+\_\+io.\+cpp\end{DoxyCompactItemize}
