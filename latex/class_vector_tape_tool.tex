\hypertarget{class_vector_tape_tool}{}\doxysection{Vector\+Tape\+Tool Class Reference}
\label{class_vector_tape_tool}\index{VectorTapeTool@{VectorTapeTool}}
Inheritance diagram for Vector\+Tape\+Tool\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_vector_tape_tool}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} \mbox{\hyperlink{class_vector_tape_tool_ab383736565059cebb7126f835474ae55}{get\+Tool\+Type}} () const override
\item 
bool \mbox{\hyperlink{class_vector_tape_tool_a5b6f17e60cb8d6dbab3a9817c14d51d8}{on\+Property\+Changed}} (std\+::string property\+Name) override
\item 
void \mbox{\hyperlink{class_vector_tape_tool_ac1ed71df15c2fe2ec56a6ab4a3f20504}{update\+Translation}} () override
\item 
\mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ \mbox{\hyperlink{class_vector_tape_tool_af01f85b5e349af03348b1ffd1f60227e}{get\+Properties}} (int target\+Type) override
\item 
void \mbox{\hyperlink{class_vector_tape_tool_aaf17298c2921ce2ccdb1f09f83bf3b08}{draw}} () override
\begin{DoxyCompactList}\small\item\em Draws the tool on the viewer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_vector_tape_tool_a1a80d866683a566af9b8a898ed23e990}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_vector_tape_tool_a5b5dd4c9001aedafb97861e1da411c7f}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_vector_tape_tool_aa5ff0acdcd903d4b30b4d8a75fc8dd40}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_vector_tape_tool_a7308205291147c0d5075b320ec89b5a2}{join\+Point\+To\+Point}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&vi, std\+::vector$<$ \mbox{\hyperlink{class_t_filled_region_inf}{TFilled\+Region\+Inf}} $>$ $\ast$fill\+Info)
\item 
void \mbox{\hyperlink{class_vector_tape_tool_a9c1c56b08a11817569efcbc6d40a3bf1}{join\+Point\+To\+Line}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&vi, std\+::vector$<$ \mbox{\hyperlink{class_t_filled_region_inf}{TFilled\+Region\+Inf}} $>$ $\ast$fill\+Info)
\item 
void \mbox{\hyperlink{class_vector_tape_tool_a90e1da814306b9572146c2ce2aa176a6}{join\+Line\+To\+Line}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&vi, std\+::vector$<$ \mbox{\hyperlink{class_t_filled_region_inf}{TFilled\+Region\+Inf}} $>$ $\ast$fill\+Info)
\item 
void \mbox{\hyperlink{class_vector_tape_tool_a4f9bdddee71fdcfa7655aa08eb0c0acb}{rearrange\+Closing\+Points}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&vi, std\+::pair$<$ int, double $>$ \&closing\+Point, const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&p)
\item 
void \mbox{\hyperlink{class_vector_tape_tool_a5ccfba88776e7b67afcafb9448363967}{tape\+Rect}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&vi, const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&rect)
\item 
int \mbox{\hyperlink{class_vector_tape_tool_ab3ebbf7f718d0d2db4f9a57269100045}{do\+Tape}} (const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&vi, std\+::vector$<$ \mbox{\hyperlink{class_t_filled_region_inf}{TFilled\+Region\+Inf}} $>$ $\ast$fill\+Information, bool join\+Strokes)
\item 
void \mbox{\hyperlink{class_vector_tape_tool_a14574ba28441c364c0df6446aa7ea68e}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_vector_tape_tool_af22937ca6f35b2320b9cb3071ec05002}{on\+Enter}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse entering the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_vector_tape_tool_a481764c410bba81186e8ee985bc8b161}{on\+Leave}} () override
\begin{DoxyCompactList}\small\item\em Callback for the mouse leaving the viewer area. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_vector_tape_tool_a967e65d8f525006ce127119f4ffb13de}{on\+Activate}} () override
\begin{DoxyCompactList}\small\item\em Callback invoked whenever the tool activates. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_vector_tape_tool_aaacebdee5d606d350ef4ffa3c198616e}{get\+Cursor\+Id}} () const override
\begin{DoxyCompactList}\small\item\em Returns the type of cursor used by the tool. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_vector_tape_tool_a380a4b33443d996cf3c7dab1ee5877e0}\label{class_vector_tape_tool_a380a4b33443d996cf3c7dab1ee5877e0}} 
\index{VectorTapeTool@{VectorTapeTool}!VectorTapeTool@{VectorTapeTool}}
\index{VectorTapeTool@{VectorTapeTool}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{VectorTapeTool()}{VectorTapeTool()}}
{\footnotesize\ttfamily Vector\+Tape\+Tool\+::\+Vector\+Tape\+Tool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00199       : \mbox{\hyperlink{class_t_tool_a9c63ec35f606e755d0d036bf4fed62ab}{TTool}}(\textcolor{stringliteral}{"{}T\_Tape"{}})}
\DoxyCodeLine{00200       , m\_secondPoint(\textcolor{keyword}{false})}
\DoxyCodeLine{00201       , m\_strokeIndex1(-\/1)}
\DoxyCodeLine{00202       , m\_strokeIndex2(-\/1)}
\DoxyCodeLine{00203       , m\_w1(-\/1.0)}
\DoxyCodeLine{00204       , m\_w2(-\/1.0)}
\DoxyCodeLine{00205       , m\_pixelSize(1)}
\DoxyCodeLine{00206       , m\_draw(\textcolor{keyword}{false})}
\DoxyCodeLine{00207       , m\_smooth(\textcolor{stringliteral}{"{}Smooth"{}}, \textcolor{keyword}{false})  \textcolor{comment}{// W\_ToolOptions\_Smooth}}
\DoxyCodeLine{00208       , m\_joinStrokes(\textcolor{stringliteral}{"{}JoinStrokes"{}}, \textcolor{keyword}{false})}
\DoxyCodeLine{00209       , m\_mode(\textcolor{stringliteral}{"{}Mode"{}})}
\DoxyCodeLine{00210       , m\_type(\textcolor{stringliteral}{"{}Type"{}})}
\DoxyCodeLine{00211       , m\_autocloseFactor(\textcolor{stringliteral}{"{}Distance"{}}, 0.1, 100, 0.5)}
\DoxyCodeLine{00212       , m\_firstTime(\textcolor{keyword}{true})}
\DoxyCodeLine{00213       , m\_selectionRect()}
\DoxyCodeLine{00214       , m\_startRect() \{}
\DoxyCodeLine{00215     bind(TTool::Vectors);}
\DoxyCodeLine{00216 }
\DoxyCodeLine{00217     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_type);}
\DoxyCodeLine{00218     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_mode);}
\DoxyCodeLine{00219     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_autocloseFactor);}
\DoxyCodeLine{00220     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_joinStrokes);}
\DoxyCodeLine{00221     m\_prop.\mbox{\hyperlink{class_t_property_group_af135c807390f3d18237f4123e9d81d3d}{bind}}(m\_smooth);}
\DoxyCodeLine{00222 }
\DoxyCodeLine{00223     m\_mode.addValue(POINT2POINT);}
\DoxyCodeLine{00224     m\_mode.addValue(POINT2LINE);}
\DoxyCodeLine{00225     m\_mode.addValue(LINE2LINE);}
\DoxyCodeLine{00226     m\_smooth.setId(\textcolor{stringliteral}{"{}Smooth"{}});}
\DoxyCodeLine{00227     m\_type.addValue(NORMAL);}
\DoxyCodeLine{00228     m\_type.addValue(RECT);}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230     m\_mode.setId(\textcolor{stringliteral}{"{}Mode"{}});}
\DoxyCodeLine{00231     m\_type.setId(\textcolor{stringliteral}{"{}Type"{}});}
\DoxyCodeLine{00232     m\_joinStrokes.setId(\textcolor{stringliteral}{"{}JoinVectors"{}});}
\DoxyCodeLine{00233     m\_autocloseFactor.setId(\textcolor{stringliteral}{"{}Distance"{}});}
\DoxyCodeLine{00234   \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_vector_tape_tool_ab3ebbf7f718d0d2db4f9a57269100045}\label{class_vector_tape_tool_ab3ebbf7f718d0d2db4f9a57269100045}} 
\index{VectorTapeTool@{VectorTapeTool}!doTape@{doTape}}
\index{doTape@{doTape}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{doTape()}{doTape()}}
{\footnotesize\ttfamily int Vector\+Tape\+Tool\+::do\+Tape (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{vi,  }\item[{std\+::vector$<$ \mbox{\hyperlink{class_t_filled_region_inf}{TFilled\+Region\+Inf}} $>$ $\ast$}]{fill\+Information,  }\item[{bool}]{join\+Strokes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00665                                                                              \{}
\DoxyCodeLine{00666     \textcolor{keywordtype}{int} type;}
\DoxyCodeLine{00667     \textcolor{keywordflow}{if} (!joinStrokes)}
\DoxyCodeLine{00668       type = l2l;}
\DoxyCodeLine{00669     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00670       type = (m\_w1 == 0.0 || m\_w1 == 1.0)}
\DoxyCodeLine{00671                  ? ((m\_w2 == 0.0 || m\_w2 == 1.0) ? p2p : p2l)}
\DoxyCodeLine{00672                  : ((m\_w2 == 0.0 || m\_w2 == 1.0) ? l2p : l2l);}
\DoxyCodeLine{00673       \textcolor{keywordflow}{if} (type == l2p) \{}
\DoxyCodeLine{00674         std::swap(m\_strokeIndex1, m\_strokeIndex2);}
\DoxyCodeLine{00675         std::swap(m\_w1, m\_w2);}
\DoxyCodeLine{00676         type = p2l;}
\DoxyCodeLine{00677       \}}
\DoxyCodeLine{00678     \}}
\DoxyCodeLine{00679 }
\DoxyCodeLine{00680     \textcolor{keywordflow}{switch} (type) \{}
\DoxyCodeLine{00681     \textcolor{keywordflow}{case} p2p:}
\DoxyCodeLine{00682       joinPointToPoint(vi, fillInformation);}
\DoxyCodeLine{00683       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00684     \textcolor{keywordflow}{case} p2l:}
\DoxyCodeLine{00685       joinPointToLine(vi, fillInformation);}
\DoxyCodeLine{00686       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00687     \textcolor{keywordflow}{case} l2l:}
\DoxyCodeLine{00688       joinLineToLine(vi, fillInformation);}
\DoxyCodeLine{00689       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00690     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00691       assert(\textcolor{keyword}{false});}
\DoxyCodeLine{00692       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00693     \}}
\DoxyCodeLine{00694     \textcolor{keywordflow}{return} type;}
\DoxyCodeLine{00695   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_aaf17298c2921ce2ccdb1f09f83bf3b08}\label{class_vector_tape_tool_aaf17298c2921ce2ccdb1f09f83bf3b08}} 
\index{VectorTapeTool@{VectorTapeTool}!draw@{draw}}
\index{draw@{draw}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Draws the tool on the viewer. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a058bf656d73bf3cd63b9826cbaaf48e0}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00278                        \{}
\DoxyCodeLine{00279     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}));}
\DoxyCodeLine{00280     \textcolor{keywordflow}{if} (!m\_draw) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00281     \textcolor{keywordflow}{if} (!vi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00282 }
\DoxyCodeLine{00283     \textcolor{comment}{// TAffine viewMatrix = getViewer()-\/>getViewMatrix();}}
\DoxyCodeLine{00284     \textcolor{comment}{// glPushMatrix();}}
\DoxyCodeLine{00285     \textcolor{comment}{// tglMultMatrix(viewMatrix);}}
\DoxyCodeLine{00286     \textcolor{keywordflow}{if} (m\_type.getValue() == RECT) \{}
\DoxyCodeLine{00287       \textcolor{keywordflow}{if} (!m\_selectionRect.\mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{isEmpty}}())}
\DoxyCodeLine{00288         ToolUtils::drawRect(m\_selectionRect, TPixel::Black, 0x3F33, \textcolor{keyword}{true});}
\DoxyCodeLine{00289       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00290     \}}
\DoxyCodeLine{00291 }
\DoxyCodeLine{00292     \textcolor{keywordflow}{if} (m\_strokeIndex1 == -\/1 || m\_strokeIndex1 >= (\textcolor{keywordtype}{int})(vi-\/>getStrokeCount()))}
\DoxyCodeLine{00293       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00294     tglColor(\mbox{\hyperlink{class_t_pixel_d}{TPixelD}}(0.1, 0.9, 0.1));}
\DoxyCodeLine{00295 }
\DoxyCodeLine{00296     \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke1   = vi-\/>getStroke(m\_strokeIndex1);}
\DoxyCodeLine{00297     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} point1 = stroke1-\/>\mbox{\hyperlink{class_t_stroke_ace861e064b925c5d41a6d7381ae6ada5}{getPoint}}(m\_w1);}
\DoxyCodeLine{00298     \textcolor{comment}{// TThickPoint point1 = stroke1-\/>getControlPoint(m\_cpIndex1);}}
\DoxyCodeLine{00299 }
\DoxyCodeLine{00300     m\_pixelSize  = getPixelSize();}
\DoxyCodeLine{00301     \textcolor{keywordtype}{double} thick = std::max(6.0 * m\_pixelSize, point1.thick);}
\DoxyCodeLine{00302 }
\DoxyCodeLine{00303     tglDrawCircle(point1, thick);}
\DoxyCodeLine{00304 }
\DoxyCodeLine{00305     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} point2;}
\DoxyCodeLine{00306 }
\DoxyCodeLine{00307     \textcolor{keywordflow}{if} (m\_secondPoint) \{}
\DoxyCodeLine{00308       \textcolor{keywordflow}{if} (m\_strokeIndex2 != -\/1) \{}
\DoxyCodeLine{00309         \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke2 = vi-\/>getStroke(m\_strokeIndex2);}
\DoxyCodeLine{00310         point2           = stroke2-\/>\mbox{\hyperlink{class_t_stroke_ace861e064b925c5d41a6d7381ae6ada5}{getPoint}}(m\_w2);}
\DoxyCodeLine{00311         thick            = std::max(6.0 * m\_pixelSize, point2.thick);}
\DoxyCodeLine{00312       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00313         tglColor(\mbox{\hyperlink{class_t_pixel_d}{TPixelD}}(0.6, 0.7, 0.4));}
\DoxyCodeLine{00314         thick  = 4 * m\_pixelSize;}
\DoxyCodeLine{00315         point2 = m\_pos;}
\DoxyCodeLine{00316       \}}
\DoxyCodeLine{00317       tglDrawCircle(point2, thick);}
\DoxyCodeLine{00318       tglDrawSegment(point1, point2);}
\DoxyCodeLine{00319     \}}
\DoxyCodeLine{00320     \textcolor{comment}{// glPopMatrix();}}
\DoxyCodeLine{00321   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00276}{TTool\+::get\+Image()}}, \mbox{\hyperlink{l00236}{TStroke\+::get\+Point()}}, and \mbox{\hyperlink{class_t_rect_t_a53ce09c6112f8a019b43ad82d721a93b}{TRect\+T$<$ T $>$\+::is\+Empty()}}.

\mbox{\Hypertarget{class_vector_tape_tool_aaacebdee5d606d350ef4ffa3c198616e}\label{class_vector_tape_tool_aaacebdee5d606d350ef4ffa3c198616e}} 
\index{VectorTapeTool@{VectorTapeTool}!getCursorId@{getCursorId}}
\index{getCursorId@{getCursorId}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{getCursorId()}{getCursorId()}}
{\footnotesize\ttfamily int Vector\+Tape\+Tool\+::get\+Cursor\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Returns the type of cursor used by the tool. 

\begin{DoxySeeAlso}{See also}
For a list of cursor ids \mbox{\hyperlink{}{cursor.\+h}} 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{class_t_tool_a1768a57b8b6d1480618fd923fad15f1d}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00771                                    \{}
\DoxyCodeLine{00772     \textcolor{keywordtype}{int} ret = ToolCursor::TapeCursor;}
\DoxyCodeLine{00773     \textcolor{keywordflow}{if} (m\_type.getValue() == RECT) ret = ret | ToolCursor::Ex\_Rectangle;}
\DoxyCodeLine{00774     \textcolor{keywordflow}{if} (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876ab6d35869ac2f7cfc956d498b2089a1ff}{ToonzCheck::eBlackBg}})}
\DoxyCodeLine{00775       ret = ret | ToolCursor::Ex\_Negate;}
\DoxyCodeLine{00776     \textcolor{keywordflow}{return} ret;}
\DoxyCodeLine{00777   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00044}{Toonz\+Check\+::e\+Black\+Bg}}.

\mbox{\Hypertarget{class_vector_tape_tool_af01f85b5e349af03348b1ffd1f60227e}\label{class_vector_tape_tool_af01f85b5e349af03348b1ffd1f60227e}} 
\index{VectorTapeTool@{VectorTapeTool}!getProperties@{getProperties}}
\index{getProperties@{getProperties}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{getProperties()}{getProperties()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_property_group}{TProperty\+Group}} $\ast$ Vector\+Tape\+Tool\+::get\+Properties (\begin{DoxyParamCaption}\item[{int}]{target\+Type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00276 \{ \textcolor{keywordflow}{return} \&m\_prop; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_ab383736565059cebb7126f835474ae55}\label{class_vector_tape_tool_ab383736565059cebb7126f835474ae55}} 
\index{VectorTapeTool@{VectorTapeTool}!getToolType@{getToolType}}
\index{getToolType@{getToolType}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{getToolType()}{getToolType()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296c}{Tool\+Type}} Vector\+Tape\+Tool\+::get\+Tool\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00238 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{class_t_tool_a391f099e6530ea54c71d81c9ee39296ca01ffd66b00b05a88c02ce8ceb5da3b8b}{TTool::LevelWriteTool}}; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a90e1da814306b9572146c2ce2aa176a6}\label{class_vector_tape_tool_a90e1da814306b9572146c2ce2aa176a6}} 
\index{VectorTapeTool@{VectorTapeTool}!joinLineToLine@{joinLineToLine}}
\index{joinLineToLine@{joinLineToLine}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{joinLineToLine()}{joinLineToLine()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::join\+Line\+To\+Line (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{vi,  }\item[{std\+::vector$<$ \mbox{\hyperlink{class_t_filled_region_inf}{TFilled\+Region\+Inf}} $>$ $\ast$}]{fill\+Info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00550                                                              \{}
\DoxyCodeLine{00551     \textcolor{keywordflow}{if} (TTool::getApplication()-\/>getCurrentObject()-\/>isSpline())}
\DoxyCodeLine{00552       \textcolor{keywordflow}{return};  \textcolor{comment}{// Caanot add vectros to spline... Spline can be only one}}
\DoxyCodeLine{00553                \textcolor{comment}{// std::vector}}
\DoxyCodeLine{00554 }
\DoxyCodeLine{00555     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} p1 = vi-\/>getStroke(m\_strokeIndex1)-\/>getThickPoint(m\_w1);}
\DoxyCodeLine{00556     \mbox{\hyperlink{class_t_thick_point}{TThickPoint}} p2 = vi-\/>getStroke(m\_strokeIndex2)-\/>getThickPoint(m\_w2);}
\DoxyCodeLine{00557 }
\DoxyCodeLine{00558     UndoAutoclose *autoCloseUndo = 0;}
\DoxyCodeLine{00559     std::vector<int> v(2);}
\DoxyCodeLine{00560     v[0] = m\_strokeIndex1;}
\DoxyCodeLine{00561     v[1] = m\_strokeIndex2;}
\DoxyCodeLine{00562 }
\DoxyCodeLine{00563     \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level =}
\DoxyCodeLine{00564         TTool::getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00565     autoCloseUndo =}
\DoxyCodeLine{00566         \textcolor{keyword}{new} UndoAutoclose(level, \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}(), -\/1, -\/1, fillInfo, v);}
\DoxyCodeLine{00567 }
\DoxyCodeLine{00568     std::vector<TThickPoint> points(3);}
\DoxyCodeLine{00569     points[0]          = p1;}
\DoxyCodeLine{00570     points[1]          = 0.5 * (p1 + p2);}
\DoxyCodeLine{00571     points[2]          = p2;}
\DoxyCodeLine{00572     \mbox{\hyperlink{class_t_stroke}{TStroke}} *auxStroke = \textcolor{keyword}{new} \mbox{\hyperlink{class_t_stroke}{TStroke}}(points);}
\DoxyCodeLine{00573     auxStroke-\/>\mbox{\hyperlink{class_t_stroke_a33f59dfbed74b577700351eac8c2fc7b}{setStyle}}(TTool::getApplication()-\/>getCurrentLevelStyleIndex());}
\DoxyCodeLine{00574     auxStroke-\/>outlineOptions() =}
\DoxyCodeLine{00575         vi-\/>getStroke(m\_strokeIndex1)-\/>outlineOptions();}
\DoxyCodeLine{00576 }
\DoxyCodeLine{00577     \textcolor{keywordtype}{int} pos = vi-\/>addStrokeToGroup(auxStroke, m\_strokeIndex1);}
\DoxyCodeLine{00578     \textcolor{keywordflow}{if} (pos < 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00579     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *newStroke = vi-\/>getVIStroke(pos);}
\DoxyCodeLine{00580 }
\DoxyCodeLine{00581     autoCloseUndo-\/>m\_newStrokePos = pos;}
\DoxyCodeLine{00582     autoCloseUndo-\/>m\_newStroke    = cloneVIStroke(newStroke);}
\DoxyCodeLine{00583     autoCloseUndo-\/>m\_newStrokeId  = vi-\/>getStroke(pos)-\/>getId();}
\DoxyCodeLine{00584     vi-\/>notifyChangedStrokes(v, std::vector<TStroke *>());}
\DoxyCodeLine{00585     \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{00586     TUndoManager::manager()-\/>add(autoCloseUndo);}
\DoxyCodeLine{00587   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a9c1c56b08a11817569efcbc6d40a3bf1}\label{class_vector_tape_tool_a9c1c56b08a11817569efcbc6d40a3bf1}} 
\index{VectorTapeTool@{VectorTapeTool}!joinPointToLine@{joinPointToLine}}
\index{joinPointToLine@{joinPointToLine}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{joinPointToLine()}{joinPointToLine()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::join\+Point\+To\+Line (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{vi,  }\item[{std\+::vector$<$ \mbox{\hyperlink{class_t_filled_region_inf}{TFilled\+Region\+Inf}} $>$ $\ast$}]{fill\+Info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00511                                                               \{}
\DoxyCodeLine{00512     \mbox{\hyperlink{class_t_undo}{TUndo}} *undo                  = 0;}
\DoxyCodeLine{00513     UndoAutoclose *autoCloseUndo = 0;}
\DoxyCodeLine{00514     \textcolor{keywordflow}{if} (TTool::getApplication()-\/>getCurrentObject()-\/>isSpline())}
\DoxyCodeLine{00515       undo =}
\DoxyCodeLine{00516           \textcolor{keyword}{new} \mbox{\hyperlink{class_tool_utils_1_1_undo_path}{UndoPath}}(\mbox{\hyperlink{class_t_tool_a8716e1462da359f4902c044a79f2d40d}{getXsheet}}()-\/>getStageObject(\mbox{\hyperlink{class_t_tool_a25b57b82dfac131d9d6405e07fbd98b4}{getObjectId}}())-\/>getSpline());}
\DoxyCodeLine{00517     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00518       std::vector<int> v(2);}
\DoxyCodeLine{00519       v[0] = m\_strokeIndex1;}
\DoxyCodeLine{00520       v[1] = m\_strokeIndex2;}
\DoxyCodeLine{00521       \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level =}
\DoxyCodeLine{00522           TTool::getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00523       autoCloseUndo = \textcolor{keyword}{new} UndoAutoclose(level, \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}(), m\_strokeIndex1,}
\DoxyCodeLine{00524                                         -\/1, fillInfo, v);}
\DoxyCodeLine{00525     \}}
\DoxyCodeLine{00526 }
\DoxyCodeLine{00527     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *newStroke;}
\DoxyCodeLine{00528 }
\DoxyCodeLine{00529     newStroke = vi-\/>extendStroke(}
\DoxyCodeLine{00530         m\_strokeIndex1, vi-\/>getStroke(m\_strokeIndex2)-\/>getThickPoint(m\_w2),}
\DoxyCodeLine{00531         (m\_w1 == 0.0)}
\DoxyCodeLine{00532             ? 0}
\DoxyCodeLine{00533             : vi-\/>getStroke(m\_strokeIndex1)-\/>getControlPointCount() -\/ 1,}
\DoxyCodeLine{00534         m\_smooth.getValue());}
\DoxyCodeLine{00535 }
\DoxyCodeLine{00536     \textcolor{keywordflow}{if} (autoCloseUndo) \{}
\DoxyCodeLine{00537       autoCloseUndo-\/>m\_newStroke   = cloneVIStroke(newStroke);}
\DoxyCodeLine{00538       autoCloseUndo-\/>m\_newStrokeId = vi-\/>getStroke(m\_strokeIndex1)-\/>getId();}
\DoxyCodeLine{00539       undo                         = autoCloseUndo;}
\DoxyCodeLine{00540     \}}
\DoxyCodeLine{00541 }
\DoxyCodeLine{00542     vi-\/>notifyChangedStrokes(m\_strokeIndex1);}
\DoxyCodeLine{00543     \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{00544     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00545   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a7308205291147c0d5075b320ec89b5a2}\label{class_vector_tape_tool_a7308205291147c0d5075b320ec89b5a2}} 
\index{VectorTapeTool@{VectorTapeTool}!joinPointToPoint@{joinPointToPoint}}
\index{joinPointToPoint@{joinPointToPoint}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{joinPointToPoint()}{joinPointToPoint()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::join\+Point\+To\+Point (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{vi,  }\item[{std\+::vector$<$ \mbox{\hyperlink{class_t_filled_region_inf}{TFilled\+Region\+Inf}} $>$ $\ast$}]{fill\+Info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00470                                                                \{}
\DoxyCodeLine{00471     \textcolor{keywordtype}{int} minindex = std::min(m\_strokeIndex1, m\_strokeIndex2);}
\DoxyCodeLine{00472     \textcolor{keywordtype}{int} maxindex = std::max(m\_strokeIndex1, m\_strokeIndex2);}
\DoxyCodeLine{00473 }
\DoxyCodeLine{00474     UndoAutoclose *autoCloseUndo = 0;}
\DoxyCodeLine{00475     \mbox{\hyperlink{class_t_undo}{TUndo}} *undo                  = 0;}
\DoxyCodeLine{00476     \textcolor{keywordflow}{if} (TTool::getApplication()-\/>getCurrentObject()-\/>isSpline())}
\DoxyCodeLine{00477       undo =}
\DoxyCodeLine{00478           \textcolor{keyword}{new} \mbox{\hyperlink{class_tool_utils_1_1_undo_path}{UndoPath}}(\mbox{\hyperlink{class_t_tool_a8716e1462da359f4902c044a79f2d40d}{getXsheet}}()-\/>getStageObject(\mbox{\hyperlink{class_t_tool_a25b57b82dfac131d9d6405e07fbd98b4}{getObjectId}}())-\/>getSpline());}
\DoxyCodeLine{00479     \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00480       \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *level =}
\DoxyCodeLine{00481           TTool::getApplication()-\/>getCurrentLevel()-\/>getSimpleLevel();}
\DoxyCodeLine{00482       std::vector<int> v(1);}
\DoxyCodeLine{00483       v[0]          = minindex;}
\DoxyCodeLine{00484       autoCloseUndo = \textcolor{keyword}{new} UndoAutoclose(level, \mbox{\hyperlink{class_t_tool_ae7db6c4288b721fd95f283419883a4b2}{getCurrentFid}}(), minindex,}
\DoxyCodeLine{00485                                         maxindex, fillInfo, v);}
\DoxyCodeLine{00486     \}}
\DoxyCodeLine{00487     \mbox{\hyperlink{class_v_i_stroke}{VIStroke}} *newStroke = vi-\/>joinStroke(}
\DoxyCodeLine{00488         m\_strokeIndex1, m\_strokeIndex2,}
\DoxyCodeLine{00489         (m\_w1 == 0.0)}
\DoxyCodeLine{00490             ? 0}
\DoxyCodeLine{00491             : vi-\/>getStroke(m\_strokeIndex1)-\/>getControlPointCount() -\/ 1,}
\DoxyCodeLine{00492         (m\_w2 == 0.0)}
\DoxyCodeLine{00493             ? 0}
\DoxyCodeLine{00494             : vi-\/>getStroke(m\_strokeIndex2)-\/>getControlPointCount() -\/ 1,}
\DoxyCodeLine{00495         m\_smooth.getValue());}
\DoxyCodeLine{00496 }
\DoxyCodeLine{00497     \textcolor{keywordflow}{if} (autoCloseUndo) \{}
\DoxyCodeLine{00498       autoCloseUndo-\/>m\_newStroke   = cloneVIStroke(newStroke);}
\DoxyCodeLine{00499       autoCloseUndo-\/>m\_newStrokeId = vi-\/>getStroke(minindex)-\/>getId();}
\DoxyCodeLine{00500       undo                         = autoCloseUndo;}
\DoxyCodeLine{00501     \}}
\DoxyCodeLine{00502 }
\DoxyCodeLine{00503     vi-\/>notifyChangedStrokes(minindex);}
\DoxyCodeLine{00504     \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{00505     TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00506   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a5b5dd4c9001aedafb97861e1da411c7f}\label{class_vector_tape_tool_a5b5dd4c9001aedafb97861e1da411c7f}} 
\index{VectorTapeTool@{VectorTapeTool}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00385                                                                         \{}
\DoxyCodeLine{00386     \textcolor{keywordflow}{if} (!(\mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}})\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false})) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00387 }
\DoxyCodeLine{00388     \textcolor{keywordflow}{if} (m\_type.getValue() == RECT) \{}
\DoxyCodeLine{00389       m\_startRect = pos;}
\DoxyCodeLine{00390     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_strokeIndex1 != -\/1)}
\DoxyCodeLine{00391       m\_secondPoint = \textcolor{keyword}{true};}
\DoxyCodeLine{00392   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_aa5ff0acdcd903d4b30b4d8a75fc8dd40}\label{class_vector_tape_tool_aa5ff0acdcd903d4b30b4d8a75fc8dd40}} 
\index{VectorTapeTool@{VectorTapeTool}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00396                                                                         \{}
\DoxyCodeLine{00397     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}));}
\DoxyCodeLine{00398     \textcolor{keywordflow}{if} (!vi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00399 }
\DoxyCodeLine{00400     \textcolor{keywordflow}{if} (m\_type.getValue() == RECT) \{}
\DoxyCodeLine{00401       m\_selectionRect = \mbox{\hyperlink{class_t_rect_t}{TRectD}}(}
\DoxyCodeLine{00402           std::min(m\_startRect.x, pos.x), std::min(m\_startRect.y, pos.y),}
\DoxyCodeLine{00403           std::max(m\_startRect.x, pos.x), std::max(m\_startRect.y, pos.y));}
\DoxyCodeLine{00404       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00405       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00406     \}}
\DoxyCodeLine{00407 }
\DoxyCodeLine{00408     \textcolor{keywordflow}{if} (m\_strokeIndex1 == -\/1 || !m\_secondPoint) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00409 }
\DoxyCodeLine{00410     \textcolor{keywordtype}{double} minDistance2 = 900 * m\_pixelSize;}
\DoxyCodeLine{00411 }
\DoxyCodeLine{00412     \textcolor{keywordtype}{int} i, strokeNumber = vi-\/>getStrokeCount();}
\DoxyCodeLine{00413 }
\DoxyCodeLine{00414     \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke;}
\DoxyCodeLine{00415     \textcolor{keywordtype}{double} distance2, outW;}
\DoxyCodeLine{00416     \mbox{\hyperlink{class_t_point_t}{TPointD}} point;}
\DoxyCodeLine{00417     \textcolor{keywordtype}{int} cpMax;}
\DoxyCodeLine{00418 }
\DoxyCodeLine{00419     m\_strokeIndex2 = -\/1;}
\DoxyCodeLine{00420 }
\DoxyCodeLine{00421     \textcolor{keywordflow}{for} (i = 0; i < strokeNumber; i++) \{}
\DoxyCodeLine{00422       \textcolor{keywordflow}{if} (!vi-\/>sameGroup(m\_strokeIndex1, i) \&\&}
\DoxyCodeLine{00423           (vi-\/>isStrokeGrouped(m\_strokeIndex1) || vi-\/>isStrokeGrouped(i)))}
\DoxyCodeLine{00424         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00425       stroke = vi-\/>getStroke(i);}
\DoxyCodeLine{00426       \textcolor{keywordflow}{if} (m\_mode.getValue() != POINT2POINT) \{}
\DoxyCodeLine{00427         \textcolor{keywordflow}{if} (stroke-\/>getNearestW(pos, outW, distance2) \&\&}
\DoxyCodeLine{00428             distance2 < minDistance2) \{}
\DoxyCodeLine{00429           minDistance2   = distance2;}
\DoxyCodeLine{00430           m\_strokeIndex2 = i;}
\DoxyCodeLine{00431           \textcolor{keywordflow}{if} (areAlmostEqual(outW, 0.0, 1e-\/3))}
\DoxyCodeLine{00432             m\_w2 = 0.0;}
\DoxyCodeLine{00433           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (areAlmostEqual(outW, 1.0, 1e-\/3))}
\DoxyCodeLine{00434             m\_w2 = 1.0;}
\DoxyCodeLine{00435           \textcolor{keywordflow}{else}}
\DoxyCodeLine{00436             m\_w2 = outW;}
\DoxyCodeLine{00437         \}}
\DoxyCodeLine{00438       \}}
\DoxyCodeLine{00439 }
\DoxyCodeLine{00440       \textcolor{keywordflow}{if} (!stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}()) \{}
\DoxyCodeLine{00441         cpMax = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() -\/ 1;}
\DoxyCodeLine{00442         \textcolor{keywordflow}{if} (!(m\_strokeIndex1 == i \&\& (m\_w1 == 0.0 || cpMax < 3))) \{}
\DoxyCodeLine{00443           point = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(0);}
\DoxyCodeLine{00444           \textcolor{keywordflow}{if} ((distance2 = tdistance2(pos, point)) < minDistance2) \{}
\DoxyCodeLine{00445             minDistance2   = distance2;}
\DoxyCodeLine{00446             m\_strokeIndex2 = i;}
\DoxyCodeLine{00447             m\_w2           = 0.0;}
\DoxyCodeLine{00448           \}}
\DoxyCodeLine{00449         \}}
\DoxyCodeLine{00450 }
\DoxyCodeLine{00451         \textcolor{keywordflow}{if} (!(m\_strokeIndex1 == i \&\& (m\_w1 == 1.0 || cpMax < 3))) \{}
\DoxyCodeLine{00452           point = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(cpMax);}
\DoxyCodeLine{00453           \textcolor{keywordflow}{if} ((distance2 = tdistance2(pos, point)) < minDistance2) \{}
\DoxyCodeLine{00454             minDistance2   = distance2;}
\DoxyCodeLine{00455             m\_strokeIndex2 = i;}
\DoxyCodeLine{00456             m\_w2           = 1.0;}
\DoxyCodeLine{00457           \}}
\DoxyCodeLine{00458         \}}
\DoxyCodeLine{00459       \}}
\DoxyCodeLine{00460     \}}
\DoxyCodeLine{00461 }
\DoxyCodeLine{00462     m\_pos = pos;}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00465   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a14574ba28441c364c0df6446aa7ea68e}\label{class_vector_tape_tool_a14574ba28441c364c0df6446aa7ea68e}} 
\index{VectorTapeTool@{VectorTapeTool}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00698                                                                    \{}
\DoxyCodeLine{00699     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{true}));}
\DoxyCodeLine{00700 }
\DoxyCodeLine{00701     \textcolor{keywordflow}{if} (vi \&\& m\_type.getValue() == RECT) \{}
\DoxyCodeLine{00702       tapeRect(vi, m\_selectionRect);}
\DoxyCodeLine{00703       m\_selectionRect = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00704       m\_startRect     = \mbox{\hyperlink{class_t_point_t}{TPointD}}();}
\DoxyCodeLine{00705       \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{00706       \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00707       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00708     \}}
\DoxyCodeLine{00709 }
\DoxyCodeLine{00710     \textcolor{keywordflow}{if} (!vi || m\_strokeIndex1 == -\/1 || !m\_secondPoint || m\_strokeIndex2 == -\/1) \{}
\DoxyCodeLine{00711       m\_strokeIndex1 = -\/1;}
\DoxyCodeLine{00712       m\_strokeIndex2 = -\/1;}
\DoxyCodeLine{00713       m\_w1           = -\/1.0;}
\DoxyCodeLine{00714       m\_w2           = -\/1.0;}
\DoxyCodeLine{00715       m\_secondPoint  = \textcolor{keyword}{false};}
\DoxyCodeLine{00716       \textcolor{keywordflow}{return};}
\DoxyCodeLine{00717     \}}
\DoxyCodeLine{00718     QMutexLocker lock(vi-\/>getMutex());}
\DoxyCodeLine{00719     m\_secondPoint = \textcolor{keyword}{false};}
\DoxyCodeLine{00720     std::vector<TFilledRegionInf> *fillInformation =}
\DoxyCodeLine{00721         \textcolor{keyword}{new} std::vector<TFilledRegionInf>;}
\DoxyCodeLine{00722     ImageUtils::getFillingInformationOverlappingArea(}
\DoxyCodeLine{00723         vi, *fillInformation,}
\DoxyCodeLine{00724         vi-\/>getStroke(m\_strokeIndex1)-\/>getBBox() +}
\DoxyCodeLine{00725             vi-\/>getStroke(m\_strokeIndex2)-\/>getBBox());}
\DoxyCodeLine{00726 }
\DoxyCodeLine{00727     doTape(vi, fillInformation, m\_joinStrokes.getValue());}
\DoxyCodeLine{00728 }
\DoxyCodeLine{00729     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00730 }
\DoxyCodeLine{00731     m\_strokeIndex2 = -\/1;}
\DoxyCodeLine{00732     m\_w1           = -\/1.0;}
\DoxyCodeLine{00733     m\_w2           = -\/1.0;}
\DoxyCodeLine{00734   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a1a80d866683a566af9b8a898ed23e990}\label{class_vector_tape_tool_a1a80d866683a566af9b8a898ed23e990}} 
\index{VectorTapeTool@{VectorTapeTool}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00325                                                                    \{}
\DoxyCodeLine{00326     \mbox{\hyperlink{class_t_vector_image_p}{TVectorImageP}} vi(\mbox{\hyperlink{class_t_tool_a947d2af39fd4df397577bbf8602abfd4}{getImage}}(\textcolor{keyword}{false}));}
\DoxyCodeLine{00327     \textcolor{keywordflow}{if} (!vi) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00328 }
\DoxyCodeLine{00329     \textcolor{comment}{// BUTTA e rimetti (Dava problemi con la penna)}}
\DoxyCodeLine{00330     \textcolor{keywordflow}{if} (!m\_draw) \textcolor{keywordflow}{return};  \textcolor{comment}{// Questa riga potrebbe non essere messa}}
\DoxyCodeLine{00331     \textcolor{comment}{// m\_draw=true;   //Perche'??? Non basta dargli true in onEnter??}}
\DoxyCodeLine{00332 }
\DoxyCodeLine{00333     \textcolor{keywordflow}{if} (m\_type.getValue() == RECT) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00334 }
\DoxyCodeLine{00335     \textcolor{keywordtype}{double} minDistance2 = 10000000000.;}
\DoxyCodeLine{00336 }
\DoxyCodeLine{00337     m\_strokeIndex1 = -\/1;}
\DoxyCodeLine{00338     m\_secondPoint  = \textcolor{keyword}{false};}
\DoxyCodeLine{00339 }
\DoxyCodeLine{00340     \textcolor{keywordtype}{int} i, strokeNumber = vi-\/>getStrokeCount();}
\DoxyCodeLine{00341 }
\DoxyCodeLine{00342     \mbox{\hyperlink{class_t_stroke}{TStroke}} *stroke;}
\DoxyCodeLine{00343     \textcolor{keywordtype}{double} distance2, outW;}
\DoxyCodeLine{00344     \mbox{\hyperlink{class_t_point_t}{TPointD}} point;}
\DoxyCodeLine{00345     \textcolor{keywordtype}{int} cpMax;}
\DoxyCodeLine{00346 }
\DoxyCodeLine{00347     \textcolor{keywordflow}{for} (i = 0; i < strokeNumber; i++) \{}
\DoxyCodeLine{00348       stroke = vi-\/>getStroke(i);}
\DoxyCodeLine{00349       \textcolor{keywordflow}{if} (m\_mode.getValue() == LINE2LINE) \{}
\DoxyCodeLine{00350         \textcolor{keywordflow}{if} (stroke-\/>getNearestW(pos, outW, distance2) \&\&}
\DoxyCodeLine{00351             distance2 < minDistance2) \{}
\DoxyCodeLine{00352           minDistance2   = distance2;}
\DoxyCodeLine{00353           m\_strokeIndex1 = i;}
\DoxyCodeLine{00354           \textcolor{keywordflow}{if} (areAlmostEqual(outW, 0.0, 1e-\/3))}
\DoxyCodeLine{00355             m\_w1 = 0.0;}
\DoxyCodeLine{00356           \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (areAlmostEqual(outW, 1.0, 1e-\/3))}
\DoxyCodeLine{00357             m\_w1 = 1.0;}
\DoxyCodeLine{00358           \textcolor{keywordflow}{else}}
\DoxyCodeLine{00359             m\_w1 = outW;}
\DoxyCodeLine{00360         \}}
\DoxyCodeLine{00361       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!stroke-\/>\mbox{\hyperlink{class_t_stroke_a3565d6c34d3eb02fb1a6993ca626425c}{isSelfLoop}}()) \{}
\DoxyCodeLine{00362         point = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(0);}
\DoxyCodeLine{00363         \textcolor{keywordflow}{if} ((distance2 = tdistance2(pos, point)) < minDistance2) \{}
\DoxyCodeLine{00364           minDistance2   = distance2;}
\DoxyCodeLine{00365           m\_strokeIndex1 = i;}
\DoxyCodeLine{00366           m\_w1           = 0.0;}
\DoxyCodeLine{00367           \textcolor{comment}{// m\_cpIndex1=0;}}
\DoxyCodeLine{00368         \}}
\DoxyCodeLine{00369 }
\DoxyCodeLine{00370         cpMax = stroke-\/>\mbox{\hyperlink{class_t_stroke_a45101afd31e40d08100fdf23c89fb49e}{getControlPointCount}}() -\/ 1;}
\DoxyCodeLine{00371         point = stroke-\/>\mbox{\hyperlink{class_t_stroke_a9b60f87075b703360efe4b38097d923f}{getControlPoint}}(cpMax);}
\DoxyCodeLine{00372         \textcolor{keywordflow}{if} ((distance2 = tdistance2(pos, point)) < minDistance2) \{}
\DoxyCodeLine{00373           minDistance2   = distance2;}
\DoxyCodeLine{00374           m\_strokeIndex1 = i;}
\DoxyCodeLine{00375           m\_w1           = 1.0;}
\DoxyCodeLine{00376           \textcolor{comment}{// m\_cpIndex1=cpMax;}}
\DoxyCodeLine{00377         \}}
\DoxyCodeLine{00378       \}}
\DoxyCodeLine{00379     \}}
\DoxyCodeLine{00380     \mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{00381   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a967e65d8f525006ce127119f4ffb13de}\label{class_vector_tape_tool_a967e65d8f525006ce127119f4ffb13de}} 
\index{VectorTapeTool@{VectorTapeTool}!onActivate@{onActivate}}
\index{onActivate@{onActivate}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{onActivate()}{onActivate()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::on\+Activate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Callback invoked whenever the tool activates. 



Reimplemented from \mbox{\hyperlink{class_t_tool_ac286a2681633b4db6106596b4f54e53b}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00750                              \{}
\DoxyCodeLine{00751     \textcolor{comment}{// enable drawing if we are in a scene viewer}}
\DoxyCodeLine{00752     QWidget *focusWidget = QApplication::focusWidget();}
\DoxyCodeLine{00753     \textcolor{keywordflow}{if} (focusWidget \&\&}
\DoxyCodeLine{00754         QString(focusWidget-\/>metaObject()-\/>className()) == \textcolor{stringliteral}{"{}SceneViewer"{}})}
\DoxyCodeLine{00755       m\_draw = \textcolor{keyword}{true};}
\DoxyCodeLine{00756 }
\DoxyCodeLine{00757     \textcolor{keywordflow}{if} (!m\_firstTime) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00758 }
\DoxyCodeLine{00759     std::wstring s = ::to\_wstring(TapeMode.getValue());}
\DoxyCodeLine{00760     \textcolor{keywordflow}{if} (s != L\textcolor{stringliteral}{"{}"{}}) m\_mode.setValue(s);}
\DoxyCodeLine{00761     s = ::to\_wstring(TapeType.getValue());}
\DoxyCodeLine{00762     \textcolor{keywordflow}{if} (s != L\textcolor{stringliteral}{"{}"{}}) m\_type.setValue(s);}
\DoxyCodeLine{00763     m\_autocloseFactor.setValue(AutocloseFactor);}
\DoxyCodeLine{00764     m\_smooth.setValue(TapeSmooth ? 1 : 0);}
\DoxyCodeLine{00765     m\_joinStrokes.setValue(TapeJoinStrokes ? 1 : 0);}
\DoxyCodeLine{00766     m\_firstTime     = \textcolor{keyword}{false};}
\DoxyCodeLine{00767     m\_selectionRect = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00768     m\_startRect     = \mbox{\hyperlink{class_t_point_t}{TPointD}}();}
\DoxyCodeLine{00769   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_af22937ca6f35b2320b9cb3071ec05002}\label{class_vector_tape_tool_af22937ca6f35b2320b9cb3071ec05002}} 
\index{VectorTapeTool@{VectorTapeTool}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse entering the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_a3e775cfcd05aa3c35048b11fa40ab3e4}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00738                           \{}
\DoxyCodeLine{00739     \textcolor{comment}{//      getApplication()-\/>editImage();}}
\DoxyCodeLine{00740     m\_draw          = \textcolor{keyword}{true};}
\DoxyCodeLine{00741     m\_selectionRect = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00742     m\_startRect     = \mbox{\hyperlink{class_t_point_t}{TPointD}}();}
\DoxyCodeLine{00743   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a481764c410bba81186e8ee985bc8b161}\label{class_vector_tape_tool_a481764c410bba81186e8ee985bc8b161}} 
\index{VectorTapeTool@{VectorTapeTool}!onLeave@{onLeave}}
\index{onLeave@{onLeave}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{onLeave()}{onLeave()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::on\+Leave (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Callback for the mouse leaving the viewer area. 



Reimplemented from \mbox{\hyperlink{class_t_tool_af7fb05265a94131da081da654e271a22}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00745                           \{}
\DoxyCodeLine{00746     m\_draw = \textcolor{keyword}{false};}
\DoxyCodeLine{00747     \textcolor{comment}{// m\_strokeIndex1=-\/1;}}
\DoxyCodeLine{00748   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a5b6f17e60cb8d6dbab3a9817c14d51d8}\label{class_vector_tape_tool_a5b6f17e60cb8d6dbab3a9817c14d51d8}} 
\index{VectorTapeTool@{VectorTapeTool}!onPropertyChanged@{onPropertyChanged}}
\index{onPropertyChanged@{onPropertyChanged}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{onPropertyChanged()}{onPropertyChanged()}}
{\footnotesize\ttfamily bool Vector\+Tape\+Tool\+::on\+Property\+Changed (\begin{DoxyParamCaption}\item[{std\+::string}]{property\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

\begin{DoxyVerb} Does the tasks associated to changes in \p propertyName and returns \p
\end{DoxyVerb}
 true; Does the tasks associated to changes in {\ttfamily property\+Name} and returns {\ttfamily true}. 

Reimplemented from \mbox{\hyperlink{class_t_tool_a06694e0586f807c34b18e16341aa9ee2}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00242                                                           \{}
\DoxyCodeLine{00243     TapeMode       = ::to\_string(m\_mode.getValue());}
\DoxyCodeLine{00244     TapeSmooth     = (int)(m\_smooth.getValue());}
\DoxyCodeLine{00245     std::wstring s = m\_type.getValue();}
\DoxyCodeLine{00246     \textcolor{keywordflow}{if} (!s.empty()) TapeType = ::to\_string(s);}
\DoxyCodeLine{00247     TapeJoinStrokes = (int)(m\_joinStrokes.getValue());}
\DoxyCodeLine{00248     AutocloseFactor = (double)(m\_autocloseFactor.getValue());}
\DoxyCodeLine{00249     m\_selectionRect = \mbox{\hyperlink{class_t_rect_t}{TRectD}}();}
\DoxyCodeLine{00250     m\_startRect     = \mbox{\hyperlink{class_t_point_t}{TPointD}}();}
\DoxyCodeLine{00251 }
\DoxyCodeLine{00252     \textcolor{keywordflow}{if} (propertyName == \textcolor{stringliteral}{"{}Distance"{}} \&\&}
\DoxyCodeLine{00253         (ToonzCheck::instance()-\/>getChecks() \& \mbox{\hyperlink{class_toonz_check_add5b28b42f552cf90e3cfcde9e737876a780c15982eceeb7f1e912a5d55029cef}{ToonzCheck::eAutoclose}}))}
\DoxyCodeLine{00254       \mbox{\hyperlink{class_t_tool_abd1824e9b49705c534e0a773305294c4}{notifyImageChanged}}();}
\DoxyCodeLine{00255     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00256   \}}

\end{DoxyCode}


References \mbox{\hyperlink{l00048}{Toonz\+Check\+::e\+Autoclose}}, and \mbox{\hyperlink{l00609}{TTool\+::notify\+Image\+Changed()}}.

\mbox{\Hypertarget{class_vector_tape_tool_a4f9bdddee71fdcfa7655aa08eb0c0acb}\label{class_vector_tape_tool_a4f9bdddee71fdcfa7655aa08eb0c0acb}} 
\index{VectorTapeTool@{VectorTapeTool}!rearrangeClosingPoints@{rearrangeClosingPoints}}
\index{rearrangeClosingPoints@{rearrangeClosingPoints}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{rearrangeClosingPoints()}{rearrangeClosingPoints()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::rearrange\+Closing\+Points (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{vi,  }\item[{std\+::pair$<$ int, double $>$ \&}]{closing\+Point,  }\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00593                                                        \{}
\DoxyCodeLine{00594     \textcolor{keywordtype}{int} erasedIndex = std::max(m\_strokeIndex1, m\_strokeIndex2);}
\DoxyCodeLine{00595     \textcolor{keywordtype}{int} joinedIndex = std::min(m\_strokeIndex1, m\_strokeIndex2);}
\DoxyCodeLine{00596 }
\DoxyCodeLine{00597     \textcolor{keywordflow}{if} (closingPoint.first == joinedIndex)}
\DoxyCodeLine{00598       closingPoint.second = vi-\/>getStroke(joinedIndex)-\/>getW(p);}
\DoxyCodeLine{00599     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (closingPoint.first == erasedIndex) \{}
\DoxyCodeLine{00600       closingPoint.first  = joinedIndex;}
\DoxyCodeLine{00601       closingPoint.second = vi-\/>getStroke(joinedIndex)-\/>getW(p);}
\DoxyCodeLine{00602     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (closingPoint.first > erasedIndex)}
\DoxyCodeLine{00603       closingPoint.first-\/-\/;}
\DoxyCodeLine{00604   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_a5ccfba88776e7b67afcafb9448363967}\label{class_vector_tape_tool_a5ccfba88776e7b67afcafb9448363967}} 
\index{VectorTapeTool@{VectorTapeTool}!tapeRect@{tapeRect}}
\index{tapeRect@{tapeRect}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{tapeRect()}{tapeRect()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::tape\+Rect (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_vector_image_p}{TVector\+ImageP}} \&}]{vi,  }\item[{const \mbox{\hyperlink{class_t_rect_t}{TRectD}} \&}]{rect }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00613                                                              \{}
\DoxyCodeLine{00614     std::vector<TFilledRegionInf> *fillInformation =}
\DoxyCodeLine{00615         \textcolor{keyword}{new} std::vector<TFilledRegionInf>;}
\DoxyCodeLine{00616     ImageUtils::getFillingInformationOverlappingArea(vi, *fillInformation,}
\DoxyCodeLine{00617                                                      rect);}
\DoxyCodeLine{00618 }
\DoxyCodeLine{00619     \textcolor{keywordtype}{bool} initUndoBlock = \textcolor{keyword}{false};}
\DoxyCodeLine{00620 }
\DoxyCodeLine{00621     std::vector<std::pair<int, double>> startPoints, endPoints;}
\DoxyCodeLine{00622     getClosingPoints(rect, m\_autocloseFactor.getValue(), vi, startPoints,}
\DoxyCodeLine{00623                      endPoints);}
\DoxyCodeLine{00624 }
\DoxyCodeLine{00625     assert(startPoints.size() == endPoints.size());}
\DoxyCodeLine{00626 }
\DoxyCodeLine{00627     std::vector<TPointD> startP(startPoints.size()), endP(startPoints.size());}
\DoxyCodeLine{00628 }
\DoxyCodeLine{00629     \textcolor{keywordflow}{if} (!startPoints.empty()) \{}
\DoxyCodeLine{00630       TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00631       \textcolor{keywordflow}{for} (UINT i = 0; i < startPoints.size(); i++) \{}
\DoxyCodeLine{00632         startP[i] = vi-\/>getStroke(startPoints[i].first)}
\DoxyCodeLine{00633                         -\/>getPoint(startPoints[i].second);}
\DoxyCodeLine{00634         endP[i] =}
\DoxyCodeLine{00635             vi-\/>getStroke(endPoints[i].first)-\/>getPoint(endPoints[i].second);}
\DoxyCodeLine{00636       \}}
\DoxyCodeLine{00637     \}}
\DoxyCodeLine{00638 }
\DoxyCodeLine{00639     \textcolor{keywordflow}{for} (UINT i = 0; i < startPoints.size(); i++) \{}
\DoxyCodeLine{00640       m\_strokeIndex1 = startPoints[i].first;}
\DoxyCodeLine{00641       m\_strokeIndex2 = endPoints[i].first;}
\DoxyCodeLine{00642       m\_w1           = startPoints[i].second;}
\DoxyCodeLine{00643       m\_w2           = endPoints[i].second;}
\DoxyCodeLine{00644       \textcolor{keywordtype}{int} type       = doTape(vi, fillInformation, m\_joinStrokes.getValue());}
\DoxyCodeLine{00645       \textcolor{keywordflow}{if} (type == p2p \&\& m\_strokeIndex1 != m\_strokeIndex2) \{}
\DoxyCodeLine{00646         \textcolor{keywordflow}{for} (UINT j = i + 1; j < startPoints.size(); j++) \{}
\DoxyCodeLine{00647           rearrangeClosingPoints(vi, startPoints[j], startP[j]);}
\DoxyCodeLine{00648           rearrangeClosingPoints(vi, endPoints[j], endP[j]);}
\DoxyCodeLine{00649         \}}
\DoxyCodeLine{00650       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == p2l ||}
\DoxyCodeLine{00651                  (type == p2p \&\& m\_strokeIndex1 == m\_strokeIndex2)) \{}
\DoxyCodeLine{00652         \textcolor{keywordflow}{for} (UINT j = i + 1; j < startPoints.size(); j++) \{}
\DoxyCodeLine{00653           \textcolor{keywordflow}{if} (startPoints[j].first == m\_strokeIndex1)}
\DoxyCodeLine{00654             startPoints[j].second =}
\DoxyCodeLine{00655                 vi-\/>getStroke(m\_strokeIndex1)-\/>getW(startP[j]);}
\DoxyCodeLine{00656           \textcolor{keywordflow}{if} (endPoints[j].first == m\_strokeIndex1)}
\DoxyCodeLine{00657             endPoints[j].second = vi-\/>getStroke(m\_strokeIndex1)-\/>getW(endP[j]);}
\DoxyCodeLine{00658         \}}
\DoxyCodeLine{00659       \}}
\DoxyCodeLine{00660     \}}
\DoxyCodeLine{00661     \textcolor{keywordflow}{if} (!startPoints.empty()) TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00662   \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_vector_tape_tool_ac1ed71df15c2fe2ec56a6ab4a3f20504}\label{class_vector_tape_tool_ac1ed71df15c2fe2ec56a6ab4a3f20504}} 
\index{VectorTapeTool@{VectorTapeTool}!updateTranslation@{updateTranslation}}
\index{updateTranslation@{updateTranslation}!VectorTapeTool@{VectorTapeTool}}
\doxysubsubsection{\texorpdfstring{updateTranslation()}{updateTranslation()}}
{\footnotesize\ttfamily void Vector\+Tape\+Tool\+::update\+Translation (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_t_tool}{TTool}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00259                                     \{}
\DoxyCodeLine{00260     m\_smooth.setQStringName(tr(\textcolor{stringliteral}{"{}Smooth"{}}));}
\DoxyCodeLine{00261     m\_joinStrokes.setQStringName(tr(\textcolor{stringliteral}{"{}Join Vectors"{}}));}
\DoxyCodeLine{00262     m\_autocloseFactor.setQStringName(tr(\textcolor{stringliteral}{"{}Distance"{}}));}
\DoxyCodeLine{00263 }
\DoxyCodeLine{00264     m\_mode.setQStringName(tr(\textcolor{stringliteral}{"{}Mode:"{}}));}
\DoxyCodeLine{00265     m\_mode.setItemUIName(POINT2POINT, tr(\textcolor{stringliteral}{"{}Endpoint to Endpoint"{}}));}
\DoxyCodeLine{00266     m\_mode.setItemUIName(POINT2LINE, tr(\textcolor{stringliteral}{"{}Endpoint to Line"{}}));}
\DoxyCodeLine{00267     m\_mode.setItemUIName(LINE2LINE, tr(\textcolor{stringliteral}{"{}Line to Line"{}}));}
\DoxyCodeLine{00268 }
\DoxyCodeLine{00269     m\_type.setQStringName(tr(\textcolor{stringliteral}{"{}Type:"{}}));}
\DoxyCodeLine{00270     m\_type.setItemUIName(NORMAL, tr(\textcolor{stringliteral}{"{}Normal"{}}));}
\DoxyCodeLine{00271     m\_type.setItemUIName(RECT, tr(\textcolor{stringliteral}{"{}Rectangular"{}}));}
\DoxyCodeLine{00272   \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/vectortapetool.\+cpp\end{DoxyCompactItemize}
