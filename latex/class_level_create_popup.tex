\hypertarget{class_level_create_popup}{}\doxysection{Level\+Create\+Popup Class Reference}
\label{class_level_create_popup}\index{LevelCreatePopup@{LevelCreatePopup}}


The \mbox{\hyperlink{class_level_create_popup}{Level\+Create\+Popup}} class provides a modal dialog to create a new level.  


Inheritance diagram for Level\+Create\+Popup\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_level_create_popup}
\end{center}
\end{figure}
\doxysubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_level_create_popup_a1759ea1aaa1fb4524865c778f086fcce}{on\+Level\+Type\+Changed}} (int index)
\item 
void \mbox{\hyperlink{class_level_create_popup_abc81d3ad4f1510a534051ee2b55e9ddd}{on\+Ok\+Btn}} ()
\item 
void \mbox{\hyperlink{class_level_create_popup_a3bf30e9dd08fbcf35d4bc97e5b214437}{on\+Apply\+Button}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_level_create_popup_acb120135c860062220a57aba32b8b8c9}{set\+Size\+Widget\+Enable}} (bool is\+Enable)
\item 
int \mbox{\hyperlink{class_level_create_popup_a46f0da525486a90ec8972e6ef9552f8c}{get\+Level\+Type}} () const
\item 
void \mbox{\hyperlink{class_level_create_popup_ace64c9edaeee86c0c8f2f4d6d7e946cc}{update}} ()
\item 
bool \mbox{\hyperlink{class_level_create_popup_ad2333625e148527bc23276a2e991c24d}{apply}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_level_create_popup_a9d228eabb426df8a416bf4841961dc37}{update\+Path}} ()
\item 
void \mbox{\hyperlink{class_level_create_popup_a985b9d848b91d747e993fc958f8f009b}{next\+Name}} ()
\item 
void \mbox{\hyperlink{class_level_create_popup_ab5bded7171c0bf3bc69d89d4bf2088cb}{show\+Event}} (QShow\+Event $\ast$) override
\item 
bool \mbox{\hyperlink{class_level_create_popup_aa19cbdd9dce3521e323e3b313ae8e4a5}{level\+Exists}} (std\+::wstring level\+Name)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{class_level_create_popup}{Level\+Create\+Popup}} class provides a modal dialog to create a new level. 

\begin{DoxyVerb}         Inherits \b Dialog.
\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_level_create_popup_a03d1918d7b84fd7ce64d280823384bb4}\label{class_level_create_popup_a03d1918d7b84fd7ce64d280823384bb4}} 
\index{LevelCreatePopup@{LevelCreatePopup}!LevelCreatePopup@{LevelCreatePopup}}
\index{LevelCreatePopup@{LevelCreatePopup}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{LevelCreatePopup()}{LevelCreatePopup()}}
{\footnotesize\ttfamily Level\+Create\+Popup\+::\+Level\+Create\+Popup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00162     : \mbox{\hyperlink{class_d_v_gui_1_1_dialog}{Dialog}}(\mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>getMainWindow(), \textcolor{keyword}{true}, \textcolor{keyword}{true}, \textcolor{stringliteral}{"{}LevelCreate"{}}) \{}
\DoxyCodeLine{00163   setWindowTitle(tr(\textcolor{stringliteral}{"{}New Level"{}}));}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165   m\_nameFld     = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_line_edit}{LineEdit}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00166   m\_fromFld     = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit}{DVGui::IntLineEdit}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00167   m\_toFld       = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit}{DVGui::IntLineEdit}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00168   m\_stepFld     = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit}{DVGui::IntLineEdit}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00169   m\_incFld      = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit}{DVGui::IntLineEdit}}(\textcolor{keyword}{this});}
\DoxyCodeLine{00170   m\_levelTypeOm = \textcolor{keyword}{new} QComboBox();}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172   m\_pathFld     = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_file_field}{FileField}}(0);}
\DoxyCodeLine{00173   m\_widthLabel  = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Width:"{}}));}
\DoxyCodeLine{00174   m\_widthFld    = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_measured_double_line_edit}{DVGui::MeasuredDoubleLineEdit}}(0);}
\DoxyCodeLine{00175   m\_heightLabel = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Height:"{}}));}
\DoxyCodeLine{00176   m\_heightFld   = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_measured_double_line_edit}{DVGui::MeasuredDoubleLineEdit}}(0);}
\DoxyCodeLine{00177   m\_dpiLabel    = \textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}DPI:"{}}));}
\DoxyCodeLine{00178   m\_dpiFld      = \textcolor{keyword}{new} \mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit}{DoubleLineEdit}}(0, 66.76);}
\DoxyCodeLine{00179 }
\DoxyCodeLine{00180   QPushButton *okBtn     = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}OK"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00181   QPushButton *cancelBtn = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Cancel"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00182   QPushButton *applyBtn  = \textcolor{keyword}{new} QPushButton(tr(\textcolor{stringliteral}{"{}Apply"{}}), \textcolor{keyword}{this});}
\DoxyCodeLine{00183 }
\DoxyCodeLine{00184   \textcolor{comment}{// Exclude all character which cannot fit in a filepath (Win).}}
\DoxyCodeLine{00185   \textcolor{comment}{// Dots are also prohibited since they are internally managed by Toonz.}}
\DoxyCodeLine{00186   QRegExp rx(\textcolor{stringliteral}{"{}[\string^\(\backslash\)\(\backslash\)\(\backslash\)\(\backslash\)/:?*.\(\backslash\)"{}<>|]+"{}});}
\DoxyCodeLine{00187   m\_nameFld-\/>setValidator(\textcolor{keyword}{new} QRegExpValidator(rx, \textcolor{keyword}{this}));}
\DoxyCodeLine{00188 }
\DoxyCodeLine{00189   m\_levelTypeOm-\/>addItem(tr(\textcolor{stringliteral}{"{}Toonz Vector Level"{}}), (\textcolor{keywordtype}{int})PLI\_XSHLEVEL);}
\DoxyCodeLine{00190   m\_levelTypeOm-\/>addItem(tr(\textcolor{stringliteral}{"{}Toonz Raster Level"{}}), (\textcolor{keywordtype}{int})TZP\_XSHLEVEL);}
\DoxyCodeLine{00191   m\_levelTypeOm-\/>addItem(tr(\textcolor{stringliteral}{"{}Raster Level"{}}), (\textcolor{keywordtype}{int})OVL\_XSHLEVEL);}
\DoxyCodeLine{00192   m\_levelTypeOm-\/>addItem(tr(\textcolor{stringliteral}{"{}Scan Level"{}}), (\textcolor{keywordtype}{int})TZI\_XSHLEVEL);}
\DoxyCodeLine{00193 }
\DoxyCodeLine{00194   \textcolor{keywordflow}{if} (Preferences::instance()-\/>getUnits() == \textcolor{stringliteral}{"{}pixel"{}}) \{}
\DoxyCodeLine{00195     m\_widthFld-\/>setMeasure(\textcolor{stringliteral}{"{}camera.lx"{}});}
\DoxyCodeLine{00196     m\_heightFld-\/>setMeasure(\textcolor{stringliteral}{"{}camera.ly"{}});}
\DoxyCodeLine{00197   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00198     m\_widthFld-\/>setMeasure(\textcolor{stringliteral}{"{}level.lx"{}});}
\DoxyCodeLine{00199     m\_heightFld-\/>setMeasure(\textcolor{stringliteral}{"{}level.ly"{}});}
\DoxyCodeLine{00200   \}}
\DoxyCodeLine{00201 }
\DoxyCodeLine{00202   m\_widthFld-\/>setRange(0.1, (std::numeric\_limits<double>::max)());}
\DoxyCodeLine{00203   m\_heightFld-\/>setRange(0.1, (std::numeric\_limits<double>::max)());}
\DoxyCodeLine{00204   m\_dpiFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a0ad74194fc48551ae9d2e21bee795e5a}{setRange}}(0.1, (std::numeric\_limits<double>::max)());}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206   okBtn-\/>setDefault(\textcolor{keyword}{true});}
\DoxyCodeLine{00207 }
\DoxyCodeLine{00208   \textcolor{comment}{//-\/-\/-\/ layout}}
\DoxyCodeLine{00209   m\_topLayout-\/>setMargin(0);}
\DoxyCodeLine{00210   m\_topLayout-\/>setSpacing(0);}
\DoxyCodeLine{00211   \{}
\DoxyCodeLine{00212     QGridLayout *guiLay = \textcolor{keyword}{new} QGridLayout();}
\DoxyCodeLine{00213     guiLay-\/>setMargin(10);}
\DoxyCodeLine{00214     guiLay-\/>setVerticalSpacing(10);}
\DoxyCodeLine{00215     guiLay-\/>setHorizontalSpacing(5);}
\DoxyCodeLine{00216     \{}
\DoxyCodeLine{00217       \textcolor{comment}{// Name}}
\DoxyCodeLine{00218       guiLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Name:"{}})), 0, 0,}
\DoxyCodeLine{00219                         Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00220       guiLay-\/>addWidget(m\_nameFld, 0, 1, 1, 4);}
\DoxyCodeLine{00221 }
\DoxyCodeLine{00222       \textcolor{comment}{// From-\/To}}
\DoxyCodeLine{00223       guiLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}From:"{}})), 1, 0,}
\DoxyCodeLine{00224                         Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00225       guiLay-\/>addWidget(m\_fromFld, 1, 1);}
\DoxyCodeLine{00226       guiLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}To:"{}})), 1, 2,}
\DoxyCodeLine{00227                         Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00228       guiLay-\/>addWidget(m\_toFld, 1, 3);}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230       \textcolor{comment}{// Step-\/Inc}}
\DoxyCodeLine{00231       guiLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Step:"{}})), 2, 0,}
\DoxyCodeLine{00232                         Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00233       guiLay-\/>addWidget(m\_stepFld, 2, 1);}
\DoxyCodeLine{00234       guiLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Increment:"{}})), 2, 2,}
\DoxyCodeLine{00235                         Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00236       guiLay-\/>addWidget(m\_incFld, 2, 3);}
\DoxyCodeLine{00237 }
\DoxyCodeLine{00238       \textcolor{comment}{// Type}}
\DoxyCodeLine{00239       guiLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Type:"{}})), 3, 0,}
\DoxyCodeLine{00240                         Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00241       guiLay-\/>addWidget(m\_levelTypeOm, 3, 1, 1, 3);}
\DoxyCodeLine{00242 }
\DoxyCodeLine{00243       \textcolor{comment}{// Save In}}
\DoxyCodeLine{00244       guiLay-\/>addWidget(\textcolor{keyword}{new} QLabel(tr(\textcolor{stringliteral}{"{}Save In:"{}})), 4, 0,}
\DoxyCodeLine{00245                         Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00246       guiLay-\/>addWidget(m\_pathFld, 4, 1, 1, 4);}
\DoxyCodeLine{00247 }
\DoxyCodeLine{00248       \textcolor{comment}{// Width -\/ Height}}
\DoxyCodeLine{00249       guiLay-\/>addWidget(m\_widthLabel, 5, 0, Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00250       guiLay-\/>addWidget(m\_widthFld, 5, 1);}
\DoxyCodeLine{00251       guiLay-\/>addWidget(m\_heightLabel, 5, 2, Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00252       guiLay-\/>addWidget(m\_heightFld, 5, 3);}
\DoxyCodeLine{00253 }
\DoxyCodeLine{00254       \textcolor{comment}{// DPI}}
\DoxyCodeLine{00255       guiLay-\/>addWidget(m\_dpiLabel, 6, 0, Qt::AlignRight | Qt::AlignVCenter);}
\DoxyCodeLine{00256       guiLay-\/>addWidget(m\_dpiFld, 6, 1, 1, 3);}
\DoxyCodeLine{00257     \}}
\DoxyCodeLine{00258     guiLay-\/>setColumnStretch(0, 0);}
\DoxyCodeLine{00259     guiLay-\/>setColumnStretch(1, 0);}
\DoxyCodeLine{00260     guiLay-\/>setColumnStretch(2, 0);}
\DoxyCodeLine{00261     guiLay-\/>setColumnStretch(3, 0);}
\DoxyCodeLine{00262     guiLay-\/>setColumnStretch(4, 1);}
\DoxyCodeLine{00263 }
\DoxyCodeLine{00264     m\_topLayout-\/>addLayout(guiLay, 1);}
\DoxyCodeLine{00265   \}}
\DoxyCodeLine{00266 }
\DoxyCodeLine{00267   m\_buttonLayout-\/>setMargin(0);}
\DoxyCodeLine{00268   m\_buttonLayout-\/>setSpacing(30);}
\DoxyCodeLine{00269   \{}
\DoxyCodeLine{00270     m\_buttonLayout-\/>addStretch(1);}
\DoxyCodeLine{00271     m\_buttonLayout-\/>addWidget(okBtn, 0);}
\DoxyCodeLine{00272     m\_buttonLayout-\/>addWidget(applyBtn, 0);}
\DoxyCodeLine{00273     m\_buttonLayout-\/>addWidget(cancelBtn, 0);}
\DoxyCodeLine{00274     m\_buttonLayout-\/>addStretch(1);}
\DoxyCodeLine{00275   \}}
\DoxyCodeLine{00276 }
\DoxyCodeLine{00277   \textcolor{comment}{//-\/-\/-\/-\/ signal-\/slot connections}}
\DoxyCodeLine{00278   \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{true};}
\DoxyCodeLine{00279   ret      = ret \&\& connect(m\_levelTypeOm, SIGNAL(currentIndexChanged(\textcolor{keywordtype}{int})),}
\DoxyCodeLine{00280                        SLOT(onLevelTypeChanged(\textcolor{keywordtype}{int})));}
\DoxyCodeLine{00281   ret      = ret \&\& connect(okBtn, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(onOkBtn()));}
\DoxyCodeLine{00282   ret      = ret \&\& connect(cancelBtn, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(reject()));}
\DoxyCodeLine{00283   ret =}
\DoxyCodeLine{00284       ret \&\& connect(applyBtn, SIGNAL(clicked()), \textcolor{keyword}{this}, SLOT(onApplyButton()));}
\DoxyCodeLine{00285 }
\DoxyCodeLine{00286   setSizeWidgetEnable(\textcolor{keyword}{false});}
\DoxyCodeLine{00287 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_level_create_popup_ad2333625e148527bc23276a2e991c24d}\label{class_level_create_popup_ad2333625e148527bc23276a2e991c24d}} 
\index{LevelCreatePopup@{LevelCreatePopup}!apply@{apply}}
\index{apply@{apply}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{apply()}{apply()}}
{\footnotesize\ttfamily bool Level\+Create\+Popup\+::apply (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00423                              \{}
\DoxyCodeLine{00424   \mbox{\hyperlink{class_t_app}{TApp}} *app = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}();}
\DoxyCodeLine{00425   \textcolor{keywordtype}{int} row   = app-\/>\mbox{\hyperlink{class_t_app_a35516f8175dab3ccdf3d6d3c3e5f59ae}{getCurrentFrame}}()-\/>getFrame();}
\DoxyCodeLine{00426   \textcolor{keywordtype}{int} col   = app-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>getColumnIndex();}
\DoxyCodeLine{00427   \textcolor{keywordtype}{int} i, j;}
\DoxyCodeLine{00428 }
\DoxyCodeLine{00429   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00430   \mbox{\hyperlink{class_t_xsheet}{TXsheet}} *xsh      = scene-\/>\mbox{\hyperlink{class_toonz_scene_ae3c828e3223fd809fd59189233d0576a}{getXsheet}}();}
\DoxyCodeLine{00431 }
\DoxyCodeLine{00432   \textcolor{keywordtype}{bool} validColumn = \textcolor{keyword}{true};}
\DoxyCodeLine{00433   \textcolor{keywordflow}{if} (xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col))}
\DoxyCodeLine{00434     validColumn =}
\DoxyCodeLine{00435         xsh-\/>\mbox{\hyperlink{class_t_xsheet_a3e1a216c019a0ebdf73d95acac95d8d0}{getColumn}}(col)-\/>getColumnType() == TXshColumn::eLevelType;}
\DoxyCodeLine{00436 }
\DoxyCodeLine{00437   \textcolor{keywordtype}{int} from   = (int)m\_fromFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}();}
\DoxyCodeLine{00438   \textcolor{keywordtype}{int} to     = (int)m\_toFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}();}
\DoxyCodeLine{00439   \textcolor{keywordtype}{int} inc    = (int)m\_incFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}();}
\DoxyCodeLine{00440   \textcolor{keywordtype}{int} step   = (int)m\_stepFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_int_line_edit_a77019c5d6bce534fdd1931136a6efe95}{getValue}}();}
\DoxyCodeLine{00441   \textcolor{keywordtype}{double} w   = m\_widthFld-\/>getValue();}
\DoxyCodeLine{00442   \textcolor{keywordtype}{double} h   = m\_heightFld-\/>getValue();}
\DoxyCodeLine{00443   \textcolor{keywordtype}{double} dpi = m\_dpiFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a4cb043e4d9f7c7ffeed57a72bc10a26e}{getValue}}();}
\DoxyCodeLine{00444   \textcolor{keywordtype}{int} xres   = std::max(tround(w * dpi), 1);}
\DoxyCodeLine{00445   \textcolor{keywordtype}{int} yres   = std::max(tround(h * dpi), 1);}
\DoxyCodeLine{00446   \textcolor{keywordtype}{int} lType  = getLevelType();}
\DoxyCodeLine{00447 }
\DoxyCodeLine{00448   std::wstring levelName = m\_nameFld-\/>text().toStdWString();}
\DoxyCodeLine{00449   \textcolor{comment}{// tolgo i blanks prima e dopo}}
\DoxyCodeLine{00450 }
\DoxyCodeLine{00451   i = levelName.find\_first\_not\_of(L\textcolor{charliteral}{' '});}
\DoxyCodeLine{00452   \textcolor{keywordflow}{if} (i == (\textcolor{keywordtype}{int})std::wstring::npos)}
\DoxyCodeLine{00453     levelName = L\textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00454   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00455     \textcolor{keywordtype}{int} j = levelName.find\_last\_not\_of(L\textcolor{charliteral}{' '});}
\DoxyCodeLine{00456     assert(j != (\textcolor{keywordtype}{int})std::wstring::npos);}
\DoxyCodeLine{00457     levelName = levelName.substr(i, j -\/ i + 1);}
\DoxyCodeLine{00458   \}}
\DoxyCodeLine{00459   \textcolor{keywordflow}{if} (levelName.empty()) \{}
\DoxyCodeLine{00460     error(tr(\textcolor{stringliteral}{"{}No level name specified: please choose a valid level name"{}}));}
\DoxyCodeLine{00461     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00462   \}}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464   \textcolor{keywordflow}{if} (isReservedFileName\_message(QString::fromStdWString(levelName)))}
\DoxyCodeLine{00465     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00466 }
\DoxyCodeLine{00467   \textcolor{keywordflow}{if} (from > to) \{}
\DoxyCodeLine{00468     error(tr(\textcolor{stringliteral}{"{}Invalid frame range"{}}));}
\DoxyCodeLine{00469     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00470   \}}
\DoxyCodeLine{00471   \textcolor{keywordflow}{if} (inc <= 0) \{}
\DoxyCodeLine{00472     error(tr(\textcolor{stringliteral}{"{}Invalid increment value"{}}));}
\DoxyCodeLine{00473     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00474   \}}
\DoxyCodeLine{00475   \textcolor{keywordflow}{if} (step <= 0) \{}
\DoxyCodeLine{00476     error(tr(\textcolor{stringliteral}{"{}Invalid step value"{}}));}
\DoxyCodeLine{00477     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00478   \}}
\DoxyCodeLine{00479 }
\DoxyCodeLine{00480   \textcolor{keywordtype}{int} numFrames = step * (((to -\/ from) / inc) + 1);}
\DoxyCodeLine{00481 }
\DoxyCodeLine{00482   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *existingLevel = scene-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}()-\/>getLevel(levelName);}
\DoxyCodeLine{00483   \textcolor{keywordflow}{if} (existingLevel) \{}
\DoxyCodeLine{00484     \textcolor{comment}{// check if the existing level can be removed}}
\DoxyCodeLine{00485     \textcolor{keywordflow}{if} (!Preferences::instance()-\/>isAutoRemoveUnusedLevelsEnabled() ||}
\DoxyCodeLine{00486         scene-\/>\mbox{\hyperlink{class_toonz_scene_ae2cbc582144c92adc5076cd5f556c95a}{getChildStack}}()-\/>\mbox{\hyperlink{class_child_stack_acc3acc547e134c1571b01ec5e75e9705}{getTopXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_a2fbaf0d4ff704a20a333f605609c64a1}{isLevelUsed}}(existingLevel)) \{}
\DoxyCodeLine{00487       error(}
\DoxyCodeLine{00488           tr(\textcolor{stringliteral}{"{}The level name specified is already used: please choose a "{}}}
\DoxyCodeLine{00489              \textcolor{stringliteral}{"{}different level name"{}}));}
\DoxyCodeLine{00490       m\_nameFld-\/>selectAll();}
\DoxyCodeLine{00491       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00492     \}}
\DoxyCodeLine{00493     \textcolor{comment}{// if the exitingLevel is not null, it will be removed afterwards}}
\DoxyCodeLine{00494   \}}
\DoxyCodeLine{00495 }
\DoxyCodeLine{00496   \mbox{\hyperlink{class_t_file_path}{TFilePath}} parentDir(m\_pathFld-\/>getPath().toStdWString());}
\DoxyCodeLine{00497   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp =}
\DoxyCodeLine{00498       scene-\/>\mbox{\hyperlink{class_toonz_scene_a3f7940ad6794546ba923304231820f00}{getDefaultLevelPath}}(lType, levelName).\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(parentDir);}
\DoxyCodeLine{00499 }
\DoxyCodeLine{00500   \mbox{\hyperlink{class_t_file_path}{TFilePath}} actualFp = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(fp);}
\DoxyCodeLine{00501   \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(actualFp)) \{}
\DoxyCodeLine{00502     error(}
\DoxyCodeLine{00503         tr(\textcolor{stringliteral}{"{}The level name specified is already used: please choose a "{}}}
\DoxyCodeLine{00504            \textcolor{stringliteral}{"{}different level name"{}}));}
\DoxyCodeLine{00505     m\_nameFld-\/>selectAll();}
\DoxyCodeLine{00506     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00507   \}}
\DoxyCodeLine{00508   parentDir = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(parentDir);}
\DoxyCodeLine{00509   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_t_file_status}{TFileStatus}}(parentDir).doesExist()) \{}
\DoxyCodeLine{00510     QString question;}
\DoxyCodeLine{00511     \textcolor{comment}{/*question = "{}Folder "{} +toQString(parentDir) +}}
\DoxyCodeLine{00512 \textcolor{comment}{                                                     "{} doesn't exist.\(\backslash\)nDo you}}
\DoxyCodeLine{00513 \textcolor{comment}{       want to create it?"{};*/}}
\DoxyCodeLine{00514     question = tr(\textcolor{stringliteral}{"{}Folder \%1 doesn't exist.\(\backslash\)nDo you want to create it?"{}})}
\DoxyCodeLine{00515                    .arg(toQString(parentDir));}
\DoxyCodeLine{00516     \textcolor{keywordtype}{int} ret = DVGui::MsgBox(question, QObject::tr(\textcolor{stringliteral}{"{}Yes"{}}), QObject::tr(\textcolor{stringliteral}{"{}No"{}}));}
\DoxyCodeLine{00517     \textcolor{keywordflow}{if} (ret == 0 || ret == 2) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00518     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{00519       TSystem::mkDir(parentDir);}
\DoxyCodeLine{00520       DvDirModel::instance()-\/>refreshFolder(parentDir.getParentDir());}
\DoxyCodeLine{00521     \} \textcolor{keywordflow}{catch} (...) \{}
\DoxyCodeLine{00522       error(tr(\textcolor{stringliteral}{"{}Unable to create"{}}) + toQString(parentDir));}
\DoxyCodeLine{00523       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00524     \}}
\DoxyCodeLine{00525   \}}
\DoxyCodeLine{00526 }
\DoxyCodeLine{00527   TUndoManager::manager()-\/>beginBlock();}
\DoxyCodeLine{00528 }
\DoxyCodeLine{00529   \textcolor{comment}{// existingLevel is not nullptr only if the level is unused AND}}
\DoxyCodeLine{00530   \textcolor{comment}{// the preference option AutoRemoveUnusedLevels is ON}}
\DoxyCodeLine{00531   \textcolor{keywordflow}{if} (existingLevel) \{}
\DoxyCodeLine{00532     \textcolor{keywordtype}{bool} ok = LevelCmd::removeLevelFromCast(existingLevel, scene, \textcolor{keyword}{false});}
\DoxyCodeLine{00533     assert(ok);}
\DoxyCodeLine{00534     DVGui::info(QObject::tr(\textcolor{stringliteral}{"{}Removed unused level \%1 from the scene cast. "{}}}
\DoxyCodeLine{00535                             \textcolor{stringliteral}{"{}(This behavior can be disabled in Preferences.)"{}})}
\DoxyCodeLine{00536                     .arg(QString::fromStdWString(levelName)));}
\DoxyCodeLine{00537   \}}
\DoxyCodeLine{00538 }
\DoxyCodeLine{00539   \textcolor{comment}{/*-\/-\/ これからLevelを配置しようとしているセルが空いているかどうかのチェック}}
\DoxyCodeLine{00540 \textcolor{comment}{   * -\/-\/*/}}
\DoxyCodeLine{00541   \textcolor{keywordtype}{bool} areColumnsShifted = \textcolor{keyword}{false};}
\DoxyCodeLine{00542   \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell          = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(row, col);}
\DoxyCodeLine{00543   \textcolor{keywordtype}{bool} isInRange         = \textcolor{keyword}{true};}
\DoxyCodeLine{00544   \textcolor{keywordflow}{if} (col < 0)}
\DoxyCodeLine{00545     isInRange = \textcolor{keyword}{false};}
\DoxyCodeLine{00546   \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00547     \textcolor{keywordflow}{for} (i = row; i < row + numFrames; i++) \{}
\DoxyCodeLine{00548       \textcolor{keywordflow}{if} (!cell.\mbox{\hyperlink{class_t_xsh_cell_a5d20229e7bcd19957b123959e58a833e}{isEmpty}}()) \{}
\DoxyCodeLine{00549         isInRange = \textcolor{keyword}{false};}
\DoxyCodeLine{00550         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00551       \}}
\DoxyCodeLine{00552       cell = xsh-\/>\mbox{\hyperlink{class_t_xsheet_a1ae81edf03bc7527176c84478c350f57}{getCell}}(i, col);}
\DoxyCodeLine{00553     \}}
\DoxyCodeLine{00554   \}}
\DoxyCodeLine{00555   \textcolor{keywordflow}{if} (!validColumn) \{}
\DoxyCodeLine{00556     isInRange = \textcolor{keyword}{false};}
\DoxyCodeLine{00557   \}}
\DoxyCodeLine{00558 }
\DoxyCodeLine{00559   \textcolor{comment}{/*-\/-\/ 別のLevelに占有されていた場合、Columnを1つ右に移動 -\/-\/*/}}
\DoxyCodeLine{00560   \textcolor{keywordflow}{if} (!isInRange) \{}
\DoxyCodeLine{00561     col += 1;}
\DoxyCodeLine{00562     \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_a1e294e7cff300851d12a8c3d196943f6}{getCurrentColumn}}()-\/>setColumnIndex(col);}
\DoxyCodeLine{00563     areColumnsShifted = \textcolor{keyword}{true};}
\DoxyCodeLine{00564     xsh-\/>\mbox{\hyperlink{class_t_xsheet_a5ea42662e27e52ef36ce77b4a5d8e06c}{insertColumn}}(col);}
\DoxyCodeLine{00565   \}}
\DoxyCodeLine{00566 }
\DoxyCodeLine{00567   CreateLevelUndo *undo =}
\DoxyCodeLine{00568       \textcolor{keyword}{new} CreateLevelUndo(row, col, numFrames, step, areColumnsShifted);}
\DoxyCodeLine{00569   TUndoManager::manager()-\/>add(undo);}
\DoxyCodeLine{00570 }
\DoxyCodeLine{00571   \mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level =}
\DoxyCodeLine{00572       scene-\/>\mbox{\hyperlink{class_toonz_scene_ac8791183db4daa28bdffdd40e15c3b9e}{createNewLevel}}(lType, levelName, \mbox{\hyperlink{class_t_dimension_t}{TDimension}}(), 0, fp);}
\DoxyCodeLine{00573   \mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *sl = \textcolor{keyword}{dynamic\_cast<}\mbox{\hyperlink{class_t_xsh_simple_level}{TXshSimpleLevel}} *\textcolor{keyword}{>}(level);}
\DoxyCodeLine{00574 }
\DoxyCodeLine{00575   assert(sl);}
\DoxyCodeLine{00576   sl-\/>setPath(fp, \textcolor{keyword}{true});}
\DoxyCodeLine{00577   \textcolor{keywordflow}{if} (lType == TZP\_XSHLEVEL || lType == OVL\_XSHLEVEL) \{}
\DoxyCodeLine{00578     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_aef6e555a773c2f69d2089dc9c009f8be}{setDpiPolicy}}(LevelProperties::DP\_ImageDpi);}
\DoxyCodeLine{00579     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_abdaea012fce05b1617350a174790f473}{setDpi}}(dpi);}
\DoxyCodeLine{00580     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a62b744354e8acc21f75e19fec84bbe6c}{setImageDpi}}(\mbox{\hyperlink{class_t_point_t}{TPointD}}(dpi, dpi));}
\DoxyCodeLine{00581     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_ad412dd5c3a6ae3ff20a480dc728b26d2}{getProperties}}()-\/>\mbox{\hyperlink{class_level_properties_a9dd72acd3e3fd85e3d44c6b44a8f9ff4}{setImageRes}}(\mbox{\hyperlink{class_t_dimension_t}{TDimension}}(xres, yres));}
\DoxyCodeLine{00582   \}}
\DoxyCodeLine{00583 }
\DoxyCodeLine{00584   \textcolor{keywordflow}{for} (i = from; i <= to; i += inc) \{}
\DoxyCodeLine{00585     \mbox{\hyperlink{class_t_frame_id}{TFrameId}} fid(i);}
\DoxyCodeLine{00586     \mbox{\hyperlink{class_t_xsh_cell}{TXshCell}} cell(sl, fid);}
\DoxyCodeLine{00587     \textcolor{keywordflow}{if} (lType == PLI\_XSHLEVEL)}
\DoxyCodeLine{00588       sl-\/>setFrame(fid, \textcolor{keyword}{new} \mbox{\hyperlink{class_t_vector_image}{TVectorImage}}());}
\DoxyCodeLine{00589     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lType == TZP\_XSHLEVEL) \{}
\DoxyCodeLine{00590       \mbox{\hyperlink{class_t_raster_p_t}{TRasterCM32P}} raster(xres, yres);}
\DoxyCodeLine{00591       raster-\/>fill(\mbox{\hyperlink{class_t_pixel_c_m32}{TPixelCM32}}());}
\DoxyCodeLine{00592       \mbox{\hyperlink{class_t_toonz_image_p}{TToonzImageP}} ti(raster, \mbox{\hyperlink{class_t_rect_t}{TRect}}());}
\DoxyCodeLine{00593       ti-\/>setDpi(dpi, dpi);}
\DoxyCodeLine{00594       sl-\/>setFrame(fid, ti);}
\DoxyCodeLine{00595       ti-\/>setSavebox(\mbox{\hyperlink{class_t_rect_t}{TRect}}(0, 0, xres -\/ 1, yres -\/ 1));}
\DoxyCodeLine{00596     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lType == OVL\_XSHLEVEL) \{}
\DoxyCodeLine{00597       \mbox{\hyperlink{class_t_raster_p_t}{TRaster32P}} raster(xres, yres);}
\DoxyCodeLine{00598       raster-\/>clear();}
\DoxyCodeLine{00599       \mbox{\hyperlink{class_t_raster_image_p}{TRasterImageP}} ri(raster);}
\DoxyCodeLine{00600       ri-\/>setDpi(dpi, dpi);}
\DoxyCodeLine{00601       sl-\/>setFrame(fid, ri);}
\DoxyCodeLine{00602     \}}
\DoxyCodeLine{00603     \textcolor{keywordflow}{for} (j = 0; j < step; j++) xsh-\/>setCell(row++, col, cell);}
\DoxyCodeLine{00604   \}}
\DoxyCodeLine{00605 }
\DoxyCodeLine{00606   \textcolor{keywordflow}{if} (lType == TZP\_XSHLEVEL || lType == OVL\_XSHLEVEL) \{}
\DoxyCodeLine{00607     sl-\/>\mbox{\hyperlink{class_t_xsh_simple_level_a5ceff3b4f997fbe62be18948fc893404}{save}}(fp);}
\DoxyCodeLine{00608     DvDirModel::instance()-\/>refreshFolder(fp.\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}());}
\DoxyCodeLine{00609   \}}
\DoxyCodeLine{00610 }
\DoxyCodeLine{00611   undo-\/>onAdd(sl);}
\DoxyCodeLine{00612 }
\DoxyCodeLine{00613   TUndoManager::manager()-\/>endBlock();}
\DoxyCodeLine{00614 }
\DoxyCodeLine{00615   app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifySceneChanged();}
\DoxyCodeLine{00616   app-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>notifyCastChange();}
\DoxyCodeLine{00617   app-\/>\mbox{\hyperlink{class_t_app_a13f509e753824cb0500787f68bb51a09}{getCurrentXsheet}}()-\/>notifyXsheetChanged();}
\DoxyCodeLine{00618 }
\DoxyCodeLine{00619   \textcolor{comment}{// Cambia l'immagine corrente ma non cambiano ne' il frame ne' la colonna}}
\DoxyCodeLine{00620   \textcolor{comment}{// corrente}}
\DoxyCodeLine{00621   \textcolor{comment}{// (entrambi notificano il cambiamento dell'immagine al tool).}}
\DoxyCodeLine{00622   \textcolor{comment}{// devo verfificare che sia settato il tool giusto.}}
\DoxyCodeLine{00623   app-\/>\mbox{\hyperlink{class_t_app_ad70b447aff489792cfc3dbac7150a540}{getCurrentTool}}()-\/>onImageChanged(}
\DoxyCodeLine{00624       (\mbox{\hyperlink{class_t_image_a40e9e1054d038f48639e85b1825094c1}{TImage::Type}})app-\/>\mbox{\hyperlink{class_t_app_a45713935f77f415f7bff62db71f2adbe}{getCurrentImageType}}());}
\DoxyCodeLine{00625   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00626 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_a46f0da525486a90ec8972e6ef9552f8c}\label{class_level_create_popup_a46f0da525486a90ec8972e6ef9552f8c}} 
\index{LevelCreatePopup@{LevelCreatePopup}!getLevelType@{getLevelType}}
\index{getLevelType@{getLevelType}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{getLevelType()}{getLevelType()}}
{\footnotesize\ttfamily int Level\+Create\+Popup\+::get\+Level\+Type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}


\begin{DoxyCode}{0}
\DoxyCodeLine{00378                                          \{}
\DoxyCodeLine{00379   \textcolor{keywordflow}{return} m\_levelTypeOm-\/>currentData().toInt();}
\DoxyCodeLine{00380 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_aa19cbdd9dce3521e323e3b313ae8e4a5}\label{class_level_create_popup_aa19cbdd9dce3521e323e3b313ae8e4a5}} 
\index{LevelCreatePopup@{LevelCreatePopup}!levelExists@{levelExists}}
\index{levelExists@{levelExists}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{levelExists()}{levelExists()}}
{\footnotesize\ttfamily bool Level\+Create\+Popup\+::level\+Exists (\begin{DoxyParamCaption}\item[{std\+::wstring}]{level\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00321                                                        \{}
\DoxyCodeLine{00322   \mbox{\hyperlink{class_t_file_path}{TFilePath}} fp;}
\DoxyCodeLine{00323   \mbox{\hyperlink{class_t_file_path}{TFilePath}} actualFp;}
\DoxyCodeLine{00324   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00325   \mbox{\hyperlink{class_t_level_set}{TLevelSet}} *levelSet =}
\DoxyCodeLine{00326       \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_ac1a8bf0d2cec4f59c87b0001991264b5}{getLevelSet}}();}
\DoxyCodeLine{00327 }
\DoxyCodeLine{00328   \mbox{\hyperlink{class_t_file_path}{TFilePath}} parentDir(m\_pathFld-\/>getPath().toStdWString());}
\DoxyCodeLine{00329   fp = scene-\/>\mbox{\hyperlink{class_toonz_scene_a3f7940ad6794546ba923304231820f00}{getDefaultLevelPath}}(getLevelType(), levelName)}
\DoxyCodeLine{00330            .\mbox{\hyperlink{class_t_file_path_a09d12d68c4264183e0268dde6f592b2e}{withParentDir}}(parentDir);}
\DoxyCodeLine{00331   actualFp = scene-\/>\mbox{\hyperlink{class_toonz_scene_aa2ed57dfbae7f8cf02a4abe47ed533c6}{decodeFilePath}}(fp);}
\DoxyCodeLine{00332 }
\DoxyCodeLine{00333   \textcolor{keywordflow}{if} (TSystem::doesExistFileOrLevel(actualFp))}
\DoxyCodeLine{00334     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00335   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_t_xsh_level}{TXshLevel}} *level = levelSet-\/>getLevel(levelName)) \{}
\DoxyCodeLine{00336     \textcolor{comment}{// even if the level exists in the scene cast, it can be replaced if it is}}
\DoxyCodeLine{00337     \textcolor{comment}{// unused}}
\DoxyCodeLine{00338     \textcolor{keywordflow}{if} (Preferences::instance()-\/>isAutoRemoveUnusedLevelsEnabled() \&\&}
\DoxyCodeLine{00339         !scene-\/>\mbox{\hyperlink{class_toonz_scene_ae2cbc582144c92adc5076cd5f556c95a}{getChildStack}}()-\/>\mbox{\hyperlink{class_child_stack_acc3acc547e134c1571b01ec5e75e9705}{getTopXsheet}}()-\/>\mbox{\hyperlink{class_t_xsheet_a2fbaf0d4ff704a20a333f605609c64a1}{isLevelUsed}}(level))}
\DoxyCodeLine{00340       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00341     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00342       \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00343   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00344     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00345 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_a985b9d848b91d747e993fc958f8f009b}\label{class_level_create_popup_a985b9d848b91d747e993fc958f8f009b}} 
\index{LevelCreatePopup@{LevelCreatePopup}!nextName@{nextName}}
\index{nextName@{nextName}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{nextName()}{nextName()}}
{\footnotesize\ttfamily void Level\+Create\+Popup\+::next\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00300                                 \{}
\DoxyCodeLine{00301   \textcolor{keyword}{const} std::unique\_ptr<NameBuilder> nameBuilder(NameBuilder::getBuilder(L\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{00302 }
\DoxyCodeLine{00303   std::wstring levelName = L\textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00304 }
\DoxyCodeLine{00305   \textcolor{comment}{// Select a different unique level name in case it already exists (either in}}
\DoxyCodeLine{00306   \textcolor{comment}{// scene or on disk)}}
\DoxyCodeLine{00307 }
\DoxyCodeLine{00308   \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{00309     levelName = nameBuilder-\/>getNext();}
\DoxyCodeLine{00310 }
\DoxyCodeLine{00311     \textcolor{keywordflow}{if} (levelExists(levelName)) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00312 }
\DoxyCodeLine{00313     \textcolor{keywordflow}{break};}
\DoxyCodeLine{00314   \}}
\DoxyCodeLine{00315 }
\DoxyCodeLine{00316   m\_nameFld-\/>setText(QString::fromStdWString(levelName));}
\DoxyCodeLine{00317 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_a3bf30e9dd08fbcf35d4bc97e5b214437}\label{class_level_create_popup_a3bf30e9dd08fbcf35d4bc97e5b214437}} 
\index{LevelCreatePopup@{LevelCreatePopup}!onApplyButton@{onApplyButton}}
\index{onApplyButton@{onApplyButton}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{onApplyButton}{onApplyButton}}
{\footnotesize\ttfamily void Level\+Create\+Popup\+::on\+Apply\+Button (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00414                                      \{}
\DoxyCodeLine{00415   \textcolor{keywordflow}{if} (apply()) \{}
\DoxyCodeLine{00416     nextName();}
\DoxyCodeLine{00417   \}}
\DoxyCodeLine{00418   m\_nameFld-\/>setFocus();}
\DoxyCodeLine{00419 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_a1759ea1aaa1fb4524865c778f086fcce}\label{class_level_create_popup_a1759ea1aaa1fb4524865c778f086fcce}} 
\index{LevelCreatePopup@{LevelCreatePopup}!onLevelTypeChanged@{onLevelTypeChanged}}
\index{onLevelTypeChanged@{onLevelTypeChanged}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{onLevelTypeChanged}{onLevelTypeChanged}}
{\footnotesize\ttfamily void Level\+Create\+Popup\+::on\+Level\+Type\+Changed (\begin{DoxyParamCaption}\item[{int}]{index }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00384                                                    \{}
\DoxyCodeLine{00385   \textcolor{keywordtype}{int} type = m\_levelTypeOm-\/>itemData(index).toInt();}
\DoxyCodeLine{00386   \textcolor{keywordflow}{if} (type == OVL\_XSHLEVEL || type == TZP\_XSHLEVEL)}
\DoxyCodeLine{00387     setSizeWidgetEnable(\textcolor{keyword}{true});}
\DoxyCodeLine{00388   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00389     setSizeWidgetEnable(\textcolor{keyword}{false});}
\DoxyCodeLine{00390   updatePath();}
\DoxyCodeLine{00391 }
\DoxyCodeLine{00392   std::wstring levelName = m\_nameFld-\/>text().toStdWString();}
\DoxyCodeLine{00393   \textcolor{comment}{// check if the name already exists or if it is a 1 letter name}}
\DoxyCodeLine{00394   \textcolor{comment}{// one letter names are most likely created automatically so}}
\DoxyCodeLine{00395   \textcolor{comment}{// this makes sure that automatically created names}}
\DoxyCodeLine{00396   \textcolor{comment}{// don't skip a letter.}}
\DoxyCodeLine{00397   \textcolor{keywordflow}{if} (levelExists(levelName) || levelName.length() == 1) \{}
\DoxyCodeLine{00398     nextName();}
\DoxyCodeLine{00399   \}}
\DoxyCodeLine{00400   m\_nameFld-\/>setFocus();}
\DoxyCodeLine{00401 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_abc81d3ad4f1510a534051ee2b55e9ddd}\label{class_level_create_popup_abc81d3ad4f1510a534051ee2b55e9ddd}} 
\index{LevelCreatePopup@{LevelCreatePopup}!onOkBtn@{onOkBtn}}
\index{onOkBtn@{onOkBtn}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{onOkBtn}{onOkBtn}}
{\footnotesize\ttfamily void Level\+Create\+Popup\+::on\+Ok\+Btn (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00405                                \{}
\DoxyCodeLine{00406   \textcolor{keywordflow}{if} (apply())}
\DoxyCodeLine{00407     close();}
\DoxyCodeLine{00408   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00409     m\_nameFld-\/>setFocus();}
\DoxyCodeLine{00410 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_acb120135c860062220a57aba32b8b8c9}\label{class_level_create_popup_acb120135c860062220a57aba32b8b8c9}} 
\index{LevelCreatePopup@{LevelCreatePopup}!setSizeWidgetEnable@{setSizeWidgetEnable}}
\index{setSizeWidgetEnable@{setSizeWidgetEnable}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{setSizeWidgetEnable()}{setSizeWidgetEnable()}}
{\footnotesize\ttfamily void Level\+Create\+Popup\+::set\+Size\+Widget\+Enable (\begin{DoxyParamCaption}\item[{bool}]{is\+Enable }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00367                                                         \{}
\DoxyCodeLine{00368   m\_widthLabel-\/>setEnabled(isEnable);}
\DoxyCodeLine{00369   m\_heightLabel-\/>setEnabled(isEnable);}
\DoxyCodeLine{00370   m\_widthFld-\/>setEnabled(isEnable);}
\DoxyCodeLine{00371   m\_heightFld-\/>setEnabled(isEnable);}
\DoxyCodeLine{00372   m\_dpiLabel-\/>setEnabled(isEnable);}
\DoxyCodeLine{00373   m\_dpiFld-\/>setEnabled(isEnable);}
\DoxyCodeLine{00374 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_ab5bded7171c0bf3bc69d89d4bf2088cb}\label{class_level_create_popup_ab5bded7171c0bf3bc69d89d4bf2088cb}} 
\index{LevelCreatePopup@{LevelCreatePopup}!showEvent@{showEvent}}
\index{showEvent@{showEvent}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{showEvent()}{showEvent()}}
{\footnotesize\ttfamily void Level\+Create\+Popup\+::show\+Event (\begin{DoxyParamCaption}\item[{QShow\+Event $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00348                                              \{}
\DoxyCodeLine{00349   update();}
\DoxyCodeLine{00350   nextName();}
\DoxyCodeLine{00351   m\_nameFld-\/>setFocus();}
\DoxyCodeLine{00352   \textcolor{keywordflow}{if} (Preferences::instance()-\/>getUnits() == \textcolor{stringliteral}{"{}pixel"{}}) \{}
\DoxyCodeLine{00353     m\_dpiFld-\/>hide();}
\DoxyCodeLine{00354     m\_dpiLabel-\/>hide();}
\DoxyCodeLine{00355     m\_widthFld-\/>setDecimals(0);}
\DoxyCodeLine{00356     m\_heightFld-\/>setDecimals(0);}
\DoxyCodeLine{00357   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00358     m\_dpiFld-\/>show();}
\DoxyCodeLine{00359     m\_dpiLabel-\/>show();}
\DoxyCodeLine{00360     m\_widthFld-\/>setDecimals(4);}
\DoxyCodeLine{00361     m\_heightFld-\/>setDecimals(4);}
\DoxyCodeLine{00362   \}}
\DoxyCodeLine{00363 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_ace64c9edaeee86c0c8f2f4d6d7e946cc}\label{class_level_create_popup_ace64c9edaeee86c0c8f2f4d6d7e946cc}} 
\index{LevelCreatePopup@{LevelCreatePopup}!update@{update}}
\index{update@{update}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void Level\+Create\+Popup\+::update (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00630                               \{}
\DoxyCodeLine{00631   updatePath();}
\DoxyCodeLine{00632   \mbox{\hyperlink{class_preferences}{Preferences}} *pref = Preferences::instance();}
\DoxyCodeLine{00633   \textcolor{keywordflow}{if} (pref-\/>getUnits() == \textcolor{stringliteral}{"{}pixel"{}}) \{}
\DoxyCodeLine{00634     m\_widthFld-\/>setMeasure(\textcolor{stringliteral}{"{}camera.lx"{}});}
\DoxyCodeLine{00635     m\_heightFld-\/>setMeasure(\textcolor{stringliteral}{"{}camera.ly"{}});}
\DoxyCodeLine{00636   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00637     m\_widthFld-\/>setMeasure(\textcolor{stringliteral}{"{}level.lx"{}});}
\DoxyCodeLine{00638     m\_heightFld-\/>setMeasure(\textcolor{stringliteral}{"{}level.ly"{}});}
\DoxyCodeLine{00639   \}}
\DoxyCodeLine{00640   \textcolor{keywordflow}{if} (pref-\/>isNewLevelSizeToCameraSizeEnabled()) \{}
\DoxyCodeLine{00641     \mbox{\hyperlink{class_t_camera}{TCamera}} *currCamera =}
\DoxyCodeLine{00642         \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene()-\/>\mbox{\hyperlink{class_toonz_scene_a750b5ab623ccec744013b0c83bf20abc}{getCurrentCamera}}();}
\DoxyCodeLine{00643     \mbox{\hyperlink{class_t_dimension_t}{TDimensionD}} camSize = currCamera-\/>\mbox{\hyperlink{class_t_camera_a6f561eca912177c2150b3e57816f02f6}{getSize}}();}
\DoxyCodeLine{00644     m\_widthFld-\/>setValue(camSize.lx);}
\DoxyCodeLine{00645     m\_heightFld-\/>setValue(camSize.ly);}
\DoxyCodeLine{00646     m\_dpiFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(currCamera-\/>\mbox{\hyperlink{class_t_camera_adf45510b5dc53f6481308ef489fbd5a9}{getDpi}}().x);}
\DoxyCodeLine{00647   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00648     m\_widthFld-\/>setValue(pref-\/>getDefLevelWidth());}
\DoxyCodeLine{00649     m\_heightFld-\/>setValue(pref-\/>getDefLevelHeight());}
\DoxyCodeLine{00650     m\_dpiFld-\/>\mbox{\hyperlink{class_d_v_gui_1_1_double_line_edit_a7d777640f0e092fcccc84976e72e2e5f}{setValue}}(pref-\/>getDefLevelDpi());}
\DoxyCodeLine{00651   \}}
\DoxyCodeLine{00652 }
\DoxyCodeLine{00653   \textcolor{keywordtype}{int} levelType = pref-\/>getDefLevelType();}
\DoxyCodeLine{00654   \textcolor{keywordtype}{int} index     = m\_levelTypeOm-\/>findData(levelType);}
\DoxyCodeLine{00655   \textcolor{keywordflow}{if} (index >= 0) m\_levelTypeOm-\/>setCurrentIndex(index);}
\DoxyCodeLine{00656 }
\DoxyCodeLine{00657   \textcolor{comment}{/*}}
\DoxyCodeLine{00658 \textcolor{comment}{(old behaviour)}}
\DoxyCodeLine{00659 \textcolor{comment}{TCamera* camera = scene-\/>getCurrentCamera();}}
\DoxyCodeLine{00660 \textcolor{comment}{  TDimensionD cameraSize = camera-\/>getSize();}}
\DoxyCodeLine{00661 \textcolor{comment}{  m\_widthFld-\/>setValue(cameraSize.lx);}}
\DoxyCodeLine{00662 \textcolor{comment}{  m\_heightFld-\/>setValue(cameraSize.ly);}}
\DoxyCodeLine{00663 \textcolor{comment}{if(camera-\/>isXPrevalence())}}
\DoxyCodeLine{00664 \textcolor{comment}{m\_dpiFld-\/>setValue(camera-\/>getDpi().x);}}
\DoxyCodeLine{00665 \textcolor{comment}{else}}
\DoxyCodeLine{00666 \textcolor{comment}{m\_dpiFld-\/>setValue(camera-\/>getDpi().y);}}
\DoxyCodeLine{00667 \textcolor{comment}{*/}}
\DoxyCodeLine{00668 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_level_create_popup_a9d228eabb426df8a416bf4841961dc37}\label{class_level_create_popup_a9d228eabb426df8a416bf4841961dc37}} 
\index{LevelCreatePopup@{LevelCreatePopup}!updatePath@{updatePath}}
\index{updatePath@{updatePath}!LevelCreatePopup@{LevelCreatePopup}}
\doxysubsubsection{\texorpdfstring{updatePath()}{updatePath()}}
{\footnotesize\ttfamily void Level\+Create\+Popup\+::update\+Path (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00291                                   \{}
\DoxyCodeLine{00292   \mbox{\hyperlink{class_toonz_scene}{ToonzScene}} *scene = \mbox{\hyperlink{class_t_app_a24088f8647d5d9447fcec6b9b9bbf9eb}{TApp::instance}}()-\/>\mbox{\hyperlink{class_t_app_abbbf1fae564e9e510826eda4f6637d20}{getCurrentScene}}()-\/>getScene();}
\DoxyCodeLine{00293   \mbox{\hyperlink{class_t_file_path}{TFilePath}} defaultPath;}
\DoxyCodeLine{00294   defaultPath = scene-\/>\mbox{\hyperlink{class_toonz_scene_a3f7940ad6794546ba923304231820f00}{getDefaultLevelPath}}(getLevelType()).\mbox{\hyperlink{class_t_file_path_a1f5014e9c396bc2268820c19bc15657d}{getParentDir}}();}
\DoxyCodeLine{00295   m\_pathFld-\/>setPath(toQString(defaultPath));}
\DoxyCodeLine{00296 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/levelcreatepopup.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/levelcreatepopup.\+cpp\end{DoxyCompactItemize}
