\hypertarget{class_tracker}{}\doxysection{Tracker Class Reference}
\label{class_tracker}\index{Tracker@{Tracker}}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_tracker_a0c94eaba282aafe907d5c71017f5ebfa}{Tracker}} (double threshold, double sensitivity, int active\+Background, int manage\+Occlusion, int variation\+Window, int frame\+Start, int frames\+Number)
\item 
bool \mbox{\hyperlink{class_tracker_a04b777535a71dfce50a0f8089b992b3b}{track\+Current\+Frame}} ()
\item 
int \mbox{\hyperlink{class_tracker_a4480ba499150a0538c7a9e84d869fc73}{get\+Frames\+Number}} ()
\item 
int \mbox{\hyperlink{class_tracker_a07a4c1f2d9a01afcd20f434ae26c8e0c}{get\+Start\+Frame\+Index}} ()
\item 
QString \mbox{\hyperlink{class_tracker_aecc27fcbfd590969f8d6e385c51e6c5d}{get\+Last\+Error}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_tracker_a0c94eaba282aafe907d5c71017f5ebfa}\label{class_tracker_a0c94eaba282aafe907d5c71017f5ebfa}} 
\index{Tracker@{Tracker}!Tracker@{Tracker}}
\index{Tracker@{Tracker}!Tracker@{Tracker}}
\doxysubsubsection{\texorpdfstring{Tracker()}{Tracker()}}
{\footnotesize\ttfamily Tracker\+::\+Tracker (\begin{DoxyParamCaption}\item[{double}]{threshold,  }\item[{double}]{sensitivity,  }\item[{int}]{active\+Background,  }\item[{int}]{manage\+Occlusion,  }\item[{int}]{variation\+Window,  }\item[{int}]{frame\+Start,  }\item[{int}]{frames\+Number }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00288     : m\_affine() \{}
\DoxyCodeLine{00289   m\_threshold        = threshold;}
\DoxyCodeLine{00290   m\_sensitivity      = sensitivity;}
\DoxyCodeLine{00291   m\_activeBackground = activeBackground;}
\DoxyCodeLine{00292   m\_manageOcclusion  = manageOcclusion;}
\DoxyCodeLine{00293   m\_variationWindow  = variationWindow;}
\DoxyCodeLine{00294   m\_indexFrameStart  = frameStart;}
\DoxyCodeLine{00295   m\_framesNumber     = framesNumber;}
\DoxyCodeLine{00296   m\_processor        = \textcolor{keyword}{new} \mbox{\hyperlink{class_dummy_processor}{DummyProcessor}}();}
\DoxyCodeLine{00297 }
\DoxyCodeLine{00298   m\_processor-\/>setActive(\textcolor{keyword}{false});}
\DoxyCodeLine{00299   m\_lastErrorCode = 0;}
\DoxyCodeLine{00300   setup();}
\DoxyCodeLine{00301 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_a0ed1e23312cfe7fcfe5f2ac2abd69163}\label{class_tracker_a0ed1e23312cfe7fcfe5f2ac2abd69163}} 
\index{Tracker@{Tracker}!````~Tracker@{$\sim$Tracker}}
\index{````~Tracker@{$\sim$Tracker}!Tracker@{Tracker}}
\doxysubsubsection{\texorpdfstring{$\sim$Tracker()}{~Tracker()}}
{\footnotesize\ttfamily Tracker\+::$\sim$\+Tracker (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00305                   \{}
\DoxyCodeLine{00306   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00307   \textcolor{keywordflow}{for} (i = 0; i < m\_trackerCount; i++) \textcolor{keyword}{delete} m\_pObjectTracker[i];}
\DoxyCodeLine{00308 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_tracker_a4480ba499150a0538c7a9e84d869fc73}\label{class_tracker_a4480ba499150a0538c7a9e84d869fc73}} 
\index{Tracker@{Tracker}!getFramesNumber@{getFramesNumber}}
\index{getFramesNumber@{getFramesNumber}!Tracker@{Tracker}}
\doxysubsubsection{\texorpdfstring{getFramesNumber()}{getFramesNumber()}}
{\footnotesize\ttfamily int Tracker\+::get\+Frames\+Number (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00123 \{ \textcolor{keywordflow}{return} m\_framesNumber; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_aecc27fcbfd590969f8d6e385c51e6c5d}\label{class_tracker_aecc27fcbfd590969f8d6e385c51e6c5d}} 
\index{Tracker@{Tracker}!getLastError@{getLastError}}
\index{getLastError@{getLastError}!Tracker@{Tracker}}
\doxysubsubsection{\texorpdfstring{getLastError()}{getLastError()}}
{\footnotesize\ttfamily QString Tracker\+::get\+Last\+Error (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00125 \{ \textcolor{keywordflow}{return} getErrorMessage(m\_lastErrorCode); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_a07a4c1f2d9a01afcd20f434ae26c8e0c}\label{class_tracker_a07a4c1f2d9a01afcd20f434ae26c8e0c}} 
\index{Tracker@{Tracker}!getStartFrameIndex@{getStartFrameIndex}}
\index{getStartFrameIndex@{getStartFrameIndex}!Tracker@{Tracker}}
\doxysubsubsection{\texorpdfstring{getStartFrameIndex()}{getStartFrameIndex()}}
{\footnotesize\ttfamily int Tracker\+::get\+Start\+Frame\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00124 \{ \textcolor{keywordflow}{return} m\_indexFrameStart; \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_tracker_a04b777535a71dfce50a0f8089b992b3b}\label{class_tracker_a04b777535a71dfce50a0f8089b992b3b}} 
\index{Tracker@{Tracker}!trackCurrentFrame@{trackCurrentFrame}}
\index{trackCurrentFrame@{trackCurrentFrame}!Tracker@{Tracker}}
\doxysubsubsection{\texorpdfstring{trackCurrentFrame()}{trackCurrentFrame()}}
{\footnotesize\ttfamily bool Tracker\+::track\+Current\+Frame (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00637                                 \{}
\DoxyCodeLine{00638   m\_raster\_prev = m\_raster;}
\DoxyCodeLine{00639 }
\DoxyCodeLine{00640   \textcolor{comment}{// update Current Frame;}}
\DoxyCodeLine{00641   m\_raster = loadFrame(m\_currentFrame, m\_affine);}
\DoxyCodeLine{00642   \textcolor{keywordflow}{if} (!m\_raster) \{}
\DoxyCodeLine{00643     m\_lastErrorCode = 1;}
\DoxyCodeLine{00644     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00645   \}}
\DoxyCodeLine{00646   m\_processor-\/>\mbox{\hyperlink{class_dummy_processor_a9eed75ee83daf4fca989385be38bdff2}{process}}(m\_raster);}
\DoxyCodeLine{00647   \textcolor{keywordtype}{short} app1 = 0;}
\DoxyCodeLine{00648   app1       = m\_numobjactive;}
\DoxyCodeLine{00649 }
\DoxyCodeLine{00650   \textcolor{comment}{// control active object}}
\DoxyCodeLine{00651   \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{00652   \textcolor{keywordflow}{for} (i = m\_numobjactive; (i < m\_trackerCount); i++) \{}
\DoxyCodeLine{00653     \textcolor{keywordflow}{if} (m\_num == m\_numstart[m\_numobjactive])}
\DoxyCodeLine{00654       m\_numobjactive++;}
\DoxyCodeLine{00655     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00656       \textcolor{keywordflow}{break};}
\DoxyCodeLine{00657   \}}
\DoxyCodeLine{00658 }
\DoxyCodeLine{00659   \textcolor{keywordflow}{for} (i = 0; i < app1; i++) \{}
\DoxyCodeLine{00660     \textcolor{comment}{// tracking old objects}}
\DoxyCodeLine{00661     \textcolor{keywordflow}{if} (m\_pObjectTracker[i]-\/>track)}
\DoxyCodeLine{00662       m\_pObjectTracker[i]-\/>ObjeckTrackerHandlerByUser(\&m\_raster);}
\DoxyCodeLine{00663     \textcolor{keywordtype}{float} dist\_temp;}
\DoxyCodeLine{00664     dist\_temp = m\_pObjectTracker[i]-\/>Matching(\&m\_raster, \&m\_raster\_template[i]);}
\DoxyCodeLine{00665     \textcolor{keywordflow}{if} ((dist\_temp < m\_sensitivity) \&\& (m\_pObjectTracker[i]-\/>track)) \{}
\DoxyCodeLine{00666       m\_raster\_template[i] = m\_raster;}
\DoxyCodeLine{00667       m\_pObjectTracker[i]-\/>updateTemp();}
\DoxyCodeLine{00668     \}}
\DoxyCodeLine{00669   \}}
\DoxyCodeLine{00670   \textcolor{comment}{// update neighbours}}
\DoxyCodeLine{00671   \textcolor{keywordflow}{for} (i = 0; i < app1; i++) \{}
\DoxyCodeLine{00672     m\_pObjectTracker[i]-\/>DistanceReset();}
\DoxyCodeLine{00673     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < app1; k++) \{}
\DoxyCodeLine{00674       \textcolor{keywordflow}{if} ((m\_pObjectTracker[k]-\/>track) \&\& (i != k) \&\&}
\DoxyCodeLine{00675           (m\_pObjectTracker[i]-\/>objID == m\_pObjectTracker[k]-\/>objID)) \{}
\DoxyCodeLine{00676         \mbox{\hyperlink{struct_n_e_i_g_h_b_o_u_r}{NEIGHBOUR}} position = m\_pObjectTracker[k]-\/>GetPosition();}
\DoxyCodeLine{00677         m\_pObjectTracker[i]-\/>DistanceAndUpdate(position);}
\DoxyCodeLine{00678         \textcolor{keywordflow}{if} (!m\_pObjectTracker[i]-\/>GetInit()) \{}
\DoxyCodeLine{00679           m\_pObjectTracker[i]-\/>SetInitials(m\_pObjectTracker[i]-\/>GetPosition());}
\DoxyCodeLine{00680         \}}
\DoxyCodeLine{00681       \}}
\DoxyCodeLine{00682     \}}
\DoxyCodeLine{00683     m\_pObjectTracker[i]-\/>SetInit(\textcolor{keyword}{true});}
\DoxyCodeLine{00684   \}}
\DoxyCodeLine{00685   \mbox{\hyperlink{struct_predict3_d_1_1_point}{Predict3D::Point}} current[30], initials[30];}
\DoxyCodeLine{00686   \textcolor{keywordtype}{bool} visible[30];}
\DoxyCodeLine{00687   \textcolor{comment}{// datiPredict<<endl<<"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/"{}<<endl<<endl;}}
\DoxyCodeLine{00688   \textcolor{keywordflow}{for} (i = 0; i < app1; i++) \{}
\DoxyCodeLine{00689     visible[i]         = m\_pObjectTracker[i]-\/>track;}
\DoxyCodeLine{00690     initials[i]        = m\_pObjectTracker[i]-\/>GetInitials();}
\DoxyCodeLine{00691     \mbox{\hyperlink{struct_n_e_i_g_h_b_o_u_r}{NEIGHBOUR}} position = m\_pObjectTracker[i]-\/>GetPosition();}
\DoxyCodeLine{00692     current[i].x       = position.X;}
\DoxyCodeLine{00693     current[i].y       = position.Y;}
\DoxyCodeLine{00694   \}}
\DoxyCodeLine{00695   \textcolor{keywordtype}{int} k\_dist;}
\DoxyCodeLine{00696   \textcolor{keywordflow}{for} (i = 0; i < app1; i++) \{}
\DoxyCodeLine{00697     \textcolor{keywordflow}{if} (m\_pObjectTracker[i]-\/>GetVisibility() == \textcolor{stringliteral}{"{}WARNING"{}}) \{}
\DoxyCodeLine{00698       \textcolor{keywordflow}{if} (Predict3D::Predict(app1, initials, current, visible)) \{}
\DoxyCodeLine{00699         k\_dist             = m\_pObjectTracker[i]-\/>GetKDist();}
\DoxyCodeLine{00700         \mbox{\hyperlink{struct_n_e_i_g_h_b_o_u_r}{NEIGHBOUR}} position = m\_pObjectTracker[i]-\/>GetPosition();}
\DoxyCodeLine{00701         m\_pObjectTracker[i]-\/>SetPosition(}
\DoxyCodeLine{00702             (k\_dist * (current[i].x) + (1 -\/ k\_dist) * (position.X)),}
\DoxyCodeLine{00703             (k\_dist * (current[i].y) + (1 -\/ k\_dist) * (position.Y)));}
\DoxyCodeLine{00704       \}}
\DoxyCodeLine{00705     \}}
\DoxyCodeLine{00706     \textcolor{comment}{// Set position by neighbours}}
\DoxyCodeLine{00707     \textcolor{keywordflow}{if} (!m\_pObjectTracker[i]-\/>track) \{}
\DoxyCodeLine{00708       \textcolor{keywordflow}{if} (Predict3D::Predict(app1, initials, current, visible)) \{}
\DoxyCodeLine{00709         m\_pObjectTracker[i]-\/>SetPosition(current[i].x, current[i].y);}
\DoxyCodeLine{00710       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00711         m\_pObjectTracker[i]-\/>SetVisibility(\textcolor{stringliteral}{"{}LOST"{}});}
\DoxyCodeLine{00712       \}}
\DoxyCodeLine{00713     \}}
\DoxyCodeLine{00714     \textcolor{keywordtype}{short} objectId = m\_pObjectTracker[i]-\/>getId();}
\DoxyCodeLine{00715     \textcolor{keywordflow}{if} (objectId != m\_oldObjectId) \{}
\DoxyCodeLine{00716       m\_trackerRegionIndex = 0;}
\DoxyCodeLine{00717       m\_oldObjectId        = objectId;}
\DoxyCodeLine{00718     \}}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720     \textcolor{keywordtype}{double} globalx = m\_rasterOrigin.x + m\_pObjectTracker[i]-\/>GetPosition().X;}
\DoxyCodeLine{00721     \textcolor{keywordtype}{double} globaly = m\_rasterOrigin.y -\/ m\_pObjectTracker[i]-\/>GetPosition().Y;}
\DoxyCodeLine{00722 }
\DoxyCodeLine{00723     \mbox{\hyperlink{class_hook}{Hook}} *hook =}
\DoxyCodeLine{00724         m\_trackerObjectsSet-\/>getObject(objectId)-\/>getHook(m\_trackerRegionIndex);}
\DoxyCodeLine{00725     hook-\/>setAPos(getFidFromFrame(m\_currentFrame),}
\DoxyCodeLine{00726                   m\_affine.\mbox{\hyperlink{class_t_affine_a570529b96b1ec5abc711aaa9aac09ff9}{inv}}() * \mbox{\hyperlink{class_t_point_t}{TPointD}}(globalx, globaly));}
\DoxyCodeLine{00727     m\_trackerRegionIndex++;}
\DoxyCodeLine{00728     \textcolor{keywordflow}{if} (m\_trackerRegionIndex >=}
\DoxyCodeLine{00729         m\_trackerObjectsSet-\/>getObject(objectId)-\/>getHooksCount()) \{}
\DoxyCodeLine{00730       m\_trackerRegionIndex = 0;}
\DoxyCodeLine{00731     \}}
\DoxyCodeLine{00732   \}}
\DoxyCodeLine{00733 }
\DoxyCodeLine{00734   \textcolor{comment}{// tracking new objects}}
\DoxyCodeLine{00735   \textcolor{keywordflow}{for} (i = app1; i < m\_numobjactive; i++) \{}
\DoxyCodeLine{00736     m\_pObjectTracker[i]-\/>ObjeckTrackerHandlerByUser(\&m\_raster);}
\DoxyCodeLine{00737     m\_raster\_template[i] = m\_raster;}
\DoxyCodeLine{00738   \}}
\DoxyCodeLine{00739 }
\DoxyCodeLine{00740   ++m\_currentFrame;}
\DoxyCodeLine{00741   ++m\_num;}
\DoxyCodeLine{00742   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00743 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/toonz/trackerpopup.\+h\item 
E\+:/opentoonz/toonz/sources/toonz/trackerpopup.\+cpp\end{DoxyCompactItemize}
