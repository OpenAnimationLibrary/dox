\hypertarget{class_ellipse_primitive}{}\doxysection{Ellipse\+Primitive Class Reference}
\label{class_ellipse_primitive}\index{EllipsePrimitive@{EllipsePrimitive}}
Inheritance diagram for Ellipse\+Primitive\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_ellipse_primitive}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_ellipse_primitive_a521d17fc0436aeb3f4b1a7f7b7d92aa3}{Ellipse\+Primitive}} (\mbox{\hyperlink{class_primitive_param}{Primitive\+Param}} $\ast$param, \mbox{\hyperlink{class_geometric_tool}{Geometric\+Tool}} $\ast$tool, bool reaster\+Tool)
\item 
std\+::string \mbox{\hyperlink{class_ellipse_primitive_aa1b636bdc4ba651ecbb8ec0612d7aa7c}{get\+Name}} () const override
\item 
void \mbox{\hyperlink{class_ellipse_primitive_a72c2abd51b9a31ac9aaa9feb4eb545d0}{draw}} () override
\item 
void \mbox{\hyperlink{class_ellipse_primitive_a12e61e00a1dad47ea3487649929a612e}{left\+Button\+Down}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_ellipse_primitive_a78dd9e70ef3aeb2c88888d1f7789f988}{left\+Button\+Drag}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&real\+Pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
\mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ \mbox{\hyperlink{class_ellipse_primitive_a3a601a7a5c534ed7e81dbe9f6a789f66}{make\+Stroke}} () const override
\item 
void \mbox{\hyperlink{class_ellipse_primitive_ad9807a15cfcdf110b9409e4a11f03504}{left\+Button\+Up}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&) override
\item 
void \mbox{\hyperlink{class_ellipse_primitive_a780d1184d1b61a50d3b5b1ae807fc8aa}{mouse\+Move}} (const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&pos, const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&e) override
\item 
void \mbox{\hyperlink{class_ellipse_primitive_a1f81b693690a61ebbce6e131cd1c81d0}{on\+Enter}} () override
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_ellipse_primitive_a521d17fc0436aeb3f4b1a7f7b7d92aa3}\label{class_ellipse_primitive_a521d17fc0436aeb3f4b1a7f7b7d92aa3}} 
\index{EllipsePrimitive@{EllipsePrimitive}!EllipsePrimitive@{EllipsePrimitive}}
\index{EllipsePrimitive@{EllipsePrimitive}!EllipsePrimitive@{EllipsePrimitive}}
\doxysubsubsection{\texorpdfstring{EllipsePrimitive()}{EllipsePrimitive()}}
{\footnotesize\ttfamily Ellipse\+Primitive\+::\+Ellipse\+Primitive (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_primitive_param}{Primitive\+Param}} $\ast$}]{param,  }\item[{\mbox{\hyperlink{class_geometric_tool}{Geometric\+Tool}} $\ast$}]{tool,  }\item[{bool}]{reaster\+Tool }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00806       : \mbox{\hyperlink{class_primitive}{Primitive}}(param, tool, reasterTool) \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_ellipse_primitive_a72c2abd51b9a31ac9aaa9feb4eb545d0}\label{class_ellipse_primitive_a72c2abd51b9a31ac9aaa9feb4eb545d0}} 
\index{EllipsePrimitive@{EllipsePrimitive}!draw@{draw}}
\index{draw@{draw}!EllipsePrimitive@{EllipsePrimitive}}
\doxysubsubsection{\texorpdfstring{draw()}{draw()}}
{\footnotesize\ttfamily void Ellipse\+Primitive\+::draw (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02340                             \{}
\DoxyCodeLine{02341   drawSnap();}
\DoxyCodeLine{02342   \textcolor{keywordflow}{if} (m\_isEditing || m\_isPrompting ||}
\DoxyCodeLine{02343       areAlmostEqual(m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, m\_selectingRect.x1) ||}
\DoxyCodeLine{02344       areAlmostEqual(m\_selectingRect.y0, m\_selectingRect.y1)) \{}
\DoxyCodeLine{02345     tglColor(m\_isEditing ? m\_color : TPixel32::Green);}
\DoxyCodeLine{02346     \mbox{\hyperlink{class_t_point_t}{TPointD}} centre = \mbox{\hyperlink{class_t_point_t}{TPointD}}((m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} + m\_selectingRect.x1) * 0.5,}
\DoxyCodeLine{02347                              (m\_selectingRect.y0 + m\_selectingRect.y1) * 0.5);}
\DoxyCodeLine{02348 }
\DoxyCodeLine{02349     glPushMatrix();}
\DoxyCodeLine{02350     tglMultMatrix(\mbox{\hyperlink{class_t_scale}{TScale}}(centre, m\_selectingRect.x1 -\/ m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}},}
\DoxyCodeLine{02351                          m\_selectingRect.y1 -\/ m\_selectingRect.y0));}
\DoxyCodeLine{02352     tglDrawCircle(centre, 0.5);}
\DoxyCodeLine{02353 }
\DoxyCodeLine{02354     glPopMatrix();}
\DoxyCodeLine{02355     drawRect(m\_selectingRect, m\_color, 0x5555, \textcolor{keyword}{true});}
\DoxyCodeLine{02356   \}}
\DoxyCodeLine{02357 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ellipse_primitive_aa1b636bdc4ba651ecbb8ec0612d7aa7c}\label{class_ellipse_primitive_aa1b636bdc4ba651ecbb8ec0612d7aa7c}} 
\index{EllipsePrimitive@{EllipsePrimitive}!getName@{getName}}
\index{getName@{getName}!EllipsePrimitive@{EllipsePrimitive}}
\doxysubsubsection{\texorpdfstring{getName()}{getName()}}
{\footnotesize\ttfamily std\+::string Ellipse\+Primitive\+::get\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00808                                      \{}
\DoxyCodeLine{00809     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Ellipse"{}};}
\DoxyCodeLine{00810   \}  \textcolor{comment}{// W\_ToolOptions\_ShapeEllipse"{};\}}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ellipse_primitive_a12e61e00a1dad47ea3487649929a612e}\label{class_ellipse_primitive_a12e61e00a1dad47ea3487649929a612e}} 
\index{EllipsePrimitive@{EllipsePrimitive}!leftButtonDown@{leftButtonDown}}
\index{leftButtonDown@{leftButtonDown}!EllipsePrimitive@{EllipsePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonDown()}{leftButtonDown()}}
{\footnotesize\ttfamily void Ellipse\+Primitive\+::left\+Button\+Down (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02361                                                                              \{}
\DoxyCodeLine{02362   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{02363   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02364   \mbox{\hyperlink{class_t_point_t}{TPointD}} newPos     = getSnap(pos);}
\DoxyCodeLine{02365   m\_startPoint       = newPos;}
\DoxyCodeLine{02366   m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = newPos.x;}
\DoxyCodeLine{02367   m\_selectingRect.y0 = newPos.y;}
\DoxyCodeLine{02368   m\_selectingRect.x1 = newPos.x;}
\DoxyCodeLine{02369   m\_selectingRect.y1 = newPos.y;}
\DoxyCodeLine{02370 }
\DoxyCodeLine{02371   \textcolor{keywordflow}{if} (app-\/>getCurrentObject()-\/>isSpline()) \{}
\DoxyCodeLine{02372     m\_isEditing = \textcolor{keyword}{true};}
\DoxyCodeLine{02373     m\_color     = TPixel32::Red;}
\DoxyCodeLine{02374   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02375     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = app-\/>getCurrentLevelStyle();}
\DoxyCodeLine{02376     \textcolor{keywordflow}{if} (style) \{}
\DoxyCodeLine{02377       m\_isEditing = style-\/>\mbox{\hyperlink{class_t_color_style_ad30252c2cfc4e9d5d09b954d74b97b00}{isStrokeStyle}}();}
\DoxyCodeLine{02378       m\_color     = style-\/>\mbox{\hyperlink{class_t_color_style_af5907c6146db5067fcf000edeb8e403b}{getAverageColor}}();}
\DoxyCodeLine{02379     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02380       m\_isEditing = \textcolor{keyword}{false};}
\DoxyCodeLine{02381       m\_color     = TPixel32::Black;}
\DoxyCodeLine{02382     \}}
\DoxyCodeLine{02383   \}}
\DoxyCodeLine{02384 }
\DoxyCodeLine{02385   \textcolor{keywordflow}{if} (!m\_isEditing) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02386 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ellipse_primitive_a78dd9e70ef3aeb2c88888d1f7789f988}\label{class_ellipse_primitive_a78dd9e70ef3aeb2c88888d1f7789f988}} 
\index{EllipsePrimitive@{EllipsePrimitive}!leftButtonDrag@{leftButtonDrag}}
\index{leftButtonDrag@{leftButtonDrag}!EllipsePrimitive@{EllipsePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonDrag()}{leftButtonDrag()}}
{\footnotesize\ttfamily void Ellipse\+Primitive\+::left\+Button\+Drag (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{real\+Pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02391                                                             \{}
\DoxyCodeLine{02392   \textcolor{keywordflow}{if} (!m\_isEditing) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02393 }
\DoxyCodeLine{02394   \mbox{\hyperlink{class_t_point_t}{TPointD}} pos;}
\DoxyCodeLine{02395   \textcolor{keywordflow}{if} (e.isShiftPressed()) \{}
\DoxyCodeLine{02396     \textcolor{keywordtype}{double} distance = tdistance(realPos, m\_startPoint) * M\_SQRT1\_2;}
\DoxyCodeLine{02397     pos.x           = (realPos.x > m\_startPoint.x) ? m\_startPoint.x + distance}
\DoxyCodeLine{02398                                                    : m\_startPoint.x -\/ distance;}
\DoxyCodeLine{02399     pos.y           = (realPos.y > m\_startPoint.y) ? m\_startPoint.y + distance}
\DoxyCodeLine{02400                                                    : m\_startPoint.y -\/ distance;}
\DoxyCodeLine{02401   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02402     pos = calculateSnap(realPos);}
\DoxyCodeLine{02403     pos = checkGuideSnapping(realPos);}
\DoxyCodeLine{02404   \}}
\DoxyCodeLine{02405   m\_pos = pos;}
\DoxyCodeLine{02406 }
\DoxyCodeLine{02407   m\_selectingRect.x1 = pos.x;}
\DoxyCodeLine{02408   m\_selectingRect.y1 = pos.y;}
\DoxyCodeLine{02409   \textcolor{keywordflow}{if} (!e.isAltPressed()) \{}
\DoxyCodeLine{02410     m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = m\_startPoint.x;}
\DoxyCodeLine{02411     m\_selectingRect.y0 = m\_startPoint.y;}
\DoxyCodeLine{02412   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02413     m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} = m\_startPoint.x + m\_startPoint.x -\/ pos.x;}
\DoxyCodeLine{02414     m\_selectingRect.y0 = m\_startPoint.y + m\_startPoint.y -\/ pos.y;}
\DoxyCodeLine{02415   \}}
\DoxyCodeLine{02416 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ellipse_primitive_ad9807a15cfcdf110b9409e4a11f03504}\label{class_ellipse_primitive_ad9807a15cfcdf110b9409e4a11f03504}} 
\index{EllipsePrimitive@{EllipsePrimitive}!leftButtonUp@{leftButtonUp}}
\index{leftButtonUp@{leftButtonUp}!EllipsePrimitive@{EllipsePrimitive}}
\doxysubsubsection{\texorpdfstring{leftButtonUp()}{leftButtonUp()}}
{\footnotesize\ttfamily void Ellipse\+Primitive\+::left\+Button\+Up (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02435                                                                            \{}
\DoxyCodeLine{02436   \textcolor{keywordflow}{if} (!m\_isEditing) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02437   m\_isEditing = \textcolor{keyword}{false};}
\DoxyCodeLine{02438 }
\DoxyCodeLine{02439   m\_tool-\/>addStroke();}
\DoxyCodeLine{02440 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ellipse_primitive_a3a601a7a5c534ed7e81dbe9f6a789f66}\label{class_ellipse_primitive_a3a601a7a5c534ed7e81dbe9f6a789f66}} 
\index{EllipsePrimitive@{EllipsePrimitive}!makeStroke@{makeStroke}}
\index{makeStroke@{makeStroke}!EllipsePrimitive@{EllipsePrimitive}}
\doxysubsubsection{\texorpdfstring{makeStroke()}{makeStroke()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_t_stroke}{TStroke}} $\ast$ Ellipse\+Primitive\+::make\+Stroke (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Implements \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02420                                             \{}
\DoxyCodeLine{02421   \textcolor{keywordflow}{if} (areAlmostEqual(m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}}, m\_selectingRect.x1) ||}
\DoxyCodeLine{02422       areAlmostEqual(m\_selectingRect.y0, m\_selectingRect.y1))}
\DoxyCodeLine{02423     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{02424 }
\DoxyCodeLine{02425   \textcolor{keywordflow}{return} makeEllipticStroke(}
\DoxyCodeLine{02426       getThickness(),}
\DoxyCodeLine{02427       \mbox{\hyperlink{class_t_point_t}{TPointD}}(0.5 * (m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}} + m\_selectingRect.x1),}
\DoxyCodeLine{02428               0.5 * (m\_selectingRect.y0 + m\_selectingRect.y1)),}
\DoxyCodeLine{02429       fabs(0.5 * (m\_selectingRect.x1 -\/ m\_selectingRect.\mbox{\hyperlink{class_t_rect_t_ac008cbc625f50d8b3c180c8eb2594cdb}{x0}})),}
\DoxyCodeLine{02430       fabs(0.5 * (m\_selectingRect.y1 -\/ m\_selectingRect.y0)));}
\DoxyCodeLine{02431 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ellipse_primitive_a780d1184d1b61a50d3b5b1ae807fc8aa}\label{class_ellipse_primitive_a780d1184d1b61a50d3b5b1ae807fc8aa}} 
\index{EllipsePrimitive@{EllipsePrimitive}!mouseMove@{mouseMove}}
\index{mouseMove@{mouseMove}!EllipsePrimitive@{EllipsePrimitive}}
\doxysubsubsection{\texorpdfstring{mouseMove()}{mouseMove()}}
{\footnotesize\ttfamily void Ellipse\+Primitive\+::mouse\+Move (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_t_point_t}{TPointD}} \&}]{pos,  }\item[{const \mbox{\hyperlink{class_t_mouse_event}{TMouse\+Event}} \&}]{e }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02444                                                                          \{}
\DoxyCodeLine{02445   m\_pos = calculateSnap(pos);}
\DoxyCodeLine{02446   m\_pos = checkGuideSnapping(pos);}
\DoxyCodeLine{02447   m\_tool-\/>\mbox{\hyperlink{class_t_tool_a3e791336c642542c5648aa8ea86e2348}{invalidate}}();}
\DoxyCodeLine{02448 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ellipse_primitive_a1f81b693690a61ebbce6e131cd1c81d0}\label{class_ellipse_primitive_a1f81b693690a61ebbce6e131cd1c81d0}} 
\index{EllipsePrimitive@{EllipsePrimitive}!onEnter@{onEnter}}
\index{onEnter@{onEnter}!EllipsePrimitive@{EllipsePrimitive}}
\doxysubsubsection{\texorpdfstring{onEnter()}{onEnter()}}
{\footnotesize\ttfamily void Ellipse\+Primitive\+::on\+Enter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Reimplemented from \mbox{\hyperlink{class_primitive}{Primitive}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{02452                                \{}
\DoxyCodeLine{02453   \mbox{\hyperlink{class_t_application}{TTool::Application}} *app = TTool::getApplication();}
\DoxyCodeLine{02454   \textcolor{keywordflow}{if} (!app) \textcolor{keywordflow}{return};}
\DoxyCodeLine{02455 }
\DoxyCodeLine{02456   \textcolor{keywordflow}{if} (app-\/>getCurrentObject()-\/>isSpline()) \{}
\DoxyCodeLine{02457     m\_color = TPixel32::Red;}
\DoxyCodeLine{02458   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02459     \textcolor{keyword}{const} \mbox{\hyperlink{class_t_color_style}{TColorStyle}} *style = app-\/>getCurrentLevelStyle();}
\DoxyCodeLine{02460     \textcolor{keywordflow}{if} (style) m\_color = style-\/>\mbox{\hyperlink{class_t_color_style_af5907c6146db5067fcf000edeb8e403b}{getAverageColor}}();}
\DoxyCodeLine{02461   \}}
\DoxyCodeLine{02462 \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
E\+:/opentoonz/toonz/sources/tnztools/geometrictool.\+cpp\end{DoxyCompactItemize}
